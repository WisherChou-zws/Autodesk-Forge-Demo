{"version":3,"sources":["webpack://Autodesk.Extensions.[name]/webpack/bootstrap","webpack://Autodesk.Extensions.[name]/./node_modules/css-loader/lib/css-base.js","webpack://Autodesk.Extensions.[name]/./node_modules/style-loader/lib/addStyles.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/Measure.css?ab6d","webpack://Autodesk.Extensions.[name]/./extensions/Measure/Measure.css","webpack://Autodesk.Extensions.[name]/./extensions/Measure/res/icon-spinner-sm.svg","webpack://Autodesk.Extensions.[name]/./extensions/Measure/Calibration.css?fcde","webpack://Autodesk.Extensions.[name]/./extensions/Measure/Calibration.css","webpack://Autodesk.Extensions.[name]/./node_modules/style-loader/lib/urls.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/MeasurementsManager.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/Indicator.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/PolygonCentroid.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/MeasureToolIndicator.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/MeasureTool.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/CalibrationToolIndicator.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/CalibrationPanels.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/CalibrationTool.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/MeasureToolbar.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/Measure.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/MagnifyingGlass.js","webpack://Autodesk.Extensions.[name]/./node_modules/css-loader/lib/url/escape.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","useSourceMap","list","toString","this","map","item","content","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","toComment","sourceURLs","sources","source","sourceRoot","concat","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","length","id","push","stylesInDom","isOldIE","fn","memo","apply","arguments","memoize","window","document","all","atob","getElement","target","parent","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","e","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","options","domStyle","refs","j","parts","addStyle","listToStyles","newStyles","base","part","css","media","insertStyleElement","style","insertInto","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","createElement","undefined","attrs","type","nonce","nc","getNonce","addAttrs","el","keys","forEach","setAttribute","obj","update","remove","result","transform","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","href","styleSheet","cssText","createTextNode","newObj","DEBUG","newList","mayRemove","replaceText","textStore","index","replacement","filter","Boolean","cssNode","childNodes","hmr","locals","escape","location","baseUrl","protocol","host","currentDir","pathname","replace","fullMatch","origUrl","newUrl","unquotedOrigUrl","trim","$1","test","MeasureCommon","Autodesk","Viewing","MeasurementsManager","viewer","init","proto","getCurrentMeasurement","currentMeasurement","selectMeasurementById","measurement","measurementsList","changeCurrentMeasurement","createMeasurement","measurementType","measurementsCounter","Measurement","dispatchEvent","Events","MEASUREMENT_CHANGED_EVENT","data","removeCurrentMeasurement","reset","destroy","av","Indicator","tool","snapper","getSnapper","materialExtensionLine","materialExtensionFace","extensionLines","extensionFaces","grayOutPlane","materialPoint","materialLine","materialAngle","materialAngleOutline","materialGreyOutPlane","materialFace","angleArc","angleOutline","showMeasureResult","visibleLabels","overlayName","xAxis","autocam","getWorldRightVector","yAxis","getWorldUpVector","zAxis","getWorldFrontVector","getPolygonVisualCenter","polygon","Cell","x","y","h","inside","minDistSq","Infinity","k","ring","len","a","b","Math","min","getSegDistSq","sqrt","pointToPolygonDist","max","SQRT2","px","py","dx","dy","TinyQueue","compare","_down","_up","pop","top","peek","pos","current","halfLength","left","right","best","points","centroid","THREE","Vector3","add","multiplyScalar","getCentroidOfPolygon","minX","minY","maxX","maxY","width","height","cellSize","cellQueue","bestCell","area","f","getCentroidCell","bboxCell","cell","updateDistance","updateAngle","clear","updateLabelsPosition","render","picks","hasPick","renderPick","renderRubberband","changeEndpointOnEditStyle","endpointNumber","isEditing","handleResize","setNoTopology","setFetchingTopology","setTopologyAvailable","clientToCanvasCoords","event","rect","impl","getCanvasBoundingClientRect","res","canvasX","center","canvasY","pointers","clientX","clientY","initLabelMobileGestures","label","pointNumber","magnifyingGlass","toolController","getTool","hammer","Hammer","Manager","recognizers","GestureRecognizers","drag","singletap","handlePointerEventMouse","inputClass","isIE11","PointerEventInput","TouchInput","onSingleTapBinded","onMouseDown","editEndpoint","onDragStartBinded","editByDrag","handlePressHold","handleGesture","onDragMoveBinded","onDragEndBinded","handleButtonUp","on","clearLabelMobileGestures","off","updateVisibleLabelsArray","isVisible","hideEndpoints","endpoints","endpoint","hideLabel","showEndpoints","showLabel","safeToggle","changeEndpointEditableStyle","isEditable","changeAllEndpointsEditableStyle","changeAllEndpointsOnEditStyle","hideLabelsOutsideOfView","model","is2d","point","show","navigation","isPointVisible","classList","contains","toggle","showClick","pickNumber","getActivePointIndex","hideClick","createEndpoint","renderEndpointGeometry","geometry","getSnapResultPosition","getPick","position","clone","drawEdgeAsCylinder","geom","material","linewidth","cylinderGeometry","cylinder","edge","vertices","cylinderMesh","setCylinderScale","drawDashedLine","p1","p2","dashSize","gapSize","Geometry","line","subVectors","lineLength","lineDirection","normalize","currLength","addVectors","getNewCylinderGeometry","addMultipleOverlays","drawLineAsCylinder","addOverlay","CylinderGeometry","pointX","pointY","direction","orientation","Matrix4","lookAt","Object3D","up","multiply","set","Mesh","applyMatrix","lmv_line_width","z","scale","nearestPointInPointToSegment","getPosition","setScale","navapi","camera","getCamera","distance","isPerspective","sub","getEyeVector","fov","getVerticalFov","tan","degToRad","getScreenViewport","alignLabelWithLine","offset","camUpVector","getCameraUpVector","cameraAngle","angleTo","PI","angle","deltaX","deltaY","atan2","abs","isTouchDevice","endPoint","removeEventListener","isSafari","onMouseClickBinded","mousewheel","MeasurementTypes","MEASUREMENT_DISTANCE","previewsPick","activePick","start","end","renderDistanceMeasurement","MEASUREMENT_ANGLE","renderAngleMeasurement","MEASUREMENT_AREA","renderAreaMeasurement","initMouseEvent","pointerType","addEventListener","MeasureToolIndicator","measureTool","lines","xyz","axis","createLineMaterial","className","iconText","segments","dashedLine","simple","angleLabel","areaLabel","labels","isLeaflet","topologyStatus","TOPOLOGY_NOT_AVAILABLE","tmpVector","surfaceColor","MeshBasicMaterial","color","parseInt","opacity","transparent","depthTest","depthWrite","side","DoubleSide","constructor","TOPOLOGY_FETCHING","_tipHeight","_tipWidth","_axisLineWidth","isLeftIntersect","other","isRightIntersect","isMiddleIntersect","isVerticalIntersect","bottom","moveLeft","currentLabel","currentRect","otherRect","moveRight","moveDown","setValueMeasurementLabelText","strValue","div","textContent","setDeltaMeasurementLabelText","setVisibilityMeasurementLabelSpinner","display","MeasureTool","sharedMeasureConfig","_viewer","_names","_sharedMeasureConfig","Extensions","Measure","_active","_isDragging","_endpointMoved","_activePoint","_consumeSingleClick","_singleClickHandled","_downX","_downY","_isolateMeasure","_measurementsManager","_currentMeasurement","_onIndicatorCreatedCB","_snapper","_isPressing","_picksBackup","_cursorPosition","_closeAreaSnapRange","_preMeasureIsolatedNodes","_preMeasureHiddenNodes","_measurementType","getActivePick","getMaxNumberOfPicks","countPicks","getPreviousPick","noPicksSet","allPicksSet","enableMeasurementsTouchEvents","indicator","enableSelectionAreas","isNoPicksSet","snapToFirstPick","currentPick","forceSnap","closedArea","firstPick","firstPickPoint","firstPickPosition","project","currentPickPoint","currentPickPosition","distanceTo","onMouseMove","copyTo","showResult","hasResult","computeResult","enable","enableLabelsTouchEvents","areAllPicksSet","register","deregister","deactivate","isActive","getNames","getName","getPriority","getCursor","getCurrentMeasurementRaw","startNewMeasurement","attachIndicator","Function","changeMeasurementType","activate","isEditingEndpoint","pauseHighlight","getIsolatedNodes","getHiddenNodes","clearSelection","activateTool","onMeasurementChangedBinded","onMeasurementChanged","CAMERA_CHANGE_EVENT","onCameraChange","ISOLATE_EVENT","onIsolate","clearCurrentMeasurement","deactivateTool","getUnits","units","setUnits","DISPLAY_UNITS_CHANGED","updateResults","getPrecision","precision","setPrecision","getDistanceXYZ","getDistanceAux","distanceXYZ","getDistanceX","distanceX","getDistanceY","distanceY","getDistanceZ","distanceZ","measurementDistance","Private","convertUnits","getUnitString","calibrationFactor","formatValueWithUnits","getAngle","String","fromCharCode","getArea","getMeasurement","unitType","geomTypes","from","getGeometry","to","deltaZ","clearPick","updateViewportId","clearIsolate","setIsolateMeasure","isolateMeasurement","isolationGroup","snapNode","isolate","showAll","hide","nodeIdArray","deselectAllMeasurements","undoEditEndpoint","setSimple","unfocusLabels","isComplete","measurementId","isMobileDevice","_handleMouseEvent","setPick","focusLabels","deleteCurrentMeasurement","deleteCurrentPick","count","setViewportId","viewport","viewportIndex2d","correctPickPosition","active","geomType","SnapType","SNAP_VERTEX","geomVertex","intersectPoint","hasPreviousPick","passive","correctPerpendicularPicks","nextPick","valid","isSnapped","copyResults","container","getBoundingClientRect","inverseProject","lastPick","_doConsumeSingleClick","renderSucceeded","hasEqualPicks","measurementComplete","handleButtonDown","button","ctrlKey","metaKey","shiftKey","altKey","handleMouseMove","restoreMouseListeners","controller","enableMouseButtons","handleSingleClick","updateScale","clearOverlays","clearSnapped","handleDoubleClick","handleSingleTap","handleDoubleTap","handleKeyDown","keyCode","KeyCode","BACKSPACE","DELETE","currLabel","getData","onSelectionAreaClickedBinded","onSelectionAreaClicked","createMeasurementLabel","onCameraChangeBinded","handleButtonUpBinded","createSnapResultLabel","xy","visible","floor","clientHeight","clientWidth","p1Projected","p2Projected","invalidate","xyzDirection","itemDirection","cross","dot","needToStackLabels","labelsStacked","backupPositions","labelsOverlapDetection","stackLabels","staticLabel","labelsList","dynamicLabel","moved","staticRect","dynamicRect","slice","causeStacking","topLabel","space","drawXYZLine","self","tmpVec","normal","drawLineSegment","tips","drawTip","redrawDashedLine","removeMultipleOverlays","p1Scale","isDashedLine","drawSurface","cset","CompGeom","ContourSet","addContour","triangulate","triangulationFailed","bufferGeometry","toPolygonMesh","face","drawSegmentAndPush","isEqualVectors","EPSILON","showAreaLabel","updateArea","clearAngleMeshes","removeOverlay","drawAngle","ep1","ep2","midPoint","MeshPhongMaterial","ambient","createCommonOverlay","radius","circleGeometry","CircleGeometry","arc","V","updateMatrixWorld","vA","vB","applyMatrix4","matrixWorld","v1","v2","v3","v4","ra","a13","a14","a23","a24","rotWorldMatrix","makeRotationAxis","matrix","rotation","setFromRotationMatrix","outlineGeometry","copy","round","dir","crossVectors","showAngleLabel","createDistanceLabel","setVisibilityMeasurementLabelText","axisIcon","innerText","updateLine","x1","y1","z1","x2","y2","z2","showAxis","getAlignedUpVector","isParallel","displayAxis","setTimeout","setWidth","getWidth","is3d","maxWidth","setLineVisible","pointerEvents","setLabelsZIndex","zIndex","tip","clearSelectionAreas","clearOverlay","selectionArea","overlayScenes","removeOverlayScene","clearXYZLine","_this","segment","spinner","text","delta","label_icon","hitArea","createSelectionArea","updateSelectionArea","v","Vector2","_selectorAreaSize","transformOrigin","element","getElementById","CalibrationToolIndicator","calibrationTool","calibrationLabel","rubberbandDefaultMaterial","rubberbandSnappedMaterial","rubberbandTipMaterial","clearRubberband","updateLabelValue","i18n","translate","changeLabelClickableMode","clickable","showAddCalibrationLabel","onClick","showPanel","renderCalibrationLabel","mid","labelPosition","drawMeasurementLineTip","flip","tipMaterial","lineNormal","lineMaterial","getSnapResult","isPerpendicular","ave","avp","avu","UI","DockingPanel","_class","_classCallCheck","ViewerPanelMixin","CalibrationPanel","title","addFooter","parentContainer","resize","closer","setVisible","clearSize","heightAdjustment","marginTop","createScrollContainer","calibrationMenu","scrollContainer","table","tbody","row","insertRow","requestedSizeTextbox","autofocus","split","updateLabel","ESCAPE","requestedSize","cursorIndex","selectionStart","isSimple","unitList","selectedIndex","simpleInput","isPositiveNumber","isSimpleDecimal","calculatePrecision","getMaxPrecision","preventDefault","insertCell","caption","matches","unitNames","OptionDropDown","paddingLeft","paddingRight","setCalibration","requestedUnits","calibrate","match","isNaN","parseFloat","uninitialize","findUnits","selectedUnits","getCurrentUnits","setPanelValue","size","setSelectedIndex","parsedNumber","UnitParser","parsePositiveNumber","updatePanelPosition","labelOffset","cornerX","cornerY","rubberbandDirection","pow","canvas","CalibrationRequiredDialog","measureExt","dialogBox","calibrateNow","buttonsWrapper","cancel","calibrateNowButton","enableCalibrationTool","CalibrationTool","_measurement","_options","_maxPrecision","maxPrecision","_isCalibrated","_distance","_calibrationTaken","_selectedSize","_selectedUnits","_selectedP1","_selectedP2","_waitingForInput","_calibrationPanel","_hasUI","GuiViewer3D","addPanel","screenSizeChangedBinded","screenSizeChanged","removePanel","parsedRequestedSize","VIEWER_RESIZE_EVENT","hidePanel","clearAllPicks","setCalibrationFactor","getCalibrationFactor","isCalibrationValid","currentSize","defualtPrecision","requestedPrecision","getExtension","FINISHED_CALIBRATION","scaleFactor","calibrateByScale","requestedScale","CLOSE_CALIBRATION_PANEL_EVENT","focus","onKeyUp","OPEN_CALIBRATION_PANEL_EVENT","isCalibrated","CLEAR_CALIBRATION_SIZE_EVENT","clearMeasurement","repickEndpoint","MeasureToolbar","measureExtension","buttonsList","toolbar","getToolbar","navigationBar","getControl","TOOLBAR","NAVTOOLSID","toolbarOptions","measureToolbar","ControlGroup","MEASURETOOLSID","addControl","measureSimpleDistanceBtn","Button","setToolTip","setIcon","getState","State","ACTIVE","measureAngleBtn","measureAreaBtn","calibrationToolBtn","CALIBRATION","separator","deleteBtn","settingsBtn","settingsControlPanel","setButtonActive","setButtonInactive","root","initialIndex","getDisplayUnit","shift","toUnits","setupPrecision","logger","track","category","precisionList","OptionCheckbox","checked","updateSettingsPanel","setVisibility","disableUnitOption","measureDoneBtn","doneText","cancelLabel","btnContainer","iconEle","getElementsByClassName","exitMeasurementMode","closeToolbar","removeFromParent","enableMeasureTool","toggleVisible","viewerToolbarContainer","viewerContainerChildrenCount","children","MODELTOOLSID","measurementToolbarButton","setState","INACTIVE","deactivateAllButtons","activateButtonByType","dropdownElement","lastChild","precisions","elem","disabled","visibility","__webpack_exports__","MeasureExtension","avem","AutodeskNamespace","DEFAULT_MEASUREMENT_TYPE","Extension","modes","_onModelLoaded","load","hasUI","escapeHotkeyId","measureToolOptions","snapperOptions","forceCalibrate","Snapper","renderSnappedTopology","registerTool","_magnifyingGlassCanvas","_imageData","_imageBuffer","_clientX","_clientY","_needsClear","updateMagnifyingGlassBinded","updateMagnifyingGlass","pixelRatio","devicePixelRatio","normlizedDiameter","_radius","diameter","getContext","createImageData","ceil","Uint8Array","buffer","ctx","gl","readPixels","RGBA","UNSIGNED_BYTE","putImageData","drawImage","setGlassPosition","clearMagnifyingGlass","requestUpdate","hasEventListener","RENDER_PRESENTED_EVENT","once","drawMagnifyingGlass","handleWheelInput","onFinishedCalibration","activateInitiator","MODEL_ROOT_LOADED_EVENT","onModelRemoved","DISABLED","onModelAdded","getVisibleModels","MODEL_ADDED_EVENT","MODEL_REMOVED_EVENT","loadExtension","calibrationUnits","unload","destroyUI","deregisterTool","unloaded","setActive","getUnitOptions","getPrecisionOptions","isFractional","getDefaultUnit","openCalibrationRequiredDialog","initiator","CALIBRATION_REQUIRED_EVENT","FINISHED_CALIBRATION_FOR_DIMENSION_EVENT","activeStatus","success","enterMeasurementMode","console","warn","selectedTool","checkAndFetchTopology","OPEN_TOOL_AFTER_CALIBRAION","UNITS_CALIBRATION_STARTS_EVENT","_measurementMode","navigationControls","measureControls","measureButtonId","getId","removeControl","centerToolBar","onToolbarCreated","modelTools","state","hotkeys","keycodes","onRelease","getHotkeyManager","pushHotkeys","_checkedTopology","modelHasTopology","fetchTopology","then","topoData","catch","err","log","popHotkeys","theExtensionManager","registerExtension","url"],"mappings":"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","file":"Measure/Measure.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 359);\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!./Measure.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./Measure.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./Measure.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","var escape = require(\"../../node_modules/css-loader/lib/url/escape.js\");\nexports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/* hover shouldn't work on mobile devices */\\n.adsk-viewing-viewer .measure-length:hover.measure-length.enable-hover\\n{\\n\\tbox-shadow: 0 0 16px 3px rgba(0, 117, 210, 0.7);\\n\\t-webkit-box-shadow: 0 0 16px 3px rgba(0, 117, 210, 0.7);\\n    -moz-box-shadow: 0 0 16px 3px rgba(0, 117, 210, 0.7);\\n}\\n\\n.adsk-viewing-viewer .measure-length {\\n    display: none;\\n    position: absolute;\\n\\n    height: 19px;\\n\\n    left: 0px;\\n    top:  0px;\\n\\n    padding: 2px 0 2px 0;\\n\\n    background-color: #009bff;\\n    box-shadow: 0px 1px 3px 1px rgba(0,0,0,0.25);\\n\\n    color: #f4f4f4;\\n    font-size:12px;\\n    text-align: center;\\n    line-height: 1.2;\\n    white-space: nowrap;\\n\\n    border-radius: 8px;\\n    pointer-events: none;\\n    cursor: pointer;\\n    z-index: 2;\\n\\n    -webkit-tap-highlight-color: rgba(0,0,0,0);\\n}\\n\\n.adsk-viewing-viewer .measure-length.visible {\\n    display: block;\\n}\\n\\n.adsk-viewing-viewer .measure-length.fetching-topology {\\n    background-color: rgba(34, 34, 34, 0.8);\\n    box-shadow: 0 0.5px 1.5px 0 rgba(0, 0, 0, 0.3);\\n}\\n\\n.adsk-viewing-viewer .measure-length-text {\\n    display: inline-block;\\n    margin: 0 5px 0 5px;\\n    vertical-align: middle;\\n    font-size: 16px;\\n    pointer-events: none;\\n}\\n\\n.adsk-viewing-viewer .measure-delta-text {\\n    margin: 0 5px 0 5px;\\n    align-self: center;\\n    font-size: 14px;\\n\\toverflow: hidden;\\n\\twhite-space: nowrap;\\n\\theight: 16px;\\n\\tline-height: 16px;\\n\\tvertical-align: middle;\\n\\tpointer-events: none;\\n}\\n\\n.adsk-viewing-viewer .measure-length-button {\\n    display: inline-block;\\n    width: 16px;\\n    height: 16px;\\n    font-size: 16px;\\n    float: right;\\n\\n    color: #FFFFFF;\\n    opacity: 0.7;\\n}\\n\\n.adsk-viewing-viewer .measure-length-button:hover {\\n    background-color: rgba(166,194,255, 0.7);\\n    -webkit-transition: all 0.2s ease;\\n    -moz-transition: all 0.2s ease;\\n    -ms-transition: all 0.2s ease;\\n    -o-transition: all 0.2s ease;\\n    transition: all 0.2s ease;\\n}\\n\\n/* hover shouldn't work on mobile devices */\\n.adsk-viewing-viewer .measure-label:hover.measure-label.enable-hover,\\n.adsk-viewing-viewer .measure-label.on-edit {\\n\\tbox-shadow: 0 0 4px 4px #0d69ca;\\n\\t-webkit-box-shadow: 0 0 4px 4px #0d69ca;\\n    -moz-box-shadow: 0 0 4px 4px #0d69ca;\\n}\\n\\n.adsk-viewing-viewer .measure-label.editable {\\n\\tpointer-events: all;\\n}\\n\\n.adsk-viewing-viewer .measure-label {\\n    display: none;\\n    position: absolute;\\n    width: 7px;\\n    height: 7px;\\n    cursor: move;\\n    pointer-events: none; \\n    border-radius:100px;\\n}\\n\\n.adsk-viewing-viewer .measure-label-hit-area {\\n\\tdisplay: inline-block;\\n    position: absolute;\\n    width: 44px;\\n    height: 44px;\\n    left: -22px;\\n    top: -22px;\\n    border-radius:100px;\\n    z-index: 2;\\n}\\n\\n.adsk-viewing-viewer .measure-label-icon {\\n    display: inline-block;\\n    position: absolute;\\n    width: 7px;\\n    height: 7px;\\n    left: -2px;\\n    top: -2px;\\n    background-color: #009bff;\\n    border-style: solid;\\n    border-width: 2px;\\n    border-color: #FFFFFF;\\n    border-radius:100px;\\n\\tbox-shadow: 0 2px 5px 0 #182A3D;\\n\\tz-index: 2;\\n}\\n\\n.adsk-viewing-viewer .measure-label.visible {\\n    display: block;\\n}\\n\\n\\n.adsk-viewing-viewer .measure-label-text {\\n    display: inline-block;\\n    margin: 0px 5px 0px 5px;\\n    vertical-align: middle;\\n}\\n\\n.adsk-viewing-viewer .measure-horizontal-divider\\n{\\n    height: 1px;\\n    border-top: 1px solid rgba(200,200,200,0.8);\\n}\\n\\n.adsk-viewing-viewer .measure-submenu-select\\n{\\n    display: block;\\n    position: relative;\\n    width: calc(100% - 40px);\\n    padding: 10px 20px 0px 20px;\\n    opacity: 0.3;\\n}\\n\\n.adsk-viewing-viewer .option-drop-down:disabled {\\n    opacity: 0.3;\\n}\\n\\n.adsk-viewing-viewer .measure-submenu-selectlabel\\n{\\n    position: relative;\\n    display:  inline-block;\\n    padding-right:  20px;\\n    padding-bottom:  4px;\\n}\\n\\n/*.measure-result {*/\\n    /*display: inline-block;*/\\n    /*padding: 10px 0px  10px 20px;*/\\n/*}*/\\n\\n.adsk-viewing-viewer .measure-results {\\n    position: relative;\\n    display: block;\\n    padding: 5px 0px  10px 30px;\\n}\\n\\n.adsk-viewing-viewer .measure-result-label {\\n    display: inline-block;\\n    padding-right: 10px;\\n}\\n\\n.adsk-viewing-viewer .measure-result-number {\\n    display: inline-block;\\n}\\n\\n.adsk-viewing-viewer .measure-delta-collapse {\\n    position: absolute;\\n    right: 20px;\\n    display: inline-block;\\n    background-color: rgba(255,255,255, .12);\\n    margin: 0px 4px 0px 4px;\\n    padding: 0px 4px 0px 4px;\\n    cursor: pointer;\\n    text-align: center;\\n}\\n\\n.adsk-viewing-viewer .measure-delta-collapse:hover {\\n    background-color: rgba(166,194,255, 0.7);\\n    -webkit-transition: all 0.2s ease;\\n    -moz-transition: all 0.2s ease;\\n    -ms-transition: all 0.2s ease;\\n    -o-transition: all 0.2s ease;\\n    transition: all 0.2s ease;\\n}\\n\\n.adsk-viewing-viewer .measure-selection-repick {\\n    position: absolute;\\n    right: 20px;\\n    display: inline-block;\\n    background-color: rgba(255,255,255, .12);\\n    margin: 4px 4px 4px 4px;\\n    padding: 4px 4px 4px 4px;\\n    cursor: pointer;\\n    text-align: center;\\n}\\n\\n.adsk-viewing-viewer .measure-selection-repick:hover {\\n    background-color: rgba(166,194,255, 0.7);\\n    -webkit-transition: all 0.2s ease;\\n    -moz-transition: all 0.2s ease;\\n    -ms-transition: all 0.2s ease;\\n    -o-transition: all 0.2s ease;\\n    transition: all 0.2s ease;\\n}\\n\\n.adsk-viewing-viewer .measure-restart {\\n    margin: 10px 20px 15px 20px;\\n    padding: 6px 10px 6px 10px;\\n    width: calc(100% - 55px);\\n    cursor: pointer;\\n    text-align: center;\\n    border-style: solid;\\n    border-width: 1px;\\n    border-color: rgba(255, 255, 255, 0.2);\\n    border-radius: 3px;\\n}\\n\\n.adsk-viewing-viewer .docking-panel:hover .measure-restart {\\n    background-color: rgba(255,255,255, .12);\\n}\\n\\n.adsk-viewing-viewer .docking-panel .measure-restart:hover {\\n    background-color: rgba(166,194,255, 0.7);\\n    -webkit-transition: all 0.2s ease;\\n    -moz-transition: all 0.2s ease;\\n    -ms-transition: all 0.2s ease;\\n    -o-transition: all 0.2s ease;\\n    transition: all 0.2s ease;\\n}\\n\\n.adsk-viewing-viewer .measure-panel-title {\\n    padding-top:   0px;\\n    padding-left: 20px;\\n    margin-top: 10px;\\n}\\n\\n.adsk-viewing-viewer .measure-panel-title:hover {\\n    cursor: pointer;\\n}\\n\\n.adsk-viewing-viewer .measure-panel-title.collapsed  {\\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEwMDhBMzY4QTYyODExRTM5REY0Q0MwMTM3MTVFOTMzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEwMDhBMzY5QTYyODExRTM5REY0Q0MwMTM3MTVFOTMzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTAwOEEzNjZBNjI4MTFFMzlERjRDQzAxMzcxNUU5MzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTAwOEEzNjdBNjI4MTFFMzlERjRDQzAxMzcxNUU5MzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6WHWu4AAAAcElEQVR42mL8//8/AzmAiYFMgEtjGSFDcUmGAfEEIOYix6lWQLwUiGXJ8SNI00IgNiIncPiAeCoQ+5ITqsxQA+CAhQhN34C4AoiPkaLxGRAXAfEdUvx4DohjsGkCA1CSw4LrgZgVhxwYM9I9rQIEGACZNDs01yUXlAAAAABJRU5ErkJggg==);\\n    background-repeat:no-repeat;\\n}\\n\\n.adsk-viewing-viewer .measure-panel-title.expanded  {\\n    background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkE3QzFFQUQ1QTYyODExRTM5NzE2RjcyN0QxQjg0QTREIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkE3QzFFQUQ2QTYyODExRTM5NzE2RjcyN0QxQjg0QTREIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTdDMUVBRDNBNjI4MTFFMzk3MTZGNzI3RDFCODRBNEQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTdDMUVBRDRBNjI4MTFFMzk3MTZGNzI3RDFCODRBNEQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6XuY60AAAARklEQVR42mL8//8/AzmAiYFMQBeNqSg8kB+JwKlAfAZZjIlIm9JJdSpWTYQ04tSETyNeTbg0EtSETSNRmkCAcegkOYAAAwDGjDZHvY373AAAAABJRU5ErkJggg==);\\n    background-repeat:no-repeat;\\n}\\n\\n.adsk-viewing-viewer .adsk-viewing-viewer .measure-table td {\\n    padding: 10px 0px  10px 20px;\\n}\\n\\n.adsk-viewing-viewer .measure-result-container {\\n\\n}\\n\\n.adsk-viewing-viewer .measure-selection-one-label {\\n    display: inline-block;\\n    margin: 18px 18px 18px 18px;\\n    width: 16px;\\n    height: 16px;\\n    font-size: 16px;\\n    float: left;\\n\\n    padding: 2px;\\n    background-color: #0033FF;\\n    border-radius:         10px;\\n    opacity: 0.6;\\n}\\n\\n.adsk-viewing-viewer .measure-selection-two-label {\\n    display: inline-block;\\n    margin: 18px 18px 18px 18px;\\n    width: 16px;\\n    height: 16px;\\n    font-size: 16px;\\n    float: left;\\n\\n    padding: 2px;\\n    background-color: #0033FF;\\n    border-radius:         10px;\\n    opacity: 0.6;\\n}\\n\\n.adsk-viewing-viewer .measure-repick {\\n    display: inline-block;\\n    cursor: default;\\n    margin: 20px 20px 20px 20px;\\n    width: 16px;\\n    height: 16px;\\n    font-size: 16px;\\n    float: right;\\n    opacity: 0.5;\\n}\\n\\n.adsk-viewing-viewer .measure-repick:hover {\\n    opacity: 1;\\n}\\n\\n.adsk-viewing-viewer .measure-selection-result {\\n    display: inline-block;\\n    margin: 21px 0px 21px 0px;\\n}\\n\\n.adsk-viewing-viewer .measure-distance-icon {\\n    display: inline-block;\\n    margin: 20px 2px 20px 2px;\\n    font-size: 52px;\\n    color: #FF9900;\\n    float: left;\\n}\\n\\n.adsk-viewing-viewer .measure-angle-icon {\\n    display: inline-block;\\n    margin: 20px 2px 20px 2px;\\n    font-size: 52px;\\n    color: #FF9900;\\n    float: left;\\n}\\n\\n.adsk-viewing-viewer .adsk-viewing-viewer .measure-result {\\n    font-size: 20px;\\n    color: #FF9900;\\n    display: inline-block;\\n    margin: 38px 0px 38px 0px;\\n}\\n\\n.adsk-viewing-viewer .measure-initial {\\n    font-size: 20px;\\n    display: inline-block;\\n    margin: 38px 0px 38px 56px;\\n}\\n\\n.adsk-viewing-viewer .measure-settings-button {\\n    cursor: default;\\n    position: relative;\\n    top: 20px;\\n    right: 20px;\\n    width: 16px;\\n    height: 16px;\\n    font-size: 18px;\\n    float: right;\\n    opacity: 0.5;\\n}\\n\\n.adsk-viewing-viewer .measure-settings-button:hover {\\n    opacity: 1;\\n}\\n\\n.adsk-viewing-viewer .measure-delta-button {\\n    position: relative;\\n    top: 56px;\\n    right: 4px;\\n    width: 16px;\\n    height: 16px;\\n    font-size: 16px;\\n    float: right;\\n    opacity: 0.5;\\n    -webkit-transform : rotate(-90deg);\\n    -moz-transform : rotate(-90deg);\\n    -ms-transform : rotate(-90deg);\\n    -o-transform : rotate(-90deg);\\n    transform : rotate(-90deg);\\n}\\n\\n.adsk-viewing-viewer .measure-delta-button.rotated {\\n    -webkit-transform : rotate(90deg);\\n    -moz-transform : rotate(90deg);\\n    -ms-transform : rotate(90deg);\\n    -o-transform : rotate(90deg);\\n    transform : rotate(90deg);\\n}\\n\\n.adsk-viewing-viewer .measure-delta-button:hover {\\n    opacity: 1;\\n}\\n\\n.adsk-viewing-viewer .measure-delta-result {\\n    display: inline-block;\\n    margin: 0px 0px 20px 0px;\\n    padding: 0px 0px 0px 56px;\\n}\\n\\n.adsk-viewing-viewer .measure-label-axis {\\n    display: none;\\n    position: absolute;\\n\\n    width: 16px;\\n    height: 16px;\\n\\n    left: 0px;\\n    top:  0px;\\n\\n    background-color: #f4f4f4;\\n    border-radius: 8px;\\n    pointer-events: none;\\n}\\n\\n.adsk-viewing-viewer .measure-label-axis-icon.X {\\n    background-color: #EC4545;\\n}\\n\\n.adsk-viewing-viewer .measure-label-axis-icon.Y {\\n    background-color: #45C345;\\n}\\n\\n.adsk-viewing-viewer .measure-label-axis-icon.Z {\\n    background-color: #5757DA;\\n}\\n\\n.adsk-viewing-viewer .measure-label-axis-icon {\\n\\twidth: 20px;\\n    height: 18px;\\n    color: #f4f4f4;\\n    border-radius: 8px 0 0 8px;\\n    font-size: 12px;\\n    padding-top: 4px;\\n    line-height: 15px;\\n    text-align: center;\\n}\\n\\n/* hover shouldn't work on mobile devices */\\n.adsk-viewing-viewer .measure-label-axis-delta.enableTransition{\\n\\ttransition: opacity 0.1s linear;\\n}\\n\\n.adsk-viewing-viewer .measure-label-axis-delta {\\n    display: none;\\n    position: absolute;\\n    font-size: 18px;\\n\\n    left: 0px;\\n    top:  0px;\\n\\n    background-color: #ffffff;\\n    pointer-events: none;\\n    \\n    opacity: 0;\\n\\n    border-radius: 8px;\\n    box-shadow: 0px 1px 3px 1px rgba(0,0,0,0.25);\\n}\\n\\n.adsk-viewing-viewer .measure-label-axis.visible {\\n    display: block;\\n}\\n\\n.adsk-viewing-viewer .measure-label-axis-delta.visible {\\n    display: flex;\\n}\\n\\n.adsk-viewing-viewer .measure-label-axis-x {\\n    color: #EC4545;\\n}\\n\\n.adsk-viewing-viewer .measure-label-axis-y {\\n    color: #45C345;\\n}\\n\\n.adsk-viewing-viewer .measure-label-axis-z {\\n    color: #5757DA;\\n}\\n\\n\\n.adsk-viewing-viewer .magnifying-glass.visible {\\n    display: block;\\n}\\n\\n.adsk-viewing-viewer .magnifying-glass {\\n    position: absolute;\\n    display: none;\\n    -moz-border-radius: 100%;\\n    -webkit-border-radius: 100%;\\n    border-radius: 100%;\\n    background: transparent;\\n    box-shadow: 2px 2px 4px rgba(0,0,0,0.5), inset 2px 2px 4px rgba(0,0,0,.5);\\n    -webkit-box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5), inset 2px 2px 4px rgba(0,0,0,.5);  \\n    -moz-box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5), inset 2px 2px 4px rgba(0,0,0,.5);\\n    z-index: 4;\\n}\\n\\n.adsk-viewing-viewer .measure-fetching-topology {\\n    display: inline-block;\\n    width: 10px;\\n    height: 10px;\\n    background: url(\" + escape(require(\"./res/icon-spinner-sm.svg\")) + \");\\n    margin: 3px 0px -2px 3px;\\n    animation: measure-topology-fetching-anim 1.4s infinite linear;\\n    -webkit-animation: measure-topology-fetching-anim 1.4s infinite linear;\\n}\\n\\n@keyframes measure-topology-fetching-anim {\\n    0% {\\n        -webkit-transform: rotate(0deg);\\n        transform: rotate(0deg);\\n    }\\n    100% {\\n        -webkit-transform: rotate(360deg);\\n        transform: rotate(360deg);\\n    }\\n}\\n\\n@-webkit-keyframes measure-topology-fetching-anim {\\n    0% {\\n        -webkit-transform: rotate(0deg);\\n        transform: rotate(0deg);\\n    }\\n    100% {\\n        -webkit-transform: rotate(360deg);\\n        transform: rotate(360deg);\\n    }\\n}\\n\\n.adsk-viewing-viewer .docking-panel.measure-settings-popup {\\n    display: flex;\\n    justify-content: center;\\n    flex-direction: column;\\n    bottom: 120%;\\n    box-sizing: border-box;\\n    text-align: left;\\n    position: absolute;\\n    padding-top: 15px;\\n    padding-bottom: 15px;\\n}\\n\\n.adsk-viewing-viewer .adsk-toolbar-vertical .docking-panel.measure-settings-popup {\\n    right: 120%;\\n    bottom: unset;\\n    height: max-content;\\n    width: max-content;\\n}\\n\\n.adsk-viewing-viewer .docking-panel.measure-settings-popup .adsk-lmv-tftable tr.switch-slider-row td {\\n    width: auto;\\n    padding-bottom: 0px;\\n    padding-top: 0px;\\n    vertical-align: inherit;\\n}\\n\\n.adsk-viewing-viewer .docking-panel.measure-settings-popup.hide {\\n    display: none;\\n}\\n\\n.adsk-viewing-viewer .measure-settings-popup tbody {\\n    top: 15px;\\n}\\n\\n.adsk-toolbar .measure-toolbar-seperator {\\n    height: 18px;\\n    width: 1px;\\n    background-color: #999;\\n    float: left;\\n    margin: 16px 5px;\\n}\\n\\n.adsk-toolbar.adsk-toolbar-vertical .measure-toolbar-seperator {\\n    height: 1px;\\n    width: 18px;\\n    margin: 5px 16px;\\n}\\n\\n.adsk-viewing-viewer .measure-selection-area {\\n\\tdisplay: block;\\n\\tposition: absolute;\\n\\tcursor: pointer;\\n\\tz-index: 1;\\n\\t-webkit-tap-highlight-color: rgba(0,0,0,0);\\n}\\n\", \"\"]);\n\n// exports\n","module.exports = \"\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='10' height='10' viewBox='0 0 10 10'%3E %3Cdefs%3E %3ClinearGradient id='linear-gradient' y1='5' x2='10' y2='5' gradientUnits='userSpaceOnUse'%3E %3Cstop offset='0' stop-color='%23fff' stop-opacity='0'/%3E %3Cstop offset='1' stop-color='%23fff'/%3E %3C/linearGradient%3E %3C/defs%3E %3Ctitle%3EAsset 6%3C/title%3E %3Cg id='Layer_2' data-name='Layer 2'%3E %3Cg id='finals_24px'%3E %3Cpath d='M5,10A5,5,0,0,1,0,5,1.2,1.2,0,0,1,2.3,5,2.7,2.7,0,1,0,5,2.3,1.2,1.2,0,0,1,5,0,5,5,0,0,1,5,10Z' fill='url(%23linear-gradient)'/%3E %3C/g%3E %3C/g%3E %3C/svg%3E\\\"\"","\nvar content = require(\"!!../../node_modules/css-loader/index.js!./Calibration.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./Calibration.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./Calibration.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"@font-face {\\n    font-family: 'calibration-icon';\\n    src: url('data:application/octet-stream;base64,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') format('woff');\\n    font-weight: normal;\\n    font-style: normal;\\n}\\n\\n[class^=\\\"calibration-icon\\\"], [class*=\\\" calibration-icon\\\"] {\\n    font-family: 'calibration-icon';\\n    font-style: normal;\\n    font-weight: normal;\\n    font-variant: normal;\\n    line-height: 1;\\n    padding-top: 2px;\\n    speak: none;\\n    text-transform: none;\\n    -webkit-font-smoothing: antialiased;\\n    -moz-osx-font-smoothing: grayscale;\\n}\\n\\n.adsk-viewing-viewer .calibration-icon:before {\\n    content: 'a';\\n}\\n\\n.adsk-viewing-viewer .calibration-panel {\\n    left:calc(50% - 190px);\\n    top: calc(50% - 145px);\\n    width: 300px;\\n    height: auto;\\n    z-index: 4;\\n}\\n\\n.adsk-viewing-viewer .measure-settings-popup .option-drop-down,\\n.adsk-viewing-viewer .calibration-panel .option-drop-down {\\n    width: 100%;\\n    padding-right: 0px;\\n    box-sizing: border-box;\\n}\\n\\n.adsk-viewing-viewer .measure-settings-popup .adsk-lmv-tftable tr td,\\n.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td {\\n    width: auto;\\n    padding: 2px 15px 2px 0px;\\n}\\n\\n.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td input {\\n    margin: 0px;\\n    box-sizing: border-box;\\n    width: 100%;\\n}\\n\\n.adsk-viewing-viewer .measure-settings-popup .switch {\\n    margin-left: 25px;\\n}\\n.adsk-viewing-viewer .measure-settings-popup .switch .slider {\\n    width: 26px;\\n}\\n\\n.adsk-viewing-viewer .calibration-textbox::-webkit-inner-spin-button, \\n.adsk-viewing-viewer .calibration-textbox::-webkit-outer-spin-button { \\n    -webkit-appearance: none; \\n    margin: 0; \\n}\\n\\n.adsk-viewing-viewer .calibration-text {\\n    text-align: left;\\n    padding: 6px 10px 6px 10px;\\n    margin: 20px 20px 14px 20px;\\n    font-size: 14px;\\n    -webkit-font-smoothing: antialiased;\\n}\\n\\n.adsk-viewing-viewer .calibration-button {\\n    margin-top: 15px;\\n}\\n\\n.adsk-viewing-viewer .calibration-button-left {\\n    width: calc(50% - 15px);\\n    margin-right: 5px !important;\\n    display: inline-block;\\n}\\n\\n.adsk-viewing-viewer .calibration-button-right {\\n    width: calc(50% - 15px);\\n    margin-left: 5px !important;\\n    display: inline-block;\\n}\\n\\n.adsk-viewing-viewer .calibration-line {\\n    position: absolute;\\n    display: block;    \\n    top:0;\\n    left:0;\\n    pointer-events: none;\\n    z-index: 0;\\n}\\n\\n.adsk-viewing-viewer .calibration-label {\\n    display: none;\\n    position: absolute;\\n    pointer-events: none;\\n    text-align: 'center';\\n    vertical-align: middle;\\n    cursor: default;\\n    padding: 2px;\\n    color: #000000;\\n    background: #FFFFFF;\\n    border-radius: 10px;\\n    -webkit-transform-origin: 50%  53%;\\n}\\n\\n.adsk-viewing-viewer .calibration-label-text {\\n    display: inline-block;\\n    pointer-events: none;\\n    text-align: 'center';\\n    vertical-align: middle;\\n    font-size: 12px;\\n    cursor: default;\\n    padding: 2px;\\n    color: #000000;\\n    background: #FFFFFF;\\n    border-bottom: 1px dashed #000000;\\n    text-decoration: none;\\n    text-transform: uppercase;\\n    -webkit-font-smoothing: antialiased;\\n}\\n\\n.adsk-viewing-viewer .calibration-label-text:hover {\\n    color: #039be5;\\n    border-bottom: 1px dashed #039be5;\\n}\\n\\n.adsk-viewing-viewer .calibration-label.visible {\\n    display: block;\\n}\\n\\n.adsk-viewing-viewer .calibration-endpoint:hover.calibration-endpoint.enable-hover,\\n.adsk-viewing-viewer .calibration-endpoint.edit {\\n    background-color: #039be5;\\n}\\n\\n.adsk-viewing-viewer .calibration-endpoint:hover.calibration-endpoint.enable-hover > * ,\\n.adsk-viewing-viewer .calibration-endpoint.edit > * {\\n    color: #ffffff;\\n}\\n\\n.adsk-viewing-viewer .calibration-endpoint.editable {\\n    pointer-events: all;\\n}\\n\\n.adsk-viewing-viewer .calibration-endpoint {\\n    display: none;\\n    position: absolute;\\n    cursor: move;\\n    pointer-events: none;\\n    width: 30px;\\n    height: 30px;\\n    background-color: #ffffff;\\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.24), 0 0 8px 0 rgba(0, 0, 0, 0.12);\\n    -moz-border-radius: 50px;\\n    -webkit-border-radius: 50px;\\n    border-radius: 50px;\\n    justify-content:center;\\n    align-items:center;\\n    text-align: center;\\n}\\n\\n.adsk-viewing-viewer .calibration-endpoint.visible {\\n    display: block;\\n}\\n\\n.adsk-viewing-viewer .calibration-endpoint-text {\\n    display: inline-block;\\n    font-size: 14px;\\n    vertical-align: middle;\\n    cursor: default;\\n    margin: 5px 5px 5px 5px;\\n    vertical-align: middle;\\n    text-align: center;\\n    color: #039be5;\\n    text-decoration: none;\\n    text-transform: uppercase;\\n    pointer-events: none;\\n}\\n\\n.adsk-viewing-viewer .calibration-buttons-wrapper {\\n    text-align: center;\\n}\\n\", \"\"]);\n\n// exports\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon; //These come from main lmv bundle.\n\n    // /** @constructor */\n    export function MeasurementsManager(viewer)\n    {   \n        this.viewer = viewer;\n        this.init();\n    }\n\n    var proto = MeasurementsManager.prototype;\n\n    proto.getCurrentMeasurement = function() {\n        return this.currentMeasurement;\n    };\n\n    proto.selectMeasurementById = function(id) {\n        var measurement = this.measurementsList[id];\n        \n        if (measurement) {\n            this.changeCurrentMeasurement(measurement);\n            return this.currentMeasurement;    \n        }\n\n        return false;\n    };\n\n    proto.createMeasurement = function(measurementType) {\n        var id = this.measurementsCounter;\n        var measurement = new MeasureCommon.Measurement(measurementType, id);\n        this.measurementsList[id] = measurement;\n        this.measurementsCounter++;\n        this.changeCurrentMeasurement(measurement);\n        return this.currentMeasurement;\n    };\n\n    proto.changeCurrentMeasurement = function(measurement) {\n        this.currentMeasurement = measurement;\n        this.viewer.dispatchEvent({ type: MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, data: { type: measurement.measurementType, id: measurement.id }});\n    };\n\n    proto.removeCurrentMeasurement = function() { \n        // Remove current measurement from the list\n        if (Object.keys(this.measurementsList).length > 0) {\n            delete this.measurementsList[this.currentMeasurement.id];\n        }\n    };\n\n    proto.init = function() {\n        this.reset();\n    };\n\n    proto.destroy = function() {\n        this.reset();\n    };\n\n    proto.reset = function() {\n        this.currentMeasurement = null;\n        this.measurementsList = {};\n        this.measurementsCounter = 0;\n    };\n\n","\n    var av = Autodesk.Viewing;\n    var MeasureCommon = av.MeasureCommon;\n    \n    /**\n     * Base class for an indicator.\n     */\n\n    export var Indicator = function(viewer, measurement, tool)\n    {\n        this.viewer = viewer;\n        this.measurement = measurement;\n        this.tool = tool;\n        this.snapper = tool.getSnapper();\n        this.materialExtensionLine = null;\n        this.materialExtensionFace = null;\n        this.extensionLines = [];\n        this.extensionFaces = [];\n        this.grayOutPlane = [];\n        this.materialPoint = null;\n        this.materialLine = null;\n        this.materialAngle = null;\n        this.materialAngleOutline = null;\n        this.materialGreyOutPlane = null;\n        this.materialFace = null;\n        this.angleArc = null;\n        this.angleOutline = [];\n        this.showMeasureResult = false;\n        this.visibleLabels = [];\n        this.overlayName = 'measure-indicator-overlay-' + (measurement.id || '');\n        this.xAxis = this.viewer.autocam.getWorldRightVector();\n        this.yAxis = this.viewer.autocam.getWorldUpVector();\n        this.zAxis = this.viewer.autocam.getWorldFrontVector();\n    };\n\n\n\n    var proto = Indicator.prototype;\n\n    proto.init = function() {\n        return false;\n    };\n\n    proto.updateDistance = function() {\n        return false;\n    };\n\n    proto.updateAngle = function() {\n        return false;\n    };\n\n    proto.clear = function() {\n        return false;\n    };\n\n    proto.updateLabelsPosition = function() {\n        return false;\n    };\n\n    // Renders the measurement and the labels.\n    proto.render = function(picks, showMeasureResult) {\n\n        this.showMeasureResult = showMeasureResult;\n\n        this.clear();\n\n        for (var i = 1; i <= Object.keys(picks).length; i++) {\n            if (this.measurement.hasPick(i)) {\n                this.renderPick(i);\n            }\n        }\n            \n        this.renderRubberband(picks);\n        \n        this.updateLabelsPosition();\n    };\n\n    proto.changeEndpointOnEditStyle = function(endpointNumber, isEditing) {\n        return false;\n    };\n\n    proto.handleResize = function() {\n        return false;\n    };\n\n    proto.setNoTopology = function() {\n        return false;\n    };\n\n    proto.setFetchingTopology = function() {\n        return false;\n    };\n\n    proto.setTopologyAvailable = function() {\n        return false;\n    };\n\n    proto.clientToCanvasCoords = function(event) {\n        var rect = this.viewer.impl.getCanvasBoundingClientRect();\n        var res = {};\n        if( event.hasOwnProperty(\"center\") )\n        {\n            event.canvasX = res.x = event.center.x - rect.left;\n            event.canvasY = res.y = event.center.y - rect.top;\n        }\n        else\n        {\n            event.canvasX = res.x = event.pointers[0].clientX - rect.left;\n            event.canvasY = res.y = event.pointers[0].clientY - rect.top;\n        }\n\n        return res;\n    };\n\n    proto.initLabelMobileGestures = function(label, pointNumber) {\n        var magnifyingGlass = this.viewer.toolController.getTool(\"magnifyingGlass\");\n\n        this.hammer = new av.Hammer.Manager(label, {\n                recognizers: [\n                    av.GestureRecognizers.drag,\n                    av.GestureRecognizers.singletap\n                ],\n                handlePointerEventMouse: false,\n                inputClass: av.isIE11 ? av.Hammer.PointerEventInput : av.Hammer.TouchInput\n            });\n\n        this.onSingleTapBinded = function(event) { \n                                    var pos = this.clientToCanvasCoords(event);\n                                    this.snapper.onMouseDown(pos);\n                                    this.tool.editEndpoint(event, pointNumber, this.measurement.id); \n                                }.bind(this);\n\n        this.onDragStartBinded = function(event) {\n                                    var pos = this.clientToCanvasCoords(event);\n                                    this.snapper.onMouseDown(pos);\n                                    this.tool.editEndpoint(event, pointNumber, this.measurement.id);\n                                    this.tool.editByDrag = true;\n\n                                    // Activate Magnifying Glass and tool by faking press event.\n                                    event.type = \"press\";\n                                    magnifyingGlass.handlePressHold(event);\n                                    this.tool.handlePressHold(event);\n                                    event.type = \"dragstart\";\n                                    magnifyingGlass.handleGesture(event);\n                                    this.tool.handleGesture(event);\n                                }.bind(this);\n\n        this.onDragMoveBinded = function(event){ \n                                    var pos = this.clientToCanvasCoords(event);\n                                    this.snapper.onMouseDown(pos);\n\n                                    magnifyingGlass.handleGesture(event);\n                                    this.tool.handleGesture(event);\n                                }.bind(this);\n\n        this.onDragEndBinded = function(event){ \n                                    var pos = this.clientToCanvasCoords(event);\n                                    this.snapper.onMouseDown(pos);\n                                    \n                                    // Deactivate Magnifying Glass and tool by faking pressup event.\n                                    magnifyingGlass.handleGesture(event);\n                                    this.tool.handleGesture(event);\n                                    event.type = \"pressup\";\n                                    magnifyingGlass.handlePressHold(event);\n                                    this.tool.handlePressHold(event);\n\n                                    this.tool.handleButtonUp(event);\n                                }.bind(this);\n\n        this.hammer.on(\"singletap\", this.onSingleTapBinded);\n        this.hammer.on(\"dragstart\", this.onDragStartBinded);\n        this.hammer.on(\"dragmove\", this.onDragMoveBinded);\n        this.hammer.on(\"dragend\", this.onDragEndBinded);\n    };\n\n    proto.clearLabelMobileGestures = function() {\n        if (this.hammer) {\n            this.hammer.off(\"singletap\", this.onSingleTapBinded);\n            this.hammer.off(\"dragstart\", this.onDragStartBinded);\n            this.hammer.off(\"dragmove\", this.onDragMoveBinded);\n            this.hammer.off(\"dragend\", this.onDragEndBinded);\n            this.hammer = null;\n        }\n    };\n\n    proto.updateVisibleLabelsArray = function(label, isVisible) {\n        if (isVisible) {\n            if (!(this.visibleLabels.indexOf(label) > -1)) {\n                this.visibleLabels.push(label);        \n            }\n        } else {\n            // remove from array\n            var index = this.visibleLabels.indexOf(label);\n            if (index > -1) {\n                this.visibleLabels.splice(index, 1);\n            }\n        }\n    };\n\n    proto.hideEndpoints = function() {\n        for (var name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                var endpoint = this.endpoints[name];\n                if (endpoint.label) {\n                    this.hideLabel(endpoint.label);\n                }\n            }\n        }\n    };\n\n    proto.showEndpoints = function() {\n        for (var name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                var endpoint = this.endpoints[name];\n                if (this.measurement.hasPick(name) && endpoint.label) {\n                    this.showLabel(endpoint.label);\n                }\n            }\n        }\n    };\n\n    proto.hideLabel = function(label) {\n        if (label) {\n            MeasureCommon.safeToggle(label, 'visible', false);\n            this.updateVisibleLabelsArray(label, false);      \n        }\n    };\n\n    proto.showLabel = function(label) {\n        if (label) {\n            MeasureCommon.safeToggle(label, 'visible', true);\n            this.updateVisibleLabelsArray(label, true);\n        }\n    };\n\n    proto.changeEndpointOnEditStyle = function(endpointNumber, isEditing) {\n        if (this.endpoints[endpointNumber] && this.endpoints[endpointNumber].label) {\n            MeasureCommon.safeToggle(this.endpoints[endpointNumber].label, 'on-edit', isEditing);\n        }\n    };\n\n    proto.changeEndpointEditableStyle = function(endpointNumber, isEditable) {\n        if (this.endpoints[endpointNumber] && this.endpoints[endpointNumber].label) {\n            MeasureCommon.safeToggle(this.endpoints[endpointNumber].label, 'editable', isEditable);\n        }\n    };\n\n    proto.changeAllEndpointsEditableStyle = function(isEditable) {\n        for (var name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                this.changeEndpointEditableStyle(name, isEditable);    \n            }\n        }\n    };\n\n    proto.changeAllEndpointsOnEditStyle = function(isEditing) {\n        for (var name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                this.changeEndpointOnEditStyle(name, isEditing);\n            }\n        }\n    };\n\n    proto.hideLabelsOutsideOfView = function() {\n        // For each label, check if it's inside the camera viewport.\n        if (this.viewer.model && !this.viewer.model.is2d()) {\n            this.visibleLabels.forEach(function(label) {\n\n                // Ignore labels if position is not computed yet. This may temporarily happen, because label positions are not\n                // always immediately assigned. (see MeasureToolIndicator.js)\n                // Note that we must not set them to invisible here, because this may cause a hen-and-egg-problem: \n                // Some code sections in MeasureToolIndicator.updatePositions() don't set the label position for invisible labels.\n                if (!label.point) {\n                    return;\n                }\n\n                var show = this.viewer.navigation.isPointVisible(label.point);\n\n                if ((label.classList.contains('visible') && !show) || (!label.classList.contains('visible') && show)) {\n                    label.classList.toggle('visible', show);    \n                } \n\n            }.bind(this));\n        }\n    };\n\n    proto.showClick = function(pickNumber) {\n        if (this.tool.getActivePointIndex() !== pickNumber) {\n            this.showLabel(this.endpoints[pickNumber].label);\n        }\n    };\n\n    proto.hideClick = function(pickNumber) {\n\n        if (this.endpoints[pickNumber]) {\n            this.hideLabel(this.endpoints[pickNumber].label);    \n        }\n    };\n\n    proto.renderPick = function(pickNumber) {\n        if (!this.endpoints[pickNumber]) {\n            this.createEndpoint(pickNumber);\n        }\n\n        this.renderEndpointGeometry(pickNumber);\n        this.showClick(pickNumber);\n    };\n\n    proto.renderEndpointGeometry = function(pickNumber) {\n        var geometry = MeasureCommon.getSnapResultPosition(this.measurement.getPick(pickNumber), this.viewer);\n        this.endpoints[pickNumber].position = geometry.clone();\n    };\n\n\n    // This is a workaround to deal with the limitation on linewidth on Windows due to the ANGLE library\n    proto.drawEdgeAsCylinder = function(geom, material, linewidth, type, cylinderGeometry) {\n\n        // The array for all cylinders\n        var edge = [];\n        var cylinder;\n\n        if (type == 1) { // LinePieces\n            for (var i = 0; i < geom.vertices.length; i += 2) {\n                cylinder = this.cylinderMesh(geom.vertices[i], geom.vertices[i + 1], material, linewidth, cylinderGeometry);\n                this.setCylinderScale(cylinder, geom.vertices[i], geom.vertices[i + 1]);\n                edge.push(cylinder);\n            }\n        }\n        else { // LineStrip\n            for (var i = 0; i < geom.vertices.length - 1; i++) {\n                cylinder = this.cylinderMesh(geom.vertices[i], geom.vertices[i + 1], material, linewidth, cylinderGeometry);\n                this.setCylinderScale(cylinder, geom.vertices[i], geom.vertices[i + 1]);\n                edge.push(cylinder);\n            }\n        }\n\n\n        return edge;\n    };\n\n    proto.drawDashedLine = function(p1, p2, dashSize, gapSize, material, width, overlayName) {\n\n        var geometry = new THREE.Geometry();\n        var line = new THREE.Vector3().subVectors(p2, p1);\n        var lineLength = line.length() - gapSize;\n        var lineDirection = line.normalize();\n        \n        var i = 0;\n        var pos = p1.clone();\n        var currLength = 0;\n\n        while (currLength < lineLength) {\n            var isPointVisible = this.viewer.navigation.isPointVisible(pos);\n            \n            if (isPointVisible) {\n                geometry.vertices[i] = pos.clone();\n                i++;\n            }\n            \n            pos.addVectors(pos, lineDirection.clone().multiplyScalar(dashSize));\n            \n            if (isPointVisible) {\n                geometry.vertices[i] = pos.clone();\n                i++;\n            }\n            \n            pos.addVectors(pos, lineDirection.clone().multiplyScalar(gapSize));\n\n            currLength += dashSize + gapSize;\n        }\n        \n        line = this.drawEdgeAsCylinder(geometry, material, width, 1, this.getNewCylinderGeometry());\n        this.viewer.impl.addMultipleOverlays(overlayName, line);\n\n        return line;\n    };\n\n    // This is a workaround to deal with the limitation on linewidth on Windows due to the ANGLE library\n    proto.drawLineAsCylinder = function(geom, material, linewidth, overlayName) {\n\n        var line;\n\n        if (geom.vertices.length == 2) {\n            line = this.cylinderMesh(geom.vertices[0], geom.vertices[1], material, linewidth, this.getNewCylinderGeometry());\n            this.setCylinderScale(line, geom.vertices[0], geom.vertices[1]);\n            this.viewer.impl.addOverlay(overlayName, line);\n        }\n\n        return line;\n    };\n\n    proto.getNewCylinderGeometry = function() {\n        return new THREE.CylinderGeometry(0.1, 0.1, 1, 8, 1, true);\n    };\n\n\n    proto.cylinderMesh = function(pointX, pointY, material, linewidth, cylinderGeometry) {\n\n        var direction = new THREE.Vector3().subVectors(pointY, pointX);\n        var orientation = new THREE.Matrix4();\n        orientation.lookAt(pointX, pointY, new THREE.Object3D().up);\n        orientation.multiply(new THREE.Matrix4().set(linewidth, 0, 0, 0,\n            0, 0, linewidth, 0,\n            0, -direction.length(), 0, 0,\n            0, 0, 0, 1));\n\n        var edge = new THREE.Mesh(cylinderGeometry, material);\n        edge.applyMatrix(orientation);\n        edge.lmv_line_width = linewidth;\n        edge.position.x = (pointY.x + pointX.x) / 2;\n        edge.position.y = (pointY.y + pointX.y) / 2;\n        edge.position.z = (pointY.z + pointX.z) / 2;\n\n        return edge;\n    };\n\n    // Set scale for cylinder\n    proto.setCylinderScale = function(cylinderMesh, p1, p2) {\n        var scale;\n\n        if (p1 && p2) {\n            var point = MeasureCommon.nearestPointInPointToSegment(this.viewer.navigation.getPosition(), p1, p2);\n            scale = this.setScale(point);    \n        } else {\n            scale = this.setScale(cylinderMesh.position);\n        }\n\n        if (cylinderMesh.hasOwnProperty(\"lmv_line_width\"))\n            scale *= cylinderMesh.lmv_line_width;\n        cylinderMesh.scale.x = scale;\n        cylinderMesh.scale.z = scale;\n    };\n\n\n    // Set scale for vertex and extension dashed line\n    proto.setScale = function(point) {\n\n        var pixelSize = 5;\n\n        var navapi = this.viewer.navigation;\n        var camera = navapi.getCamera();\n        var position = navapi.getPosition();\n\n        var p = point.clone();\n\n        var distance = camera.isPerspective ? p.sub(position).length()\n            : navapi.getEyeVector().length();\n\n        var fov = navapi.getVerticalFov();\n        var worldHeight = 2.0 * distance * Math.tan(THREE.Math.degToRad(fov * 0.5));\n\n        var viewport = navapi.getScreenViewport();\n        var scale = pixelSize * worldHeight / viewport.height;\n\n        return scale;\n    };\n\n    proto.alignLabelWithLine = function(label, p1, p2, offset, viewer){\n        var camUpVector = viewer.navigation.getCameraUpVector();\n        var worldUpVec = new THREE.Vector3(0,1,0);\n        var cameraAngle = worldUpVec.angleTo(camUpVector) * 180 / Math.PI;\n\n        cameraAngle = camUpVector.x >= 0 ? cameraAngle : -cameraAngle;\n        \n        var angle = null;\n\n        var deltaX = p1.x - p2.x;\n        var deltaY = p1.y - p2.y;\n\n        if (p1.x < p2.x) {\n            angle =  Math.atan2(-deltaY , -deltaX) * 180 / Math.PI;    \n        } \n        else {\n            angle =  Math.atan2(deltaY , deltaX) * 180 / Math.PI;    \n        }\n\n        angle = -(angle + cameraAngle);\n\n        if (Math.abs(angle) > 90){\n            angle = angle + 180;\n        }\n\n        label.style.transform = 'rotate('+ angle +'deg) translate(0px, ' + offset + 'px)';\n    };\n\n    proto.destroy = function() {\n        this.materialPoint = null;\n        this.materialFace = null;\n        this.materialLine = null;\n        this.materialAngle = null;\n\n        if (av.isTouchDevice()) {\n            this.clearLabelMobileGestures();    \n        }\n\n        for (var name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                var endPoint = this.endpoints[name];\n\n                if (endPoint.label) {\n                    endPoint.label.removeEventListener(av.isSafari() ? 'mousedown' : 'pointerdown', this.onMouseClickBinded);\n                    endPoint.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n                    endPoint.label.parentNode.removeChild(endPoint.label);\n                    endPoint.label = null;\n                }\n            }\n        }\n\n        this.visibleLabels = [];\n    };\n\n    proto.renderRubberband = function(picks) {\n\n        switch (this.measurement.measurementType) {\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE:\n                var previewsPick = picks[1];\n                var activePick = picks[2];\n                var start = MeasureCommon.getSnapResultPosition(previewsPick, this.viewer);\n                var end = MeasureCommon.getSnapResultPosition(activePick, this.viewer);\n                \n                if (start && end) {\n                    this.renderDistanceMeasurement(start, end);\n                }\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE:\n                this.renderAngleMeasurement(picks);\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_AREA:\n                this.renderAreaMeasurement(picks);\n                break;\n        }\n    };\n\n    proto.initMouseEvent = function(label, pointNumber) {\n        \n        var isSafari = av.isSafari();\n        this.onMouseClickBinded = function(event) { \n            if(isSafari || event.pointerType === 'mouse'){\n                event.canvasX = event.clientX;\n                event.canvasY = event.clientY;\n                this.tool.editEndpoint(event, pointNumber, this.measurement.id); \n            }\n        }.bind(this);\n        label.addEventListener(isSafari ? 'mousedown' : 'pointerdown', this.onMouseClickBinded);         \n    };\n","    // Centroid of a polygon is the average of its points.\n    export function getCentroidOfPolygon(points) {\n        var centroid = new THREE.Vector3();\n        var n = points.length;\n\n        for (var i = 0; i < n; i++) {\n            centroid.add(points[i]);\n        }\n\n        centroid.multiplyScalar(1 / n);\n        return centroid;\n    }\n\n    // Algorithm based on https://github.com/mapbox/polylabel\n    export function getPolygonVisualCenter(polygon) {\n        function compareMax(a, b) {\n            return b.max - a.max;\n        }\n\n        function Cell(x, y, h, polygon) {\n            this.x = x; // cell center x\n            this.y = y; // cell center y\n            this.h = h; // half the cell size\n            this.d = pointToPolygonDist(x, y, polygon); // distance from cell center to polygon\n            this.max = this.d + this.h * Math.SQRT2; // max distance to polygon within a cell\n        }\n\n        // signed distance from point to polygon outline (negative if point is outside)\n        function pointToPolygonDist(x, y, polygon) {\n            var inside = false;\n            var minDistSq = Infinity;\n\n            for (var k = 0; k < polygon.length; k++) {\n                var ring = polygon[k];\n\n                for (var i = 0, len = ring.length, j = len - 1; i < len; j = i++) {\n                    var a = ring[i];\n                    var b = ring[j];\n\n                    if ((a.y > y !== b.y > y) &&\n                        (x < (b.x - a.x) * (y - a.y) / (b.y - a.y) + a.x)) inside = !inside;\n\n                    minDistSq = Math.min(minDistSq, getSegDistSq(x, y, a, b));\n                }\n            }\n\n            return (inside ? 1 : -1) * Math.sqrt(minDistSq);\n        }\n\n        // get polygon centroid\n        function getCentroidCell(polygon) {\n            var area = 0;\n            var x = 0;\n            var y = 0;\n            var points = polygon[0];\n\n            for (var i = 0, len = points.length, j = len - 1; i < len; j = i++) {\n                var a = points[i];\n                var b = points[j];\n                var f = a.x * b.y - b.x * a.y;\n                x += (a.x + b.x) * f;\n                y += (a.y + b.y) * f;\n                area += f * 3;\n            }\n            if (area === 0) return new Cell(points[0].x, points[0].y, 0, polygon);\n            return new Cell(x / area, y / area, 0, polygon);\n        }\n\n        // get squared distance from a point to a segment\n        function getSegDistSq(px, py, a, b) {\n\n            var x = a.x;\n            var y = a.y;\n            var dx = b.x - x;\n            var dy = b.y - y;\n\n            if (dx !== 0 || dy !== 0) {\n\n                var t = ((px - x) * dx + (py - y) * dy) / (dx * dx + dy * dy);\n\n                if (t > 1) {\n                    x = b.x;\n                    y = b.y;\n\n                } else if (t > 0) {\n                    x += dx * t;\n                    y += dy * t;\n                }\n            }\n\n            dx = px - x;\n            dy = py - y;\n\n            return dx * dx + dy * dy;\n        }\n\n        function TinyQueue(data, compare) {\n\n            function defaultCompare(a, b) {\n                return a < b ? -1 : a > b ? 1 : 0;\n            }\n\n            if (!(this instanceof TinyQueue)) return new TinyQueue(data, compare);\n\n            this.data = data || [];\n            this.length = this.data.length;\n            this.compare = compare || defaultCompare;\n\n            if (this.length > 0) {\n                for (var i = (this.length >> 1); i >= 0; i--) this._down(i);\n            }\n        }\n\n        TinyQueue.prototype = {\n\n            push: function (item) {\n                this.data.push(item);\n                this.length++;\n                this._up(this.length - 1);\n            },\n\n            pop: function () {\n                if (this.length === 0) return undefined;\n\n                var top = this.data[0];\n                this.length--;\n\n                if (this.length > 0) {\n                    this.data[0] = this.data[this.length];\n                    this._down(0);\n                }\n                this.data.pop();\n\n                return top;\n            },\n\n            peek: function () {\n                return this.data[0];\n            },\n\n            _up: function (pos) {\n                var data = this.data;\n                var compare = this.compare;\n                var item = data[pos];\n\n                while (pos > 0) {\n                    var parent = (pos - 1) >> 1;\n                    var current = data[parent];\n                    if (compare(item, current) >= 0) break;\n                    data[pos] = current;\n                    pos = parent;\n                }\n\n                data[pos] = item;\n            },\n\n            _down: function (pos) {\n                var data = this.data;\n                var compare = this.compare;\n                var halfLength = this.length >> 1;\n                var item = data[pos];\n\n                while (pos < halfLength) {\n                    var left = (pos << 1) + 1;\n                    var right = left + 1;\n                    var best = data[left];\n\n                    if (right < this.length && compare(data[right], best) < 0) {\n                        left = right;\n                        best = data[right];\n                    }\n                    if (compare(best, item) >= 0) break;\n\n                    data[pos] = best;\n                    pos = left;\n                }\n\n                data[pos] = item;\n            }\n        };\n\n        if (polygon.length === 3) {\n            return getCentroidOfPolygon(polygon);\n        }\n\n        var precision = 0.01;\n        polygon = [polygon];\n\n        // find the bounding box of the outer ring\n        var minX, minY, maxX, maxY;\n        for (var i = 0; i < polygon[0].length; i++) {\n            var p = polygon[0][i];\n            if (!i || p.x < minX) minX = p.x;\n            if (!i || p.y < minY) minY = p.y;\n            if (!i || p.x > maxX) maxX = p.x;\n            if (!i || p.y > maxY) maxY = p.y;\n        }\n\n        var width = maxX - minX;\n        var height = maxY - minY;\n        var cellSize = Math.min(width, height);\n        var h = cellSize / 2;\n\n        // a priority queue of cells in order of their \"potential\" (max distance to polygon)\n        var cellQueue = new TinyQueue(null, compareMax);\n\n        if (cellSize === 0) return [minX, minY];\n\n        // cover polygon with initial cells\n        for (var x = minX; x < maxX; x += cellSize) {\n            for (var y = minY; y < maxY; y += cellSize) {\n                cellQueue.push(new Cell(x + h, y + h, h, polygon));\n            }\n        }\n\n        // take centroid as the first best guess\n        var bestCell = getCentroidCell(polygon);\n\n        // special case for rectangular polygons\n        var bboxCell = new Cell(minX + width / 2, minY + height / 2, 0, polygon);\n        if (bboxCell.d > bestCell.d) bestCell = bboxCell;\n\n        while (cellQueue.length) {\n            // pick the most promising cell from the queue\n            var cell = cellQueue.pop();\n\n            // update the best cell if we found a better one\n            if (cell.d > bestCell.d) {\n                bestCell = cell;\n            }\n\n            // do not drill down further if there's no chance of a better solution\n            if (cell.max - bestCell.d <= precision) continue;\n\n            // split the cell into four cells\n            h = cell.h / 2;\n            cellQueue.push(new Cell(cell.x - h, cell.y - h, h, polygon));\n            cellQueue.push(new Cell(cell.x + h, cell.y - h, h, polygon));\n            cellQueue.push(new Cell(cell.x - h, cell.y + h, h, polygon));\n            cellQueue.push(new Cell(cell.x + h, cell.y + h, h, polygon));\n        }\n\n        return {x:bestCell.x, y:bestCell.y};\n    };\n","import { Indicator } from './Indicator'\nimport { getPolygonVisualCenter } from \"./PolygonCentroid\";\n\n    var av = Autodesk.Viewing;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n\n    // /** @constructor */\n    export function MeasureToolIndicator( viewer, measurement, measureTool )\n    {\n        Indicator.call(this, viewer, measurement, measureTool);\n        this.measureTool = measureTool;\n        this.endpoints = [];\n        this.lines = { \n            xyz: {axis: false, material: createLineMaterial('005BCE'), className: 'adsk-icon-axis-delta' + '-xyz measure-label-axis-delta' + ' measure-label-axis-xyz'},\n            x:   {axis: true,  material: createLineMaterial('F12C2C'), className: 'adsk-icon-axis-delta' + '-x measure-label-axis-delta' + ' measure-label-axis-x', iconText: 'X'},\n            y:   {axis: true,  material: createLineMaterial('0BB80B'), className: 'adsk-icon-axis-delta' + '-y measure-label-axis-delta' + ' measure-label-axis-y', iconText: 'Y'},\n            z:   {axis: true,  material: createLineMaterial('2C2CF1'), className: 'adsk-icon-axis-delta' + '-z measure-label-axis-delta' + ' measure-label-axis-z', iconText: 'Z'}\n        };\n        this.segments = [];\n        this.dashedLine = {};\n        this.simple = false;\n        this.angleLabel = {};\n        this.areaLabel = {};\n        this.labels = [];\n        this.isLeaflet = false;\n        this.topologyStatus = TOPOLOGY_NOT_AVAILABLE;\n        this.tmpVector = new THREE.Vector3();\n        this.surfaceColor = new THREE.MeshBasicMaterial({\n            color: parseInt('005BCE', 16),\n            opacity: 0.15,\n            transparent: true,\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide\n        });   \n    }\n\n    MeasureToolIndicator.prototype = Object.create(Indicator.prototype);\n    MeasureToolIndicator.prototype.constructor = MeasureToolIndicator;\n    var proto = MeasureToolIndicator.prototype;\n\n    function createLineMaterial(color) {\n        return new THREE.MeshBasicMaterial({\n            color: parseInt(color, 16),\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide\n        });   \n    }\n\n    var _labelsSpace = 4;\n    var _angleLabelOffset = 5;\n    var TOPOLOGY_NOT_AVAILABLE = 0;\n    var TOPOLOGY_FETCHING = 1; \n    var TOPOLOGY_AVAILABLE = 2;\n    var _selectorAreaSize = 15;\n\n    var _tipHeight = 2;\n    var _tipWidth = 3;\n    var _segmentWidth = 4;\n    var _dashedSegmentWidth = 3;\n    var _axisLineWidth = 2;\n    var _dashSize = 2;\n    var _gapSize = 1;\n\n    var _angleArcWidth = 2;\n\n    function isVisible(label) {\n        return label.classList.contains('visible');\n    }\n\n    proto.init = function() {\n        this.isLeaflet = this.viewer.model.getData().isLeaflet;\n        // Create HTML Labels\n        var currLabel;\n\n        this.onSelectionAreaClickedBinded = this.onSelectionAreaClicked.bind(this);\n\n        // Line\n        if (!this.lines.xyz.label) {\n            currLabel = this.lines.xyz.label = this.createMeasurementLabel(); // Measurement result\n            currLabel.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            currLabel.addEventListener('click', this.onSelectionAreaClickedBinded);\n            this.viewer.container.appendChild(currLabel);\n        }\n        switch (this.topologyStatus) {\n            case TOPOLOGY_FETCHING:\n                this.setFetchingTopology();\n                break;\n            case TOPOLOGY_AVAILABLE:\n                this.setTopologyAvailable();\n                break;\n            case TOPOLOGY_NOT_AVAILABLE:\n                this.setNoTopology();\n                break;\n        }\n\n        this.showMeasureResult = false;\n\n        this.onCameraChangeBinded = this.onCameraChange.bind(this);\n        this.viewer.addEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n\n        this.handleButtonUpBinded = this.measureTool.handleButtonUp.bind(this.measureTool);\n        window.addEventListener('mouseup', this.handleButtonUpBinded);\n    };\n\n    proto.createEndpoint = function(index) {\n        this.endpoints[index] = {};\n        var currLabel = this.endpoints[index].label = this.createSnapResultLabel(index);\n        this.viewer.container.appendChild(currLabel);    \n    };\n\n    proto.updateLabelsPosition = function() {\n\n        var point,\n            xy,\n            label,\n            key;\n\n\n        for (key in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(key)) {\n                    label = this.endpoints[key].label;\n                    point = this.endpoints[key].position;\n\n                if (label && point && isVisible(label)) {\n                    xy = MeasureCommon.project(point, this.viewer);\n\n                    xy.x = xy.x - label.getBoundingClientRect().width / 2;\n                    xy.y = xy.y - label.getBoundingClientRect().height / 2;\n                    \n                    label.style.top  = xy.y + 'px';\n                    label.style.left = xy.x + 'px';\n                    label.point = point;\n                    this.labels.push(label);\n                }\n            }\n        }\n\n        for (var name in this.lines) {\n            if (this.lines.hasOwnProperty(name)) {\n                var item = this.lines[name];\n                    label = item.label;\n\n                if (label && item.p1 && item.p2 && isVisible(label)) {\n                    \n                    item.line.visible = item.visible;\n\n                    point = { x: (item.p1.x + item.p2.x)/2, y: (item.p1.y + item.p2.y)/2, z: (item.p1.z + item.p2.z)/2 };\n                    \n                    xy = MeasureCommon.project(point, this.viewer);\n                    label.style.top  = xy.y - Math.floor(label.clientHeight / 2) + 'px';\n                    label.style.left = xy.x - Math.floor(label.clientWidth / 2) + 'px';\n\n                    if (this.viewer.model && this.viewer.model.is2d()) {\n                        var offset = item === this.lines.xyz ? 0 : label.clientHeight;\n\n                        var p1Projected = MeasureCommon.project(item.p1, this.viewer);\n                        var p2Projected = MeasureCommon.project(item.p2, this.viewer);\n\n                        if (label.clientWidth >= p1Projected.distanceTo(p2Projected) - this.endpoints[1].label.clientWidth) {\n                            if (item === this.lines.xyz) {\n                                offset = label.clientHeight;\n                            } else {\n                                // Hide all axis labels and quit the loop\n                            \n                                this.lines.x.line.visible = false;\n                                this.lines.y.line.visible = false;\n\n                                this.viewer.impl.invalidate(false, false, /*overlayDirty=*/true);\n\n                                for (name in this.lines) {\n                                    if (this.lines.hasOwnProperty(name)) {\n                                        if (this.lines[name] !== this.lines.xyz) {\n                                            var currLabel = this.lines[name].label;\n                                            if (currLabel) {\n                                                currLabel.style.opacity = 0;\n                                            }\n                                        }\n                                    }\n                                }\n\n                                break;\n                                \n                            }\n                        }\n\n                        if (item !== this.lines.xyz) {\n                            var xyzDirection = new THREE.Vector3();\n                            var itemDirection = new THREE.Vector3();\n                            xyzDirection.subVectors(this.lines.xyz.p1, this.lines.xyz.p2).normalize();\n                            itemDirection.subVectors(item.p1, item.p2).normalize();\n                            var normal = xyzDirection.cross(this.viewer.navigation.getEyeVector()).normalize();\n                            var angle = normal.dot(itemDirection);\n                            \n                            if (angle < 0) {\n                                offset = -offset;\n                            }\n                        }\n\n                        this.alignLabelWithLine(label, item.p1, item.p2, offset, this.viewer);\n                    }\n\n                    label.style.opacity = 1;\n                    label.point = point;\n                    this.labels.push(label);\n                }\n            }\n        }\n\n        if (this.angleLabel) {\n\n            label = this.angleLabel.label;\n\n            if (label && this.angleLabel.p1 && this.angleLabel.p2 && isVisible(label)) {\n                point = { x: (this.angleLabel.p1.x + this.angleLabel.p2.x)/2, y: (this.angleLabel.p1.y + this.angleLabel.p2.y)/2, z: (this.angleLabel.p1.z + this.angleLabel.p2.z)/2 };\n                xy = MeasureCommon.project(point, this.viewer, _angleLabelOffset);\n                label.style.top = xy.y - Math.floor(label.clientHeight / 2) + 'px';\n                label.style.left = xy.x - Math.floor(label.clientWidth / 2) + 'px';\n                label.point = point;\n                this.labels.push(label);\n            }\n        }\n\n        if (this.areaLabel) {\n\n            label = this.areaLabel.label;\n\n            if (label && this.areaLabel.p1 && this.areaLabel.p2 && isVisible(label)) {\n                point = { x: (this.areaLabel.p1.x + this.areaLabel.p2.x)/2, y: (this.areaLabel.p1.y + this.areaLabel.p2.y)/2, z: (this.areaLabel.p1.z + this.areaLabel.p2.z)/2 };\n                xy = MeasureCommon.project(point, this.viewer);\n                label.style.top  = xy.y - Math.floor(label.clientHeight / 2) + 'px';\n                label.style.left = xy.x - Math.floor(label.clientWidth / 2) + 'px';\n                label.point = point;\n                this.labels.push(label);\n            }\n        }\n\n        if (this.viewer.model && !this.viewer.model.is2d()) {\n    \n            var needToStackLabels = false;\n            this.labelsStacked = false;\n            var currentLabel, i;\n\n            // Backup lable's positions in case of the need of stacking them later\n            var backupPositions = [];\n            for (i = 0; i < this.labels.length; i++) {\n                backupPositions.push({left: this.labels[i].style.left, top:this.labels[i].style.top});\n            }\n\n            // Detect and move in case of overlapping.\n            for (i = 0; i < this.labels.length && !needToStackLabels; i++) {\n                currentLabel = this.labels[i];\n                needToStackLabels = this.labelsOverlapDetection(currentLabel, this.labels);\n            }\n\n            // If we found out that the labels need to be stacked, restore their positions from the backup first, and then start again.\n            if (needToStackLabels) {\n\n                for (i = 0; i < this.labels.length; i++) {\n                    this.labels[i].style.left = backupPositions[i].left;\n                    this.labels[i].style.top = backupPositions[i].top;\n                }\n\n                this.stackLabels(this.labels);\n\n                for (i = 0; i < this.labels.length; i++) {\n                    currentLabel = this.labels[i];\n                    this.labelsOverlapDetection(currentLabel, this.labels);\n                }\n            } \n        }\n\n        this.labels = [];\n        \n    };\n\n    function isLeftIntersect(current, other) {\n        return current.right >= other.left && current.right <= other.right;\n    }\n\n    function isRightIntersect(current, other) {\n        return current.left >= other.left && current.left <= other.right;\n    }\n\n    function isMiddleIntersect(current, other) {\n        return current.left <= other.left && current.right >= other.right;\n    }\n\n    function isVerticalIntersect(current, other) {\n        return current.top < other.bottom && current.bottom > other.top;\n    }\n\n    function moveLeft(currentLabel, currentRect, otherRect) {\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) - (currentRect.right - otherRect.left) + 'px';\n    }\n\n    function moveRight(currentLabel, currentRect, otherRect) {\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) + (otherRect.right - currentRect.left) + 'px';\n    }\n\n    function moveDown(currentLabel, currentRect, otherRect) {\n        currentLabel.style.top = parseInt(currentLabel.style.top, 10) + (otherRect.bottom - currentRect.top) + 'px';\n    }\n\n\n    proto.labelsOverlapDetection = function(staticLabel, labelsList) {\n\n        var needToStackLabels = false;\n\n        for (var i = 0; i < labelsList.length ; i++) {\n\n            var dynamicLabel = labelsList[i];\n            var moved = false;\n\n            if (staticLabel !== dynamicLabel) {\n                var staticRect = staticLabel.getBoundingClientRect();\n                var dynamicRect = dynamicLabel.getBoundingClientRect();\n\n                if (isVerticalIntersect(dynamicRect, staticRect)) {\n\n                    if (isLeftIntersect(dynamicRect, staticRect)) {\n                        moveLeft(dynamicLabel, dynamicRect, staticRect);\n                        moved = true;\n                    }\n                    else if (isRightIntersect(dynamicRect, staticRect)) {\n                        moveRight(dynamicLabel, dynamicRect, staticRect);\n                        moved = true;\n                    }\n                    else if (isMiddleIntersect(dynamicRect, staticRect)) {\n                        moveDown(dynamicLabel, dynamicRect, staticRect);\n                        moved = true;\n                    }\n\n                    if (moved) {\n                        var newList = labelsList.slice(0);\n                        newList.splice(newList.indexOf(staticLabel), 1);\n                        this.labelsOverlapDetection(dynamicLabel, newList);    \n                        \n                        if (dynamicLabel.causeStacking && staticLabel.causeStacking) {\n                            needToStackLabels = true;\n                        }\n\n                        // We don't want that after the labels have been stacked, only one of them will move alone.\n                        if (dynamicLabel.causeStacking && this.labelsStacked) {\n                            this.stackLabels(this.labels);\n                        }\n                    }\n                }\n            }\n        }\n\n        return needToStackLabels;\n    };\n\n    proto.stackLabels = function(labels) { \n        var topLabel = this.lines.xyz.label;\n\n        for (var i = 1; i < labels.length; i++) {\n            if (labels[i].causeStacking) {\n                labels[i].style.left = topLabel.style.left;\n            \n                var rect = labels[i-1].getBoundingClientRect();\n                var space = (labels[i-1] == topLabel) ? _labelsSpace : 0;\n                var top = (labels[i] === topLabel) ? topLabel.style.top : labels[i-1].style.top;\n                labels[i].style.top = parseInt(top, 10) + rect.height + space + 'px';\n            }\n            labels[i].style.transform = '';\n        }\n\n        this.labelsStacked = true;\n    };\n\n    proto.drawXYZLine = function(item) {\n        var self = this;\n\n        var p1 = item.p1;\n        var p2 = item.p2;\n\n        if (!p1 || !p2)\n            return;\n\n        var tmpVec = new THREE.Vector3();\n        var geometry = item.geometry = new THREE.Geometry();\n        var direction = new THREE.Vector3().subVectors(p2, p1).normalize();\n        var normal = direction.clone().cross(self.viewer.navigation.getEyeVector()).normalize();\n        var point = MeasureCommon.nearestPointInPointToSegment(self.viewer.navigation.getPosition(), p1, p2);\n        var scale = self.setScale(point);\n\n        item.line = this.drawLineSegment(p1, p2, _segmentWidth, item.material);\n        item.visible = true;\n\n        this.segments.push(item);\n        \n        function drawTip(p) {\n            geometry.vertices = [];\n\n            // Edge\n            tmpVec.addVectors(p, normal.clone().multiplyScalar(_tipHeight * scale));\n            geometry.vertices[0] = tmpVec.clone();\n            tmpVec.subVectors(p, normal.clone().multiplyScalar(_tipHeight * scale));\n            geometry.vertices[1] = tmpVec.clone();\n            var line = self.drawLineAsCylinder(geometry, item.material, _tipWidth, self.overlayName);\n            self.setCylinderScale(line, p1 ,p2);\n            line.visible = true;\n            item.tips.push(line);\n        }\n\n        if (self.showMeasureResult) {\n            item.tips = [];\n\n            drawTip(p1);\n            drawTip(p2);    \n        }        \n    };\n\n    proto.redrawDashedLine = function() {\n        if (!this.dashedLine.p1 || !this.dashedLine.p2)\n            return;\n\n        this.viewer.impl.removeMultipleOverlays(this.overlayName, this.dashedLine.line);\n        \n        var p1Scale = this.setScale(this.dashedLine.p2);\n        var dashSize = _dashSize * p1Scale;\n        var gapSize = _gapSize * p1Scale;\n        this.dashedLine.line = this.drawDashedLine(this.dashedLine.p2, this.dashedLine.p1, dashSize, gapSize, this.lines.xyz.material, _dashedSegmentWidth, this.overlayName);\n\n        return this.dashedLine.line;\n    }; \n\n    proto.drawLineSegment = function(p1, p2, width, material, isDashedLine) {\n        var line;\n\n        if (isDashedLine) {\n            this.dashedLine.p1 = p1;\n            this.dashedLine.p2 = p2;\n            line = this.redrawDashedLine();\n        } else {\n            var geometry = new THREE.Geometry();\n            geometry.vertices.push(p1);\n            geometry.vertices.push(p2);\n            line = this.drawLineAsCylinder(geometry, material, width, this.overlayName);\n            this.setCylinderScale(line, p1, p2);\n        }\n\n        line.visible = true;\n\n        return line;\n    };\n\n    proto.drawSurface = function(points) {\n\n        const cg = Autodesk.Viewing.Extensions.CompGeom;\n\n        let cset = new cg.ContourSet();\n\n        cset.addContour(points);\n\n        cset.triangulate();\n\n        if (cset.triangulationFailed)\n            return false;\n\n        let bufferGeometry = cset.toPolygonMesh();\n\n        var face = new THREE.Mesh(bufferGeometry, this.surfaceColor);\n\n        this.viewer.impl.addOverlay(this.overlayName, face);\n\n        return true;\n    };\n\n    proto.drawSegmentAndPush = function(p1, p2, isDashedLine) {\n        if (!p1 || !p2) {\n            return;\n        }\n\n         var line = this.drawLineSegment(p1, p2, _segmentWidth, this.lines.xyz.material, isDashedLine);\n            \n        if (!isDashedLine) {\n            var item = { line: line, p1: p1, p2: p2 };\n            this.segments.push(item);    \n        }\n    };\n\n    proto.renderAreaMeasurement = function(picks) {\n\n        var count = this.measurement.countPicks();\n        var p1, p2;\n\n        var points = [];\n        \n        for (var i = 1; i < count; i++) {\n            p1 = MeasureCommon.getSnapResultPosition(picks[i], this.viewer);\n            p2 = MeasureCommon.getSnapResultPosition(picks[i + 1], this.viewer);\n\n            this.drawSegmentAndPush(p1, p2);\n            points.push(p1);\n        }\n\n        if (count > 2) {\n            // Draw last line\n            p1 = MeasureCommon.getSnapResultPosition(picks[1], this.viewer);\n            this.drawSegmentAndPush(p1, p2, !this.measurement.closedArea);\n            \n            if(!MeasureCommon.isEqualVectors(p1,p2,MeasureCommon.EPSILON)){\n                points.push(p2);\n            }\n            \n            if (this.measurement.area !== 0) {\n                //Draw surface will return false if it failed to triangulate the polygon (e.g. it has self-intersections)\n                if (this.drawSurface(points)) {\n                    this.showAreaLabel(getPolygonVisualCenter(points));\n                    this.updateArea();\n                }\n            }\n        }        \n    };\n\n    proto.clearAngleMeshes = function() {\n        if (this.angleArc) {\n            this.viewer.impl.removeOverlay(this.overlayName, this.angleArc);\n            this.angleArc = null;\n        }\n        if (this.angleOutline.length > 0) {\n            this.viewer.impl.removeMultipleOverlays(this.overlayName, this.angleOutline);\n            this.angleOutline.length = 0;\n        }\n    };\n\n    proto.drawAngle = function(p, ep1, ep2, n, angle, midPoint) {\n\n        var smallNum = 0.001;\n\n        if (!this.materialAngle) {\n\n            this.materialAngle = new THREE.MeshPhongMaterial({\n                    color: 0x999999,\n                    ambient: 0x999999,\n                    opacity: 0.5,\n                    transparent: true,\n                    depthTest: false,\n                    depthWrite: false,\n                    side: THREE.DoubleSide\n                }\n            );\n\n            this.materialAngleOutline = new THREE.MeshBasicMaterial({\n                color: 0xFF9900,\n                depthTest: false,\n                depthWrite: false\n            });\n\n        }\n\n        MeasureCommon.createCommonOverlay(this.viewer, this.overlayName);\n        this.clearAngleMeshes();\n\n        // draw arc of angle\n        var radius = Math.min(p.distanceTo(ep1), p.distanceTo(ep2)) / 4;\n        var segments = 100;\n        //angle = angle * Math.PI / 180;\n\n        var circleGeometry = new THREE.CircleGeometry(radius, segments, 0, angle * Math.PI / 180);\n        var arc = new THREE.Mesh(circleGeometry, this.surfaceColor);\n\n        var center = arc.geometry.vertices[0].clone();\n        arc.geometry.vertices.push(center);\n\n\n        // Translate and rotate the arc to the plane where it should lie in\n        arc.position.set(p.x, p.y, p.z);\n        var V = arc.position.clone();\n        V.add(n);\n        arc.lookAt(V);\n        arc.updateMatrixWorld();\n\n\n        // Rotate the arc in the plane to the right place\n        var vA = arc.geometry.vertices[1].clone();\n        var vB = arc.geometry.vertices[arc.geometry.vertices.length - 2].clone();\n        vA.applyMatrix4(arc.matrixWorld);\n        vB.applyMatrix4(arc.matrixWorld);\n\n        var v1 = new THREE.Vector3();\n        var v2 = new THREE.Vector3();\n        var v3 = new THREE.Vector3();\n        var v4 = new THREE.Vector3();\n        v1.subVectors(vA, p);\n        v2.subVectors(vB, p);\n        v3.subVectors(ep1, p);\n        v4.subVectors(ep2, p);\n\n        var a13 = v1.angleTo(v3);\n        var a14 = v1.angleTo(v4);\n        var a23 = v2.angleTo(v3);\n        var a24 = v2.angleTo(v4);\n\n        //console.log(a13 * 180 / Math.PI + \" \" + a14 * 180 / Math.PI + \" \" + a23 * 180 / Math.PI + \" \" + a24 * 180 / Math.PI);\n\n        var ra;\n        // The arc is in the right place\n        if (((a13 <= smallNum && a13 >= -smallNum) || (a14 <= smallNum && a14 >= -smallNum))\n            && ((a23 <= smallNum && a23 >= -smallNum) || (a24 <= smallNum && a24 >= -smallNum))) {\n\n            ra =0;\n        }\n        // The arc needs to be rotated 180 degree to the right place\n        else if (((a13 <= Math.PI + smallNum && a13 >= Math.PI - smallNum) || (a14 <= Math.PI + smallNum && a14 >= Math.PI - smallNum))\n            && ((a23 <= Math.PI + smallNum && a23 >= Math.PI - smallNum) || (a24 <= Math.PI + smallNum && a24 >= Math.PI - smallNum))) {\n\n            ra = Math.PI;\n        }\n        // The arc needs to be rotated a13 radian\n        else if ((a13 <= a23 + smallNum && a13 >= a23 - smallNum) || (a13 <= a24 + smallNum && a13 >= a24 - smallNum)) {\n\n            ra = a13;\n        }\n        // The arc needs to be rotated a14 radian\n        else {\n\n            ra = a14;\n        }\n\n        var rotWorldMatrix = new THREE.Matrix4();\n        rotWorldMatrix.makeRotationAxis(n, ra);\n        //arc.matrix.multiply(rotWorldMatrix);\n        rotWorldMatrix.multiply(arc.matrix);\n        arc.matrix = rotWorldMatrix;\n        arc.rotation.setFromRotationMatrix(arc.matrix);\n\n        // Check if rotate to the wrong direction, if so, rotate back twice of the degree\n        arc.updateMatrixWorld();\n        vA = arc.geometry.vertices[1].clone();\n        vB = arc.geometry.vertices[arc.geometry.vertices.length - 2].clone();\n        vA.applyMatrix4(arc.matrixWorld);\n        vB.applyMatrix4(arc.matrixWorld);\n\n        v1.subVectors(vA, p);\n        v2.subVectors(vB, p);\n\n        a13 = v1.angleTo(v3);\n        a14 = v1.angleTo(v4);\n        a23 = v2.angleTo(v3);\n        a24 = v2.angleTo(v4);\n\n        //console.log(a13 * 180 / Math.PI + \" \" + a14 * 180 / Math.PI + \" \" + a23 * 180 / Math.PI + \" \" + a24 * 180 / Math.PI);\n\n        if (a13 >= smallNum && a14 >= smallNum) {\n\n            rotWorldMatrix = new THREE.Matrix4();\n            rotWorldMatrix.makeRotationAxis(n, - ra * 2);\n            //arc.matrix.multiply(rotWorldMatrix);\n            rotWorldMatrix.multiply(arc.matrix);\n            arc.matrix = rotWorldMatrix;\n            arc.rotation.setFromRotationMatrix(arc.matrix);\n        }\n\n        // draw outline of the arc\n        var outlineGeometry = new THREE.CircleGeometry(radius, segments, 0, angle * Math.PI / 180);\n        outlineGeometry.vertices.splice(0, 1);\n        arc.updateMatrixWorld();\n        outlineGeometry.applyMatrix(arc.matrixWorld);\n        this.angleOutline = this.drawEdgeAsCylinder(outlineGeometry, this.lines.xyz.material, _angleArcWidth, 0, this.getNewCylinderGeometry());\n\n        this.angleArc = arc;\n        this.viewer.impl.addOverlay(this.overlayName, this.angleArc);\n        this.viewer.impl.addMultipleOverlays(this.overlayName, this.angleOutline);\n\n        // This is used for angle label's position\n        midPoint.copy(arc.geometry.vertices[Math.round(arc.geometry.vertices.length / 2) - 1]);\n        midPoint.applyMatrix4(arc.matrixWorld);\n        var dir = new THREE.Vector3();\n        dir.subVectors(midPoint, p).normalize();\n        dir.multiplyScalar(radius / 2);\n        midPoint.add(dir);\n    };\n\n    proto.renderAngleMeasurement = function(picks) {\n\n        var count = this.measurement.countPicks();\n        var p1, p2;\n\n        var points = [];\n        \n        for (var i = 1; i < count; i++) {\n            p1 = MeasureCommon.getSnapResultPosition(picks[i], this.viewer);\n            p2 = MeasureCommon.getSnapResultPosition(picks[i + 1], this.viewer);\n\n            this.drawSegmentAndPush(p1, p2);\n\n            if (p1) {\n                points.push(p1);    \n            }\n        }\n\n        if (p2) {\n            points.push(p2);\n        }\n        \n        if (points.length === 3 && this.measurement.angle) {\n            var n = new THREE.Vector3();\n            var v1 = new THREE.Vector3();\n            var v2 = new THREE.Vector3();\n            v1.subVectors(points[0], points[1]);\n            v2.subVectors(points[1], points[2]);\n            n.crossVectors(v1, v2);\n            n.normalize();\n\n            var midPoint = new THREE.Vector3();\n            this.drawAngle(points[1], points[0], points[2], n, this.measurement.angle, midPoint);\n            this.showAngleLabel(midPoint);\n            this.updateAngle();\n        }        \n    };\n\n    proto.createDistanceLabel = function(item) {\n        var label = item.label = this.createMeasurementLabel();\n        \n        setVisibilityMeasurementLabelText(label, item === this.lines.xyz);\n\n        // Override main label when displaying only an axis label (X, Y or Z)\n        if (item.axis) {\n            label.className = item.className;\n            var axisIcon = document.createElement('div');\n            axisIcon.className = 'measure-label-axis-icon ' + item.iconText;\n            axisIcon.innerText = item.iconText;\n            label.insertBefore(axisIcon, label.firstChild);\n\n            if (!av.isMobileDevice()) {\n                MeasureCommon.safeToggle(label, 'enableTransition', true);\n            }\n        }\n\n        this.viewer.container.appendChild(label);\n\n        return label;\n    };\n\n    // Draw distance measurement\n    proto.renderDistanceMeasurement = function(p1, p2)\n    {\n        var self = this;\n\n        function updateLine(item, x1, y1, z1, x2, y2, z2, showAxis) {\n            var line = item.line,\n                label = item.label,\n                p1 = new THREE.Vector3(x1, y1, z1),\n                p2 = new THREE.Vector3(x2, y2, z2);\n\n            // Swap points if needed to have consistent axis directions.\n            var tmpVec;\n            if (item === self.lines.x && p2.x > p1.x) {\n                tmpVec = p1.clone();\n                p1 = p2.clone();\n                p2 = tmpVec.clone();\n            } \n            else if (item === self.lines.y && p2.y > p1.y) {\n                tmpVec = p1.clone();\n                p1 = p2.clone();\n                p2 = tmpVec.clone();\n            } \n            else if (item === self.lines.z && p2.z > p1.z) {\n                tmpVec = p1.clone();\n                p1 = p2.clone();\n                p2 = tmpVec.clone();\n            }\n\n            item.line = null;            \n\n            if (!label) {\n                label = self.createDistanceLabel(item);\n            }\n            else {\n                self.hideLabel(label);\n            }\n            \n            if (((self.isLeaflet && item !== self.lines.z) || (p1.distanceTo(p2) >= MeasureCommon.EPSILON)) && showAxis) {\n\n                item.p1 = p1;\n                item.p2 = p2;\n\n                if (item === self.lines.xyz) {\n                    self.drawXYZLine(item);\n                    self.showLabel(label);\n                    self.updateDistance();\n                }\n                else {\n                    line = item.line = self.drawLineSegment(p1, p2, _axisLineWidth, item.material);\n                    var show = !self.simple && self.showMeasureResult;\n\n                    line.visible = show;\n                    item.visible = show;\n\n                    if (show) {\n                        self.showLabel(label);\n                    }\n                    else {\n                        self.hideLabel(label);\n                    }\n                }\n            }\n        }\n\n        // If the line aligns with one of axis, then don't show axis\n        function displayAxis(p1, p2) {\n            self.tmpVector.subVectors(p1, p2);\n            self.tmpVector.normalize();\n\n            return !MeasureCommon.isParallel(self.tmpVector, self.xAxis) && !MeasureCommon.isParallel(self.tmpVector, self.yAxis) && !MeasureCommon.isParallel(self.tmpVector, self.zAxis);\n        }\n\n        updateLine(this.lines.xyz, p1.x, p1.y, p1.z, p2.x, p2.y, p2.z, true);\n\n        var up = this.viewer.navigation.getAlignedUpVector(),\n            x = Math.abs(up.x),\n            y = Math.abs(up.y),\n            z = Math.abs(up.z);\n\n        var showAxis = displayAxis(p1, p2);\n\n        if (z > x && z > y) { // z up\n            updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\n            updateLine(this.lines.y, p2.x, p1.y, p1.z, p2.x, p2.y, p1.z, showAxis);\n            updateLine(this.lines.z, p2.x, p2.y, p1.z, p2.x, p2.y, p2.z, showAxis);\n\n        } else if (y > x && y > z) { // y up\n            updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\n            updateLine(this.lines.z, p2.x, p1.y, p1.z, p2.x, p1.y, p2.z, showAxis);\n            updateLine(this.lines.y, p2.x, p1.y, p2.z, p2.x, p2.y, p2.z, showAxis);\n\n        } else { // x up - do we ever see this?\n            updateLine(this.lines.y, p1.x, p1.y, p1.z, p1.x, p2.y, p1.z, showAxis);\n            updateLine(this.lines.z, p1.x, p2.y, p1.z, p1.x, p2.y, p2.z, showAxis);\n            updateLine(this.lines.x, p1.x, p2.y, p2.z, p2.x, p2.y, p2.z, showAxis);\n        }\n\n    };\n\n    proto.updateResults = function() {\n        this.updateDistance();\n        this.updateAngle();\n        this.updateArea();\n        \n        setTimeout(function(){\n            // This can get called after the viewer is unloaded\n            if (this.viewer.impl)\n                this.updateLabelsPosition();\n        }.bind(this), 0);\n    };\n\n    // Update distance measurement label\n    proto.updateDistance = function() {\n\n        function setWidth(label, value) {\n            if (!label) return;\n            label.style.width = value;\n        }\n\n        function getWidth(label) {\n            return label ? label.clientWidth : 0;\n        }\n\n        Object.keys(this.lines).forEach(function(name) {\n            setWidth(this.lines[name].label, '');\n        }.bind(this));\n        \n        setDeltaMeasurementLabelText(this.lines.x.label, \"~ \" + this.measureTool.getDistanceX(this.measurement));\n        setDeltaMeasurementLabelText(this.lines.y.label, \"~ \" + this.measureTool.getDistanceY(this.measurement));\n        setDeltaMeasurementLabelText(this.lines.z.label, \"~ \" + this.measureTool.getDistanceZ(this.measurement));\n        setValueMeasurementLabelText(this.lines.xyz.label, \"~ \" + this.measureTool.getDistanceXYZ(this.measurement));\n\n        if (this.viewer.model && this.viewer.model.is3d()) {\n            setTimeout(function(){\n                var maxWidth = Math.max(getWidth(this.lines.x.label), getWidth(this.lines.y.label), getWidth(this.lines.z.label), getWidth(this.lines.xyz.label));                \n                Object.keys(this.lines).forEach(function(name) {\n                    setWidth(this.lines[name].label, maxWidth + 'px');\n                }.bind(this));\n            }.bind(this), 0);\n        }\n    };\n\n    // Update angle measurement label\n    proto.updateAngle = function() {\n        setValueMeasurementLabelText(this.angleLabel.label, \"~ \" + this.measureTool.getAngle(this.measurement));\n    };\n\n    // Update area measurement label\n    proto.updateArea = function() {\n        setValueMeasurementLabelText(this.areaLabel.label, \"~ \" + this.measureTool.getArea(this.measurement));\n    };\n\n    // Set if collapse or expand the xyz delta distance\n    proto.setSimple = function(simple) {\n        if (this.simple != simple) {\n            this.simple = simple;\n\n            var isVisible = !simple;\n            this.setLineVisible(this.lines.x, isVisible);\n            this.setLineVisible(this.lines.y, isVisible);\n            this.setLineVisible(this.lines.z, isVisible);\n\n            this.updateLabelsPosition();\n\n            this.viewer.impl.invalidate(false, false, /*overlayDirty=*/true);\n        }\n    };\n\n    proto.setLineVisible = function(item, isVisible) {\n        if (item.line) {\n            item.line.visible = isVisible;\n            item.visible = isVisible;\n\n            if (item.label) {\n                if (isVisible) {\n                    this.showLabel(item.label);\n                }\n                else {\n                    this.hideLabel(item.label);\n                    item.label.style.opacity = 0;\n                }\n            }\n        }\n    };\n\n    proto.enableLabelsTouchEvents = function(enable) {\n        var value = enable ? 'all' : 'none';\n\n        if (this.lines.xyz.label) {\n            this.lines.xyz.label.style.pointerEvents = value;   \n        }\n\n        if (this.angleLabel.label) {\n            this.angleLabel.label.style.pointerEvents = value;   \n        }\n\n        if (this.areaLabel.label) {\n            this.areaLabel.label.style.pointerEvents = value;\n        }\n    };\n\n    proto.setLabelsZIndex = function(zIndex) {\n        for (var name in this.lines) {\n            if (this.lines.hasOwnProperty(name)) {\n                var item = this.lines[name];\n                if (item.label) {\n                    item.label.style.zIndex = zIndex;\n                }\n            }\n        }\n\n        if (this.angleLabel && this.angleLabel.label) {\n            this.angleLabel.label.style.zIndex = zIndex;    \n        }\n\n        if (this.areaLabel && this.areaLabel.label) {\n            this.areaLabel.label.style.zIndex = zIndex;    \n        }\n\n        for (name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                var endpoint = this.endpoints[name];\n                if (endpoint.label) {\n                    endpoint.label.style.zIndex = zIndex - 1;\n                }\n            }\n        }\n    };\n\n    proto.focusLabels = function() {\n        this.setLabelsZIndex(3);\n    };\n\n    proto.unfocusLabels = function() {\n        this.setLabelsZIndex(2);\n    };\n\n    proto.clear = function() {\n        var name;\n\n        for (name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                var endpoint = this.endpoints[name];\n                if (endpoint.label) {\n                    this.hideLabel(endpoint.label);\n                }\n            }\n        }\n\n        for (name in this.lines) {\n            if (this.lines.hasOwnProperty(name)) {\n                var item = this.lines[name];\n                if (item.line) {\n                    item.line.visible = false;\n                    item.visible = false;\n\n                    item.tips && item.tips.forEach(function(tip) {\n                        tip.visible = false;\n                    });\n                }\n                if (item.label) {\n                    this.hideLabel(item.label);\n                    item.label.style.opacity = 0;\n                    item.label.style.zIndex = 2;\n                }\n            }\n        }\n\n        if (this.angleLabel && this.angleLabel.label) {\n            this.hideLabel(this.angleLabel.label);\n        }\n\n        if (this.areaLabel && this.areaLabel.label) {\n            this.hideLabel(this.areaLabel.label);\n        }\n        \n        this.clearSelectionAreas();\n\n        this.segments = [];\n        this.dashedLine = {};\n\n        this.viewer.impl.clearOverlay(this.overlayName);\n        MeasureCommon.createCommonOverlay(this.viewer, this.overlayName);\n    };\n\n    proto.hideClick = function(pickNumber) {\n\n        Indicator.prototype.hideClick.call(this, pickNumber);\n\n        for (var name in this.lines) {\n            if (this.lines.hasOwnProperty(name)) {\n                var item = this.lines[name];\n                if (item.line) {\n                    item.line.visible = false;\n                    item.visible = false;\n\n                    item.tips && item.tips.forEach(function(tip) {\n                        tip.visible = false;\n                    });\n                }\n                if (item.label) {\n                    this.hideLabel(item.label);\n                    item.label.style.opacity = 0;\n                }\n            }\n        }\n\n        if (this.angleLabel && this.angleLabel.label) {\n            this.hideLabel(this.angleLabel.label);\n        }\n\n        if (this.areaLabel && this.areaLabel.label) {\n            this.hideLabel(this.areaLabel.label);\n        }\n\n        this.enableSelectionAreas(item.selectionArea, false);\n    };\n\n    proto.destroy = function() {\n        var name;\n\n        Indicator.prototype.destroy.call(this);\n\n        for (name in this.lines) {\n            if (this.lines.hasOwnProperty(name)) {\n                var item = this.lines[name];\n                if (item.line) {\n                    this.viewer.impl.clearOverlay(self.overlayName);\n                    item.material = item.line = item.geometry = null;\n                }\n\n                if (item.label) {\n                    if (name === 'xyz') {\n                        item.label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n                        item.label.removeEventListener('click', this.onSelectionAreaClickedBinded);    \n                    }\n\n                    item.label.parentNode.removeChild(item.label);\n                    item.label = null;\n                }\n                item.material = item.line = item.geometry = item.label = item.p1 = item.p2 = null;\n            }\n        }\n\n        this.clearAngleMeshes();\n        \n        if (this.angleLabel && this.angleLabel.label) {\n            this.angleLabel.label.parentNode.removeChild(this.angleLabel.label);\n            this.angleLabel.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            this.angleLabel.label.removeEventListener('click', this.onSelectionAreaClickedBinded);\n             this.angleLabel.label = this.angleLabel.p1 = this.angleLabel.p2 = null;\n        }\n\n        \n\n        if (this.areaLabel && this.areaLabel.label) {\n            this.areaLabel.label.parentNode.removeChild(this.areaLabel.label);\n            this.areaLabel.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            this.areaLabel.label.removeEventListener('click', this.onSelectionAreaClickedBinded);\n            this.areaLabel.label = this.areaLabel.p1 = this.areaLabel.p2 = null;\n        }\n        \n        \n\n        if (this.viewer.impl.overlayScenes[this.overlayName]){\n            this.viewer.impl.removeOverlayScene(this.overlayName);\n        }\n\n        this.viewer.removeEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n        window.removeEventListener('mouseup', this.handleButtonUpBinded);\n    };\n\n    proto.clearXYZLine = function() {\n        this.viewer.impl.removeOverlay(this.overlayName, this.lines.xyz.line);\n\n        this.lines.xyz.tips && this.lines.xyz.tips.forEach(function(tip) {\n            this.viewer.impl.removeOverlay(this.overlayName, tip);\n        }.bind(this));\n    };\n\n    // Update scale for vertex, edge, line and extension dash line\n    proto.updateScale = function() {\n        var name;\n\n        this.angleOutline.forEach(cylinderMesh => this.setCylinderScale(cylinderMesh));\n\n        for (name in this.lines) {\n            if (this.lines.hasOwnProperty(name)) {\n                var item = this.lines[name];\n                if (item.line && item !== this.lines.xyz) {\n                    this.setCylinderScale(item.line, item.p1, item.p2);\n                }\n            }\n        }\n        \n        for (name in this.segments) {\n            if (this.segments.hasOwnProperty(name)) {\n                var segment = this.segments[name];\n                if (segment.line) {\n                    this.setCylinderScale(segment.line, segment.p1, segment.p2);\n                } \n            }\n        }\n        \n        if (this.measurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE) {\n            if (this.measurement.isComplete()) {\n                this.clearXYZLine();\n                this.drawXYZLine(this.lines.xyz);\n            }\n        }\n    };\n\n    proto.setNoTopology = function(){\n        this.topologyStatus = TOPOLOGY_NOT_AVAILABLE;\n        if (this.lines.xyz.label) {\n            setVisibilityMeasurementLabelSpinner(this.lines.xyz.label, false, this.topologyStatus);\n            this.lines.xyz.label.classList.remove('fetching-topology');\n        }\n    };\n    proto.setFetchingTopology = function() {\n        this.topologyStatus = TOPOLOGY_FETCHING;\n        if (this.lines.xyz.label) {\n            setVisibilityMeasurementLabelSpinner(this.lines.xyz.label, true, this.topologyStatus);\n                this.lines.xyz.label.classList.add('fetching-topology');\n        }\n    };\n    proto.setTopologyAvailable = function() {\n        this.topologyStatus = TOPOLOGY_AVAILABLE;\n        if (this.lines.xyz.label) {\n            setVisibilityMeasurementLabelSpinner(this.lines.xyz.label, false, this.topologyStatus);\n            this.lines.xyz.label.classList.remove('fetching-topology');\n        }\n    };\n\n    proto.createMeasurementLabel = function() {\n        \n        var label = document.createElement('div');\n        label.className = 'measure-length';\n        \n        var spinner = document.createElement('div');\n        spinner.className = 'measure-fetching-topology';\n        spinner.style.display = 'none';\n        label.appendChild(spinner);\n\n        var text = document.createElement('div');\n        text.className = 'measure-length-text';\n        label.appendChild(text);    \n\n        var delta = document.createElement('div');\n        delta.className = 'measure-delta-text';\n        label.appendChild(delta);\n\n        label.causeStacking = true;\n        \n        if (!av.isMobileDevice()) {\n            MeasureCommon.safeToggle(label, 'enable-hover', true);\n        }\n\n        return label;\n    };\n\n    // Receives an object created with createMeasurementLabel()\n    function setVisibilityMeasurementLabelText(label, isVisible) {\n        var div = label.querySelector('.measure-length-text');\n        div && (div.style.display = isVisible ? '' : 'none');\n    }\n\n    // Receives an object created with createMeasurementLabel()\n    function setValueMeasurementLabelText(label, strValue) {\n        if (!label) return;\n        var div = label.querySelector('.measure-length-text');\n        div && (div.textContent = strValue);\n    }\n\n    // Receives an object created with createMeasurementLabel()\n    function setDeltaMeasurementLabelText(label, strValue) {\n        if (!label) return;\n        var div = label.querySelector('.measure-delta-text');\n        div && (div.textContent = strValue);\n    }\n\n    // Receives an object created with createMeasurementLabel()\n    function setVisibilityMeasurementLabelSpinner(label, isVisible, topologyStatus) {\n        if (!label) return;\n        var div = label.querySelector('.measure-fetching-topology');\n        div && (div.style.display = \n            (isVisible && topologyStatus === TOPOLOGY_FETCHING) ? 'inline-block' : 'none');\n    }\n\n    /**\n     * Helper function that creates the label used for (1) and (2),\n     * which are the 2 mouse clicks for the measurement.\n     */\n    proto.createSnapResultLabel = function(pointNumber) {\n        \n        var label = document.createElement('div');\n        label.className = 'measure-label';\n\n        var label_icon = document.createElement('div');\n        label_icon.className = 'measure-label-icon';\n        label.appendChild(label_icon);\n\n        if (av.isTouchDevice()) {\n            this.initLabelMobileGestures(label, pointNumber, this.measureTool);\n            var hitArea = document.createElement('div');\n            hitArea.className = 'measure-label-hit-area';\n            label.appendChild(hitArea);                      \n        } \n         \n        if (!av.isMobileDevice()) {\n            this.initMouseEvent(label, pointNumber);\n\n            label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            MeasureCommon.safeToggle(label, 'enable-hover', true);  \n        }\n        \n \n        label.causeStacking = false;\n        \n        return label;\n    };\n\n    proto.showAngleLabel = function(midPoint) {\n\n            var label = this.angleLabel.label;\n\n            if (!label) {\n                label = this.angleLabel.label = this.createMeasurementLabel();\n                this.viewer.container.appendChild(label);\n                label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n                label.addEventListener('click', this.onSelectionAreaClickedBinded);\n            }\n\n            this.updateAngle();\n            this.showLabel(label);\n\n            this.angleLabel.p1 = midPoint.clone();\n            this.angleLabel.p2 = midPoint.clone();\n\n    };\n\n    proto.showAreaLabel = function(midPoint) {\n\n            var label = this.areaLabel.label;\n\n            if (!label) {\n                label = this.areaLabel.label = this.createMeasurementLabel();\n                this.viewer.container.appendChild(label);\n                label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n                label.addEventListener('click', this.onSelectionAreaClickedBinded);\n            }\n\n            this.updateArea();\n            this.showLabel(label);\n\n            this.areaLabel.p1 = midPoint;\n            this.areaLabel.p2 = midPoint;\n\n    };\n\n    proto.onSelectionAreaClicked = function() {\n        this.measureTool.selectMeasurementById(this.measurement.id);\n    };\n\n    proto.createSelectionArea = function() {\n        var selectionArea = document.createElement('div');\n        selectionArea.id = 'measurement-selection-area-' + this.measurement.id;\n        this.viewer.container.appendChild(selectionArea);\n        selectionArea.className = 'measure-selection-area';\n        selectionArea.style.display = 'none';\n        selectionArea.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n        selectionArea.addEventListener('click', this.onSelectionAreaClickedBinded);\n        return selectionArea;\n    };\n\n    proto.updateSelectionArea = function() {\n\n        this.segments.forEach(function(item) \n        {\n            if (item.p1 && item.p2) {\n                var p1 = MeasureCommon.project(item.p1, this.viewer);\n                var p2 = MeasureCommon.project(item.p2, this.viewer);\n\n                if (!item.selectionArea) {\n                    item.selectionArea = this.createSelectionArea();\n                }\n\n                var selectionArea = item.selectionArea;\n\n                var v = new THREE.Vector2();\n\n                selectionArea.style.top = (p1.y - (_selectorAreaSize / 2)) + 'px';\n                selectionArea.style.left = p1.x  + 'px';\n                selectionArea.style.width = v.subVectors(p1, p2).length() + 'px';\n                selectionArea.style.height = _selectorAreaSize + 'px';\n\n                var angle = null;\n                var deltaX = p1.x - p2.x;\n                var deltaY = p1.y - p2.y;\n\n                angle =  Math.atan2(-deltaY , -deltaX) * 180 / Math.PI;    \n\n                selectionArea.style.transform = 'rotate('+ angle +'deg)';\n                selectionArea.style.transformOrigin = '0px ' + (_selectorAreaSize / 2) + 'px';\n            }\n        }.bind(this));\n\n        if (this.measureTool.areAllPicksSet()) {\n            this.enableSelectionAreas(true);    \n        }\n    };\n\n    proto.clearSelectionAreas = function() {\n        this.segments.forEach(function(item) \n        {  \n            if (item.selectionArea) {\n                item.selectionArea.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n                item.selectionArea.removeEventListener('click', this.onSelectionAreaClickedBinded);\n                var element = document.getElementById('measurement-selection-area-' + this.measurement.id);\n                if (element) {\n                    element.parentNode.removeChild(element);\n                }\n                item.selectionArea = null;\n            }\n        }.bind(this));\n    };\n\n    proto.enableSelectionAreas = function(enable) {\n        this.segments.forEach(function(item) \n        {   \n            if (item.selectionArea) {\n                if (enable) {\n                    item.selectionArea.style.display = 'block';\n                } \n                else {\n                    item.selectionArea.style.display = 'none';\n                }\n            }\n        }.bind(this));\n    };\n\n    proto.render = function(picks, showMeasureResult) {\n        Indicator.prototype.render.call(this, picks, showMeasureResult);\n\n        this.updateSelectionArea();\n    };\n\n    proto.onCameraChange = function() {\n        this.redrawDashedLine();\n        this.updateSelectionArea();\n        this.hideLabelsOutsideOfView();\n        this.updateLabelsPosition();\n    };\n\n    proto.handleResize = function() {\n        this.redrawDashedLine();\n        this.updateSelectionArea();\n        this.updateLabelsPosition();\n    };\n\n","import { MeasurementsManager } from './MeasurementsManager'\nimport { MeasureToolIndicator } from './MeasureToolIndicator'\n\n//\n// /** @constructor */\n//\n//\nexport function MeasureTool( viewer, options, sharedMeasureConfig, snapper )\n{\n    var _viewer  = viewer;\n    var _options = options || {};\n    var _names  = [\"measure\"];\n    var _priority = 50;\n\n    // Shared State with CalibrationTool and Indicator\n    var _sharedMeasureConfig = sharedMeasureConfig;\n\n    var av = Autodesk.Viewing;\n    var avem = Autodesk.Viewing.Extensions.Measure;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n    \n    // Not shared with Indicator.js\n    var _active = false;\n    var _isDragging = false;\n    var _endpointMoved = false;\n    var _activePoint = 0;\n    var _consumeSingleClick = false;\n    var _singleClickHandled = false;\n    var _downX = null;\n    var _downY = null;\n    var _isolateMeasure = false;\n\n    var _measurementsManager = new MeasurementsManager(_viewer);\n    var _currentMeasurement = null;\n    var _onIndicatorCreatedCB = null;\n    \n    var _cursor = \"url(data:image/png;base64,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), auto\";\n\n    // Snapper\n    var _snapper = snapper;\n    \n    var _isPressing = false;\n\n    var _picksBackup = [];\n    var _cursorPosition = null;\n\n    var _closeAreaSnapRange = 25;\n    var _preMeasureIsolatedNodes = [];\n    var _preMeasureHiddenNodes = [];\n\n    var _measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE;\n\n    function getActivePick()\n    {   \n        if(!_currentMeasurement)\n            return null;\n\n        var index;\n\n        if (_activePoint === 0) {\n            return null;\n        } else if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\n            index = _currentMeasurement.countPicks();\n        } else {\n               index = _activePoint;\n        }\n\n        return _currentMeasurement.getPick(index);\n    }\n\n    function getPreviousPick()\n    {\n        if(!_currentMeasurement)\n            return null;\n\n        var index;\n\n        if (_activePoint === 0) {\n            return null;\n        } else if (_activePoint === 1) {\n            index = _currentMeasurement.countPicks();\n        } else if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\n            index = _currentMeasurement.countPicks() - 1;\n        } else {\n            index = _activePoint - 1;\n        }\n        \n        return _currentMeasurement.getPick(index);\n    }\n\n    function hasPreviousPick()\n    {\n        if(!_currentMeasurement)\n            return false;\n\n        var index;\n\n        if (_activePoint === 0) {\n            return false;\n        } else if (_activePoint === 1) {\n            index = _currentMeasurement.countPicks();\n        } else if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\n            index = _currentMeasurement.countPicks() - 1;\n        } else {\n            index = _activePoint - 1;\n        }\n        \n        return _currentMeasurement.hasPick(index);\n    }\n\n    function noPicksSet() {\n        _activePoint = 0;\n    }\n\n    function allPicksSet() {\n        _activePoint = _currentMeasurement.countPicks() + 1;\n        enableMeasurementsTouchEvents(true);\n        _currentMeasurement.indicator.enableSelectionAreas(true);\n    }\n\n    function isNoPicksSet() {\n        return _activePoint === 0 || !_currentMeasurement;\n    }\n\n    this.areAllPicksSet = function() {\n        return _currentMeasurement && (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1);\n    };\n\n    this.register = function()\n    {\n\n    };\n\n    this.deregister = function()\n    {\n        this.deactivate();\n    };\n\n    this.isActive = function()\n    {\n        return _active;\n    };\n\n    this.getNames = function()\n    {\n        return _names;\n    };\n\n    this.getName = function()\n    {\n        return _names[0];\n    };\n\n    this.getPriority = function()\n    {\n        return _priority;\n    };\n\n    this.getCursor = function() {\n        return _isDragging ? null : _cursor;\n    };\n\n    this.getCurrentMeasurementRaw = function() {\n        return _currentMeasurement;\n    };\n\n    this.getActivePointIndex = function() {\n        return _activePoint;\n    };\n\n\n    this.startNewMeasurement = function() {\n\n        _currentMeasurement = _measurementsManager.createMeasurement(_measurementType);\n        _currentMeasurement.attachIndicator(_viewer, this, MeasureToolIndicator);\n\n        if (_onIndicatorCreatedCB instanceof Function) {\n            _onIndicatorCreatedCB();\n            _onIndicatorCreatedCB = null;\n        }\n\n        enableMeasurementsTouchEvents(false);\n    };\n\n    this.changeMeasurementType = function(type) {\n        _measurementType = type;\n    };\n\n    this.activate = function()\n    {\n        _active = true;\n        _measurementsManager.init();\n\n        noPicksSet();\n        _isDragging = false;\n        this.isEditingEndpoint = false;\n        this.editByDrag = false;\n\n        _viewer.impl.pauseHighlight(true);\n        _preMeasureIsolatedNodes = _viewer.getIsolatedNodes();\n        _preMeasureHiddenNodes = _viewer.getHiddenNodes();\n\n        _viewer.clearSelection();\n        _viewer.toolController.activateTool(\"snapper\");\n        _viewer.toolController.activateTool(\"magnifyingGlass\");\n \n       this.onMeasurementChangedBinded = this.onMeasurementChanged.bind(this);\n       _viewer.addEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChangedBinded);\n       _viewer.addEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChange);\n       _viewer.addEventListener(av.ISOLATE_EVENT, this.onIsolate);\n    };\n\n    this.deactivate = function()\n    {\n        if (!_active)\n            return;\n\n        _active = false;\n\n        while (Object.keys(_measurementsManager.measurementsList).length > 0) {\n            _currentMeasurement = _measurementsManager.measurementsList[Object.keys(_measurementsManager.measurementsList)[0]];\n            _measurementsManager.changeCurrentMeasurement(_currentMeasurement);\n            this.clearCurrentMeasurement();\n            _currentMeasurement = null;\n        }\n\n        if(_snapper && _snapper.isActive()) {\n            _viewer.toolController.deactivateTool(\"snapper\");\n        }\n\n        _viewer.toolController.deactivateTool(\"magnifyingGlass\");\n\n        _viewer.impl.pauseHighlight(false);\n        _preMeasureIsolatedNodes = [];\n        _preMeasureHiddenNodes = [];\n\n        _measurementsManager.destroy();\n        _viewer.removeEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChange);\n        _viewer.removeEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChangedBinded);\n        _viewer.removeEventListener(av.ISOLATE_EVENT, this.onIsolate);\n    };\n\n    this.update = function()\n    {\n        return false;\n    };\n\n    this.getUnits = function() {\n        return _sharedMeasureConfig.units;\n    };\n\n    this.setUnits = function( units )\n    {\n        if (_sharedMeasureConfig.units !== units ) {\n            _sharedMeasureConfig.units = units;\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.DISPLAY_UNITS_CHANGED, units: units});\n\n            for (var key in _measurementsManager.measurementsList) {\n                if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                    // Update UI\n                    var measurement = _measurementsManager.measurementsList[key];\n                    if (measurement.indicator) {\n                        measurement.indicator.updateResults();\n                    }\n                }\n            }\n        }\n    };\n\n    this.getPrecision = function() {\n        return _sharedMeasureConfig.precision;\n    };\n\n    this.setPrecision = function( precision ) {\n\n        if (_sharedMeasureConfig.precision !== precision ) {\n            _sharedMeasureConfig.precision = precision;\n\n            for (var key in _measurementsManager.measurementsList) {\n                if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                    // Update UI\n                    var measurement = _measurementsManager.measurementsList[key];\n                    if (measurement.indicator) {\n                        measurement.indicator.updateResults();\n                    }\n                }\n            }\n        }\n    };\n\n    this.getDistanceXYZ = function(measurement) {\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        return this.getDistanceAux(measurement.distanceXYZ);\n    };\n    this.getDistanceX = function(measurement) {\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        return this.getDistanceAux(measurement.distanceX);\n    };\n    this.getDistanceY = function(measurement) {\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        return this.getDistanceAux(measurement.distanceY);\n    };\n    this.getDistanceZ = function(measurement) {\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        return this.getDistanceAux(measurement.distanceZ);\n    };\n\n    /**\n     * @private\n     */\n    this.getDistanceAux = function (measurementDistance) {\n\n        if (_viewer.model) {\n            var d = Autodesk.Viewing.Private.convertUnits(_viewer.model.getUnitString(), _sharedMeasureConfig.units, _sharedMeasureConfig.calibrationFactor, measurementDistance || 0);\n            return Autodesk.Viewing.Private.formatValueWithUnits(d, _sharedMeasureConfig.units, 3, _sharedMeasureConfig.precision);\n        }\n    };\n\n    this.getAngle = function(measurement) {\n\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        var angle = measurement.angle;\n        return Autodesk.Viewing.Private.formatValueWithUnits(angle, String.fromCharCode(0xb0), 3, _sharedMeasureConfig.precision);\n    };\n\n    this.getArea = function(measurement) { \n\n        if (_viewer.model) {\n\n            if (!measurement) {\n                measurement = _currentMeasurement;\n            }\n\n            var area = Autodesk.Viewing.Private.convertUnits(viewer.model.getUnitString(), _sharedMeasureConfig.units, _sharedMeasureConfig.calibrationFactor, measurement.area, 'square');\n\n            if (_sharedMeasureConfig.units) {\n                return Autodesk.Viewing.Private.formatValueWithUnits(area, _sharedMeasureConfig.units+'^2', 3, _sharedMeasureConfig.precision);\n            }\n            else {\n                return Autodesk.Viewing.Private.formatValueWithUnits(area, null, 3, _sharedMeasureConfig.precision);\n            }\n        }\n    };\n\n    function snapToFirstPick(currentPick, forceSnap) {\n        if (_currentMeasurement.hasPick(1) && _activePoint > 3 && !_currentMeasurement.closedArea) {\n            var firstPick = _currentMeasurement.getPick(1);\n            var firstPickPoint = MeasureCommon.getSnapResultPosition(firstPick, _viewer);\n            var firstPickPosition = MeasureCommon.project(firstPickPoint, viewer);\n            var currentPickPoint = MeasureCommon.getSnapResultPosition(currentPick, _viewer);\n            var currentPickPosition = MeasureCommon.project(currentPickPoint, viewer);\n            \n            if (forceSnap || currentPickPosition.distanceTo(firstPickPosition) < _closeAreaSnapRange) {\n                _snapper.onMouseMove(firstPickPosition);\n                firstPick.copyTo(currentPick);\n            }\n        }\n    }\n\n    function render(showResult) {\n\n        var hasResult = _currentMeasurement.computeResult(_currentMeasurement.picks, _viewer, _snapper);\n\n        _currentMeasurement.indicator.render(_currentMeasurement.picks, _consumeSingleClick || !!showResult);\n\n        return hasResult;\n    }\n\n    /**\n     * TODO: We need to flesh out the return value here.\n     *\n     * @param unitType\n     * @param precision\n     * @returns {Object}\n     */\n    this.getMeasurement = function(unitType, precision) {\n\n        _sharedMeasureConfig.units = unitType || _sharedMeasureConfig.units;\n        _sharedMeasureConfig.precision = precision || _sharedMeasureConfig.precision;\n\n        var geomTypes = ['Vertex', 'Edge', 'Face', 'Circular Arc', 'Curved Edge', 'Curved Face'];\n\n        var measurement = {\n            from: geomTypes[_currentMeasurement.getGeometry(1).type],\n            to: geomTypes[_currentMeasurement.getGeometry(2).type],\n            distance: this.getDistanceXYZ(),\n            deltaX: this.getDistanceX(),\n            deltaY: this.getDistanceY(),\n            deltaZ: this.getDistanceZ(),\n            angle: this.getAngle(),\n            unitType: _sharedMeasureConfig.units,\n            precision: _sharedMeasureConfig.precision\n        };\n\n        return measurement;\n    };\n\n    this.clearCurrentMeasurement = function() {\n        if (_currentMeasurement) {\n            noPicksSet();\n\n            for (var key in _currentMeasurement.picks) {\n                if (_currentMeasurement.picks.hasOwnProperty(key)) {\n                    this.clearPick(key);    \n                }\n            }\n            \n            this.updateViewportId(true);\n\n            if (_isolateMeasure) {\n                this.clearIsolate();    \n            }\n\n            _currentMeasurement.indicator.clear();\n            _currentMeasurement.indicator.destroy();\n            _currentMeasurement = _measurementsManager.removeCurrentMeasurement();\n            _currentMeasurement = null;\n        }\n\n        enableMeasurementsTouchEvents(true);\n    };\n\n    this.clearPick = function(pickNumber) {\n        if (_currentMeasurement && _currentMeasurement.hasPick(pickNumber)) {\n            _currentMeasurement.clearPick(pickNumber);\n            _currentMeasurement.indicator.hideClick(pickNumber);\n        }\n    };\n\n    this.setIsolateMeasure = function(enable) {\n        _isolateMeasure = enable;\n    };\n\n    this.isolateMeasurement = function () {\n        if (_currentMeasurement) {\n            var isolationGroup = [];\n        \n            for (var key in _currentMeasurement.picks) {\n                if (_currentMeasurement.picks.hasOwnProperty(key)) {\n                    isolationGroup.push(_currentMeasurement.getPick(key).snapNode);\n                }\n            }\n            _viewer.removeEventListener(av.ISOLATE_EVENT, this.onIsolate);\n            _viewer.isolate(isolationGroup);\n            _viewer.addEventListener(av.ISOLATE_EVENT, this.onIsolate);\n        }\n    };\n\n    this.clearIsolate = function() {\n        _viewer.removeEventListener(av.ISOLATE_EVENT, this.onIsolate);\n        _viewer.showAll();\n        _viewer.isolate(_preMeasureIsolatedNodes);\n        _viewer.hide(_preMeasureHiddenNodes);\n        _viewer.addEventListener(av.ISOLATE_EVENT, this.onIsolate);\n\n    };\n\n    this.onIsolate = function (event) {\n        // Isolation group is empty. Should enter only when 'Show all objects' is being called.\n        if (!event.nodeIdArray.length) {\n            _preMeasureIsolatedNodes = [];\n            _preMeasureHiddenNodes = [];\n        }\n    };\n\n    this.deselectAllMeasurements = function() {\n        if (_currentMeasurement && !this.areAllPicksSet()) {\n            if (this.isEditingEndpoint) {\n                this.undoEditEndpoint();\n            }\n            else {\n                this.clearCurrentMeasurement();\n            }\n        }\n\n        for (var key in _measurementsManager.measurementsList) {\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                var measurement = _measurementsManager.measurementsList[key];\n                if (measurement.indicator) {\n                    measurement.indicator.setSimple(true);        \n                    measurement.indicator.hideEndpoints();\n                    measurement.indicator.unfocusLabels();\n                }\n            }\n        }\n\n        _currentMeasurement = null;\n    };\n\n    this.onMeasurementChanged = function() {\n        \n        this.deselectAllMeasurements();\n\n        _currentMeasurement = _measurementsManager.getCurrentMeasurement();\n        \n        if (_currentMeasurement.isComplete()) {\n            _currentMeasurement.indicator.setSimple(false);        \n            allPicksSet();\n            render(true); \n            this.updateResults();\n        }\n    };\n\n    this.selectMeasurementById = function(measurementId) {\n        if (!_currentMeasurement) {\n            _currentMeasurement = _measurementsManager.selectMeasurementById(measurementId);\n        }\n\n        if (_currentMeasurement.id !== measurementId) {\n            if (!this.areAllPicksSet()) {\n                if (this.isEditingEndpoint) {\n                    this.undoEditEndpoint();\n                }\n                else {\n                    this.clearCurrentMeasurement();\n                }\n            }\n            \n            _currentMeasurement = _measurementsManager.selectMeasurementById(measurementId);\n        }\n    };\n\n    function enableMeasurementsTouchEvents(enable) {\n        for (var key in _measurementsManager.measurementsList) {\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                var measurement = _measurementsManager.measurementsList[key];\n                measurement.indicator.changeAllEndpointsEditableStyle(enable);   \n                measurement.indicator.enableSelectionAreas(enable);\n                measurement.indicator.enableLabelsTouchEvents(enable);\n            }\n        }\n    }\n\n    this.editEndpoint = function(event, endpointNumber, measurementId) {\n        if (_currentMeasurement.id === measurementId && _activePoint === endpointNumber) {\n            _currentMeasurement.indicator.changeEndpointOnEditStyle(endpointNumber, false);\n            this.undoEditEndpoint();\n            return;\n        }\n\n        this.selectMeasurementById(measurementId);\n\n        _activePoint = endpointNumber;\n        this.isEditingEndpoint = true;\n\n        _currentMeasurement.indicator.changeEndpointOnEditStyle(endpointNumber, true);\n        enableMeasurementsTouchEvents(false);\n\n        for (var key in _currentMeasurement.picks) {\n            if (_currentMeasurement.picks.hasOwnProperty(key)) {\n                _picksBackup[key] = _currentMeasurement.getPick(key).clone();\n            }\n        }\n\n        this.updateViewportId();\n\n        if (_isolateMeasure) {\n            this.clearIsolate();    \n        }\n\n        if(!av.isMobileDevice()) {\n            this._handleMouseEvent(event);\n        }\n    };\n\n    function canCloseArea() {\n        return _currentMeasurement.countPicks() > 3;\n    }\n\n    this.undoEditEndpoint = function() {\n        _currentMeasurement.indicator.clear();\n\n        for (var key in _currentMeasurement.picks) {\n            if (_currentMeasurement.picks.hasOwnProperty(key)) {\n                _currentMeasurement.setPick(key, _picksBackup[key].clone());\n            }\n        }\n        \n        _currentMeasurement.indicator.changeEndpointOnEditStyle(_activePoint, false);\n        \n        this.isEditingEndpoint = false;\n        this.updateViewportId(true);\n        allPicksSet();\n        render(true);\n    };\n\n    this.updateResults = function() {\n\n        _currentMeasurement.indicator.updateResults();\n        _currentMeasurement.indicator.showEndpoints();\n        _currentMeasurement.indicator.focusLabels();\n\n        if (_isolateMeasure && _currentMeasurement.isComplete()) {\n            this.isolateMeasurement();\n        }\n    };\n\n    this.deleteCurrentMeasurement = function() {\n        this.clearCurrentMeasurement();\n        this.isEditingEndpoint = false;\n        this.editByDrag = false;\n        _isDragging = false;\n    };\n\n    this.deleteCurrentPick = function() {\n\n        var pick = getActivePick();\n        var id = pick.id;\n\n        while (_currentMeasurement.hasPick(id + 1)) {\n            _currentMeasurement.setPick(id, _currentMeasurement.getPick(id + 1));\n            id++;\n        }\n\n        delete _currentMeasurement.picks[id];\n        \n        \n        \n        var count = _currentMeasurement.countPicks();\n        \n        _activePoint--;\n        \n        if (_activePoint <= 0) {\n            _activePoint = count;\n        }\n\n        if (this.isEditingEndpoint) {\n            if (count == 2) {\n                this.deleteCurrentMeasurement();\n                return;\n            }\n\n            _currentMeasurement.indicator.changeAllEndpointsOnEditStyle(false);\n            this.isEditingEndpoint = false;\n            this.updateViewportId(true);\n            allPicksSet();\n            render();\n        } else {\n            this._handleMouseEvent();    \n        }\n    };\n\n    this.updateViewportId = function(clear) {\n        if (_viewer.model && _viewer.model.is2d()) {\n            if (clear || isNoPicksSet()) {\n                _viewer.impl.updateViewportId(0);\n                _snapper.setViewportId(null);\n            }\n            else if (!_isPressing) {\n                var viewport = getPreviousPick().viewportIndex2d || getActivePick().viewportIndex2d;\n                \n                // Pass viewport Id to LineShader to make all other geometries with different viewport transparent\n                _viewer.impl.updateViewportId(viewport);\n                if (_snapper)\n                    _snapper.setViewportId(viewport);  \n            \n            }\n        }\n    };\n\n    this.setNoTopology = function() {\n        if (_currentMeasurement && _currentMeasurement.indicator) {\n            _currentMeasurement.indicator.setNoTopology();\n        }\n        else {\n            _onIndicatorCreatedCB = function() { _currentMeasurement.indicator.setNoTopology(); };\n        }\n    };\n    this.setFetchingTopology = function() {\n        if (_currentMeasurement && _currentMeasurement.indicator) {\n            _currentMeasurement.indicator.setFetchingTopology();\n        }\n        else {\n            _onIndicatorCreatedCB = function() { _currentMeasurement.indicator.setFetchingTopology(); };\n        }\n    };\n    this.setTopologyAvailable = function() {\n        if (_currentMeasurement && _currentMeasurement.indicator) {\n            _currentMeasurement.indicator.setTopologyAvailable();\n        }\n        else {\n            _onIndicatorCreatedCB = function() { _currentMeasurement.indicator.setTopologyAvailable(); };\n        }\n    };\n\n    this.getSnapper = function() {\n        return _snapper;\n    };\n\n    this.correctPickPosition = function() {\n        \n        var active = getActivePick();\n        \n        if (active && !active.getGeometry() && _cursorPosition) {\n            active.geomType = MeasureCommon.SnapType.SNAP_VERTEX;\n            active.geomVertex = _cursorPosition;\n            active.intersectPoint = _cursorPosition;\n        }\n\n        if (hasPreviousPick()) {\n            var passive = getPreviousPick();\n            var corrected = MeasureCommon.correctPerpendicularPicks(passive, active, viewer, _snapper);\n            if (!corrected) {\n\n                // get next pick in case of closed loop measurement.\n                var id = (active.id + 1) % (_currentMeasurement.countPicks() + 1);\n                \n                if (id === 0)\n                    id = 1;\n\n                if (id !== active.id && _currentMeasurement.hasPick(id)) {\n                    var nextPick = _currentMeasurement.getPick(id);   \n                    MeasureCommon.correctPerpendicularPicks(nextPick, active, viewer, _snapper);\n                }\n            }\n            \n            if (_currentMeasurement.measurementType == MeasureCommon.MeasurementTypes.MEASUREMENT_AREA) {\n                snapToFirstPick(active);    \n            }\n        }\n    };\n\n    this._handleMouseEvent = function (event) {\n\n        var valid = false;\n\n        if (_snapper.isSnapped()) {\n            \n            // User picked a new point after two points where already set (or none) - Start a new measurement.\n            if (this.areAllPicksSet() || isNoPicksSet()) {\n                this.startNewMeasurement();\n                \n                if (_isolateMeasure) { \n                    this.clearIsolate();\n                }\n\n                _activePoint = 1;\n            }\n\n            _snapper.copyResults(getActivePick());\n\n            valid = true;\n\n        } \n        else { \n            // In order to draw rubber-band, set the cursor position, so the indicator will use it as active point.\n            if (event && _viewer.model && _viewer.model.is2d()) {\n                var viewport = _viewer.container.getBoundingClientRect();\n                var x = event.canvasX || event.clientX - viewport.left;\n                var y = event.canvasY || event.clientY - viewport.top;\n\n                if (x && y) {\n                    _cursorPosition = MeasureCommon.inverseProject({ x:x, y:y }, _viewer);\n                }\n            }\n\n            // In case a measurement is set, and the user clicks on a blank spot - don't do nothing.\n            if (_consumeSingleClick && _currentMeasurement && !this.isEditingEndpoint) {\n                if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\n                    return true;\n                }\n            }\n\n            var lastPick = getActivePick();\n            if (lastPick) {\n                lastPick.clear();\n            }\n        }\n\n        if (_currentMeasurement) {\n            this.correctPickPosition();\n            \n            if (_consumeSingleClick) {\n                this._doConsumeSingleClick();\n            }\n\n            if (!isNoPicksSet()) {\n                var renderSucceeded = render();\n                \n                // If it's the first pick, we don't expect the render of the rubberband to be succeeded.\n                // So enter here only if it's not the first pick.\n                if (_currentMeasurement.hasPick(2)) {\n                    valid &= renderSucceeded;\n                }\n            }\n        }\n\n        // If valid is false, the last pick is not revelant, and will clear it in case of a click.\n        return valid;\n    };\n\n    this._doConsumeSingleClick = function() {\n        // In case the measurement is a closed loop, eliminate the last pick.\n        if (_currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && !_currentMeasurement.closedArea) {\n            var length = _currentMeasurement.countPicks();\n            var firstPick = _currentMeasurement.getPick(1);\n            var lastPick = _currentMeasurement.getPick(length);\n\n            if (length >= 3 && _currentMeasurement.hasEqualPicks(firstPick, lastPick)) {\n                lastPick.clear();\n                delete _currentMeasurement.picks[length];\n                _currentMeasurement.closedArea = true;\n            }\n        }\n\n        this.updateResults();\n\n        var measurementComplete = _currentMeasurement.isComplete();\n        this.updateViewportId(measurementComplete);\n    };\n\n\n    this.handleButtonDown = function (event, button) {\n        if (av.isMobileDevice()) \n            return false;\n\n        _isDragging = true;\n        if (button === 0 && !event.ctrlKey && !event.metaKey && !event.shiftKey && !event.altKey) {\n            _consumeSingleClick = true;\n            _downX = event.canvasX;\n            _downY = event.canvasY;\n        }\n        return false;\n    };\n\n    this.handleMouseMove = function (event) {\n\n        if (av.isMobileDevice())\n            return false;\n\n        if (event.canvasX !== _downX || event.canvasY !== _downY) {\n            _consumeSingleClick = false;    \n        } \n\n        _endpointMoved = this.isEditingEndpoint;\n\n        if (!isNoPicksSet() && !this.areAllPicksSet()) {\n            this.clearPick(_activePoint);\n            this._handleMouseEvent(event);\n        }\n\n        _snapper.indicator.render();\n\n        return false;\n    };\n\n    this.restoreMouseListeners = function () {\n\n        // When a press event has happend, the default behavior of firefly.js is to disable other mouse events,\n        // So they won't be triggered as well.\n        // The solution is to enable them after the end of the pressing.\n\n        _viewer.toolController.getTool(\"gestures\").controller.enableMouseButtons(true);\n    };\n\n    this.handlePressHold = function (event) {\n        _consumeSingleClick = false;\n\n        if (av.isTouchDevice()) {\n            switch( event.type )\n            {\n                case \"press\":\n                    _isPressing = true;\n\n                    if (this.areAllPicksSet() || isNoPicksSet()) {\n                        this.startNewMeasurement();\n\n                        if (_isolateMeasure) { \n                            this.clearIsolate();\n                        }\n\n                        _activePoint = 1;\n                    }\n\n                    this._handleMouseEvent(event);\n                    _snapper.indicator.render();\n\n                    return true;\n\n                case \"pressup\":\n                    _consumeSingleClick = true;\n                    this.restoreMouseListeners();\n                    _singleClickHandled = !_singleClickHandled;\n                    this.handleSingleClick(event);\n                    _isPressing = false;\n                    return true;\n            }\n        }\n        return false;\n\n    };\n\n\n\n    this.handleGesture = function( event )\n    {   \n        if (av.isTouchDevice()){\n            \n            _consumeSingleClick = false;\n        \n            if (_isPressing) {\n                \n                this.clearPick(_activePoint);\n\n                switch( event.type )\n                {\n                    case \"dragstart\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        return true;\n\n                    case \"dragmove\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        return true;\n\n                    case \"dragend\":\n                        _isPressing = false;\n                        _consumeSingleClick = true;\n\n                        if (!this.editByDrag) {\n                            _singleClickHandled = !_singleClickHandled;\n                            this.handleSingleClick(event);    \n                        }\n\n                        this.editByDrag = false;\n                        this.restoreMouseListeners();\n                        return true;\n\n                    case \"pinchstart\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        break;\n\n                    case \"pinchmove\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        break;\n\n                    case \"pinchend\":\n                        _consumeSingleClick = true;\n                        _singleClickHandled = !_singleClickHandled;\n                        this.handleSingleClick(event);\n                        this.restoreMouseListeners();\n                        return true;\n                }\n            }\n\n            if (event.type.indexOf('pinch') !== -1) {\n                for (var key in _measurementsManager.measurementsList) {\n                    if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                        var measurement = _measurementsManager.measurementsList[key];\n                        measurement.indicator.updateScale();    \n                    }\n                }\n            }\n        }\n\n        return false;\n    };\n\n    this.handleButtonUp = function (event, button) {\n        _isDragging = false;\n        _downX = null;\n        _downY = null;\n        \n        if (_endpointMoved) {\n            _consumeSingleClick = true;\n            _singleClickHandled = !_singleClickHandled;\n            this.handleSingleClick(event);\n            _endpointMoved = false;\n        }\n\n        return false;\n    };\n\n    this.handleSingleClick = function (event, button) {\n        if (_consumeSingleClick) {\n\n            _snapper.indicator.clearOverlays();\n\n            if (_currentMeasurement) {\n                _currentMeasurement.indicator.changeEndpointOnEditStyle(_activePoint, false);    \n            }\n\n            if (this._handleMouseEvent(event)) {\n                this.updateResults();\n                _activePoint++;\n            }\n            else {\n                if (this.isEditingEndpoint) {\n                    this.undoEditEndpoint();\n                }\n                else {\n                    if (_currentMeasurement && _currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && canCloseArea()) {\n                        snapToFirstPick(getActivePick(), true);\n                        this._handleMouseEvent();\n                    } else {\n                        this.clearCurrentMeasurement();    \n                    }\n                }\n            }\n\n            if (_currentMeasurement && _currentMeasurement.isComplete()) {\n                allPicksSet();\n            }\n\n            _consumeSingleClick = false;\n            _singleClickHandled = !_singleClickHandled;\n            this.isEditingEndpoint = false;\n\n            _snapper.clearSnapped();\n        }\n        return true;\n    };\n\n    this.handleDoubleClick = function(event) {\n        return true;\n    };\n\n    this.onCameraChange = function () {\n        for (var key in _measurementsManager.measurementsList) {\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                var measurement = _measurementsManager.measurementsList[key];\n                measurement.indicator.updateScale();\n            }\n        }\n\n        _snapper.indicator.onCameraChange();\n    };\n\n    this.handleSingleTap = function (event) {\n        if (!_singleClickHandled) {\n            _consumeSingleClick = true;\n            _snapper.onMouseDown({x: event.canvasX, y:event.canvasY});\n            this.handleSingleClick(event);\n        }\n        _singleClickHandled = !_singleClickHandled;\n\n        return true;\n    };\n\n    this.handleDoubleTap = function(event) {\n        if (_currentMeasurement && _currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && _currentMeasurement.countPicks() > 2) {\n            // fake single click over the first handle, to close the area.\n            var firstPick = _currentMeasurement.getPick(1);\n            var firstPickPoint = MeasureCommon.getSnapResultPosition(firstPick, _viewer);\n            var firstPickPosition = MeasureCommon.project(firstPickPoint, viewer);\n            event.canvasX = firstPickPosition.x;\n            event.canvasY = firstPickPosition.y;\n            _consumeSingleClick = true;\n            _snapper.onMouseDown(firstPickPosition);\n            this.handleSingleClick(event);\n            _singleClickHandled = !_singleClickHandled;\n        }\n\n        return true;\n    };\n\n    this.handleResize = function() {\n        for (var key in _measurementsManager.measurementsList) {\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                var measurement = _measurementsManager.measurementsList[key];\n                if (measurement.indicator) {\n                    measurement.indicator.handleResize();\n                }\n            }\n        }\n    };\n\n    this.handleKeyDown = function(event, keyCode) {\n        switch (keyCode) {\n            case Autodesk.Viewing.KeyCode.BACKSPACE:\n            case Autodesk.Viewing.KeyCode.DELETE:\n            if (_currentMeasurement && _currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && !this.areAllPicksSet()) {\n                if (_currentMeasurement.countPicks() > 2 ) {\n                    this.deleteCurrentPick();\n                } else {\n                    this.deleteCurrentMeasurement();    \n                }\n            } else {\n                this.deleteCurrentMeasurement();\n            }\n\n            return true;\n        }\n\n        return false;\n    };\n};\n\n","import { Indicator } from './Indicator'\n\n    var av = Autodesk.Viewing;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    // /** @constructor */\n    export function CalibrationToolIndicator(viewer, measurement, calibrationTool)\n    {\n        Indicator.call(this, viewer, measurement, calibrationTool);\n        this.calibrationTool = calibrationTool;\n        this.calibrationLabel = null;\n        this.endpoints = null;\n        this.tmpVector = new THREE.Vector3();\n        this.p1 = null;\n        this.p2 = null;\n\n        this.rubberbandDefaultMaterial = new THREE.MeshBasicMaterial({\n            color: 0xe8b22c,\n            opacity: 1,\n            transparent: false,\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide\n        });\n\n        this.rubberbandSnappedMaterial = new THREE.MeshBasicMaterial({\n            color: 0x005BCE,\n            opacity: 1,\n            transparent: false,\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide\n        });\n\n        this.rubberbandTipMaterial = new THREE.MeshBasicMaterial({\n            color: 0x000000,\n            opacity: 1,\n            transparent: false,\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide\n        });\n\n    }\n\n    CalibrationToolIndicator.prototype = Object.create(Indicator.prototype);\n    CalibrationToolIndicator.prototype.constructor = CalibrationToolIndicator;\n    var proto = CalibrationToolIndicator.prototype;\n    \n    var kEndpointOffset = 15;\n    \n    var kCrossWidth = 1.5;\n    var kTipXWidth = 2;\n    var kLineWidth = 3;\n\n    var kTipXLength = 3;\n    var kCrossLength = 5;\n\n    var kDashSize = 2;\n    var kGapSize = 1;\n\n    proto.createEndpoint = function(name) {\n        this.endpoints[name] = {};\n        this.endpoints[name].position = null;\n\n        var label = this.endpoints[name].label = document.createElement('div');\n        label.className = 'calibration-endpoint';\n\n        this.viewer.container.appendChild(label);\n\n        var text = document.createElement('div');\n        text.className = 'calibration-endpoint-text';\n        text.textContent = name.toString();\n        label.appendChild(text);\n        \n        if (av.isTouchDevice()) {\n            this.initLabelMobileGestures(label, name, this.calibrationTool);\n        }\n        // Disable hover for mobile devices\n        if(!av.isMobileDevice()) {\n            MeasureCommon.safeToggle(label, 'enable-hover', true);\n\n            this.initMouseEvent(label, name);\n    \n            label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            \n        }   \n    };\n\n    proto.init = function() {\n\n        MeasureCommon.createCommonOverlay(this.viewer, this.overlayName);\n        \n        if (!this.calibrationLabel) {\n            this.calibrationLabel = document.createElement('div');\n            this.calibrationLabel.className = 'calibration-label';\n            this.hideLabel(this.calibrationLabel);\n            this.viewer.container.appendChild(this.calibrationLabel);\n            this.calibrationLabel.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n\n            var text = document.createElement('div');\n            text.className = 'calibration-label-text';\n            this.calibrationLabel.appendChild(text);\n        }\n\n        this.endpoints = [];\n\n        this.handleButtonUpBinded = this.calibrationTool.handleButtonUp.bind(this.calibrationTool);\n        window.addEventListener('mouseup', this.handleButtonUpBinded);\n\n        this.onCameraChangeBinded = this.onCameraChange.bind(this);\n        this.viewer.addEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n    };\n\n    proto.destroy = function() {\n        this.clear();\n\n        Indicator.prototype.destroy.call(this);\n\n        if (this.calibrationLabel) {\n            this.calibrationLabel.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            this.viewer.container.removeChild(this.calibrationLabel);\n            this.calibrationLabel = null;\n        }\n\n        \n        this.viewer.impl.clearOverlay(this.overlayName);\n        this.viewer.impl.removeOverlayScene(this.overlayName);\n        \n        window.removeEventListener('mouseup', this.handleButtonUpBinded);\n        this.viewer.removeEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n    };\n\n    proto.clearRubberband = function() {\n        this.viewer.impl.clearOverlay(this.overlayName);\n    };\n\n    proto.clear = function() {\n\n        this.clearRubberband();\n        \n        this.hideLabel(this.calibrationLabel);\n        \n        for (var name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                this.hideClick(name);\n                this.endpoints[name].position = null;\n            }\n        }\n    };\n\n    proto.updateLabelValue = function(text) {\n        if (!text || text === \"\") {\n            this.calibrationLabel.childNodes[0].textContent = null;\n            this.hideLabel(this.calibrationLabel);\n        }\n        else {\n            this.calibrationLabel.childNodes[0].setAttribute(\"data-i18n\", text);\n            this.calibrationLabel.childNodes[0].textContent = av.i18n.translate(text);\n            this.showLabel(this.calibrationLabel);\n            this.calibrationTool.render();\n        }\n    };\n\n    proto.changeLabelClickableMode = function(clickable) {\n        if (clickable) {\n            this.calibrationLabel.childNodes[0].style.pointerEvents='all';\n        }\n        else {\n            this.calibrationLabel.childNodes[0].style.pointerEvents='none';\n        }\n    };\n\n    proto.showAddCalibrationLabel = function() {\n        var self = this;\n        this.updateLabelValue(\"Add Calibration\");\n        this.changeLabelClickableMode(true);\n        this.calibrationTool.render();\n        \n        this.calibrationLabel.addEventListener(\"click\", function onClick() {\n            self.calibrationLabel.childNodes[0].style.pointerEvents = 'none';\n            self.calibrationTool.render();\n            self.updateLabelValue(null);\n            self.calibrationTool.showPanel();\n            self.calibrationLabel.removeEventListener(\"click\", onClick);\n        });    \n    };\n\n    proto.updateLabelsPosition = function() {\n        for (var i = 1; i <= Object.keys(this.endpoints).length; i++) {\n            if (this.endpoints[i].position) {\n                var label = this.endpoints[i].label;\n                var pos = MeasureCommon.project(this.endpoints[i].position, this.viewer, kEndpointOffset);\n                label.style.left = (pos.x - parseInt(label.clientWidth) / 2) + 'px';\n                label.style.top = (pos.y - parseInt(label.clientHeight) / 2) + 'px';\n                label.point = this.endpoints[i].position;\n\n                // Detect and move in case of overlapping.\n                this.labelsOverlapDetection(this.endpoints[i].label, this.endpoints);\n            }\n        }\n\n        this.hideLabelsOutsideOfView();\n    };\n\n    function isLeftIntersect(current, other) {\n        return current.right >= other.left && current.right <= other.right;\n    }\n\n    function isRightIntersect(current, other) {\n        return current.left >= other.left && current.left <= other.right;\n    }\n\n    function isMiddleIntersect(current, other) {\n        return current.left <= other.left && current.right >= other.right;\n    }\n\n    function isVerticalIntersect(current, other) {\n        return current.top < other.bottom && current.bottom > other.top;\n    }\n\n    function moveLeft(currentLabel, currentRect, otherRect) {\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) - (currentRect.right - otherRect.left) + 'px';\n    }\n\n    function moveRight(currentLabel, currentRect, otherRect) {\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) + (otherRect.right - currentRect.left) + 'px';\n    }\n\n    function moveDown(currentLabel, currentRect, otherRect) {\n        currentLabel.style.top = parseInt(currentLabel.style.top, 10) + (otherRect.bottom - currentRect.top) + 'px';\n    }\n\n\n    proto.labelsOverlapDetection = function(staticLabel, labelsList) {\n\n        for (var i = 1; i <= Object.keys(labelsList).length ; i++) {\n\n            var dynamicLabel = labelsList[i].label;\n\n            if (staticLabel !== dynamicLabel) {\n                var staticRect = staticLabel.getBoundingClientRect();\n                var dynamicRect = dynamicLabel.getBoundingClientRect();\n\n                if (isVerticalIntersect(dynamicRect, staticRect)) {\n\n                    if (isLeftIntersect(dynamicRect, staticRect)) {\n                        moveLeft(dynamicLabel, dynamicRect, staticRect);\n                    }\n                    else if (isRightIntersect(dynamicRect, staticRect)) {\n                        moveRight(dynamicLabel, dynamicRect, staticRect);\n                    }\n                    else if (isMiddleIntersect(dynamicRect, staticRect)) {\n                        moveDown(dynamicLabel, dynamicRect, staticRect);\n                    }\n                }\n            }\n        }\n    };\n\n    proto.renderCalibrationLabel = function() {\n\n        if (this.showMeasureResult && this.calibrationLabel && this.p1 && this.p2) {\n            \n            var point = { x: (this.p1.x + this.p2.x)/2, y: (this.p1.y + this.p2.y)/2, z: (this.p1.z + this.p2.z)/2 };\n            var mid = MeasureCommon.project(point, this.viewer);\n\n            this.labelPosition = new THREE.Vector2(mid.x, mid.y);\n\n            if (this.calibrationLabel.childNodes[0].textContent) {\n                this.showLabel(this.calibrationLabel);\n            }\n\n            this.calibrationLabel.style.top  = this.labelPosition.y - Math.floor(this.calibrationLabel.clientHeight / 2) + 'px';\n            this.calibrationLabel.style.left = this.labelPosition.x - Math.floor(this.calibrationLabel.clientWidth / 2) + 'px' ;\n            this.calibrationLabel.point = point;\n\n            if (this.viewer.model.is2d()) {\n                this.alignLabelWithLine(this.calibrationLabel, this.p1, this.p2, this.calibrationLabel.clientHeight, this.viewer);\n            }\n        }\n    };\n\n    proto.drawMeasurementLineTip = function(point, direction, normal, flip) {\n\n        var tmpVec = new THREE.Vector3();\n        var geometry = new THREE.Geometry();\n        var p1Scale = this.setScale(point);\n\n        flip = flip ? -1 : 1;\n\n        var tipMaterial = (this.snapper.isSnapped() && !this.showMeasureResult) ? this.rubberbandSnappedMaterial : this.rubberbandTipMaterial;\n\n        // black tip\n        tmpVec.addVectors(point, normal.clone().multiplyScalar(kCrossLength * p1Scale));\n        geometry.vertices[0] = tmpVec.clone();\n        tmpVec.subVectors(point, normal.clone().multiplyScalar(kCrossLength * p1Scale));\n        geometry.vertices[1] = tmpVec.clone();\n        this.drawLineAsCylinder(geometry, tipMaterial, kCrossWidth, this.overlayName);\n\n        geometry.vertices[0] = point;\n        tmpVec.subVectors(point, direction.clone().multiplyScalar(kCrossLength * p1Scale * flip));\n        geometry.vertices[1] = tmpVec.clone();\n        this.drawLineAsCylinder(geometry, tipMaterial, kCrossWidth, this.overlayName);\n\n        // yellow tip\n        tmpVec.addVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\n        geometry.vertices[0] = tmpVec.clone();\n        tmpVec.subVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\n        geometry.vertices[1] = tmpVec.clone();\n        this.drawLineAsCylinder(geometry, this.rubberbandDefaultMaterial, kTipXWidth, this.overlayName);\n\n        tmpVec.addVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\n        tmpVec.addVectors(tmpVec, direction.clone().multiplyScalar(kTipXLength * p1Scale));\n        geometry.vertices[0] = tmpVec.clone();\n        tmpVec.subVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\n        tmpVec.subVectors(tmpVec, direction.clone().multiplyScalar(kTipXLength * p1Scale));\n        geometry.vertices[1] = tmpVec.clone();\n        this.drawLineAsCylinder(geometry, this.rubberbandDefaultMaterial, kTipXWidth, this.overlayName);\n    };\n\n    proto.renderDistanceMeasurement = function(p1, p2) {\n\n        this.viewer.impl.clearOverlay(this.overlayName);\n\n        if (!p1 || !p2)\n            return;\n\n        var geometry = new THREE.Geometry();\n        var lineDirection = new THREE.Vector3().subVectors(p2, p1).normalize();\n        var lineNormal = lineDirection.clone().cross(this.viewer.navigation.getEyeVector()).normalize();\n        var p1Scale = this.setScale(p1);\n        \n        var dashSize = kDashSize * p1Scale;\n        var gapSize = kGapSize * p1Scale;\n\n        // Main line\n        \n        var lineMaterial = ((Math.abs(p1.x - p2.x) <= 0.1 || Math.abs(p1.y - p2.y) <= 0.1 \n                            || this.snapper.getSnapResult().isPerpendicular) && !this.showMeasureResult) \n                            ? this.rubberbandSnappedMaterial : this.rubberbandDefaultMaterial;\n\n        if (this.showMeasureResult) {\n            // Single solid line.\n            geometry.vertices[0] = p1;\n            geometry.vertices[1] = p2;\n            this.drawLineAsCylinder(geometry, lineMaterial, kLineWidth, this.overlayName);\n        }\n        else {\n            this.drawDashedLine(p1, p2, dashSize, gapSize, lineMaterial, kLineWidth, this.overlayName); \n        }\n        \n        this.drawMeasurementLineTip(p1, lineDirection, lineNormal, false);\n        \n        if (this.showMeasureResult) {\n            this.drawMeasurementLineTip(p2, lineDirection, lineNormal, true);\n        }\n\n        this.p1 = p1;\n        this.p2 = p2;\n\n        this.renderCalibrationLabel();\n    };\n\n    proto.onCameraChange = function() {\n        if (this.measurement.isComplete()) {\n            this.renderDistanceMeasurement(this.p1, this.p2);\n        }   \n        this.updateLabelsPosition();         \n    };\n\n","\n\n    \"use strict\";\n\n    var av = Autodesk.Viewing,\n        ave = Autodesk.Viewing.Extensions,\n        avp = Autodesk.Viewing.Private,\n        avu = Autodesk.Viewing.UI,\n        MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    // This strange code is there because we \n    // don't want DockingPanel, which is used as a base class later\n    // to be undefined during headless mode.\n    // Simply deriving from undefined will cause an exception (from babel env preset) \n    // even if the class is never instantiated\n    const DockingPanel = (avu && avu.DockingPanel) || class {};\n    // et ViewerPanelMixin to a no-op in headless mode\n    const ViewerPanelMixin = (ave && ave.ViewerPanelMixin) || function () {};\n\n    //\n    // /** @constructor */\n    //\n    //\n    export var CalibrationPanel = function(calibrationTool, viewer, id, title, options)\n    {\n        var self = this;\n\n        options = options || {};\n        options.addFooter = false;\n\n        DockingPanel.call(this, viewer.container, id, title, options);\n\n        this.viewer = viewer;\n        this.calibrationTool = calibrationTool;\n        this.parentContainer = viewer.container;\n        this.container.style.left = '0px';\n        this.container.style.top = '0px';\n        this.container.style.resize = 'none';\n\n        this.container.classList.add('calibration-panel');\n\n        this.addEventListener( this.closer, \"click\", function(e) {\n            self.setVisible(false);\n            self.calibrationTool.clearSize();\n            self.calibrationTool.showAddCalibrationLabel();\n        });\n\n        if (!options.heightAdjustment)\n            options.heightAdjustment = 40;\n        if (!options.marginTop)\n            options.marginTop = 0;\n        options.left = false;\n\n        this.createScrollContainer(options);\n\n        this.calibrationMenu = document.createElement(\"div\");\n\n        this.scrollContainer.appendChild( this.calibrationMenu );\n\n        // Table\n        this.table = document.createElement(\"table\");\n        this.table.className = \"adsk-lmv-tftable calibration-table\";\n        this.tbody = document.createElement(\"tbody\");\n        this.table.appendChild(this.tbody);\n        this.calibrationMenu.appendChild(this.table);\n\n        // Define Size Row\n        this.row = this.tbody.insertRow(0);\n        this.requestedSizeTextbox = document.createElement('input');\n        this.requestedSizeTextbox.className = 'docking-panel-textbox';\n        this.requestedSizeTextbox.type = 'text';\n        this.requestedSizeTextbox.autofocus= 'true';\n\n        this.addEventListener(this.requestedSizeTextbox, \"keyup\", function(e) {\n            var value = self.requestedSizeTextbox.value;\n            if (value !== \"\" && value.split(\".\")[0] === \"\") {\n                self.requestedSizeTextbox.value = \"0\" + value;\n            }\n            self.updateLabel();\n        });\n\n\n        this.addEventListener(this.requestedSizeTextbox, \"keypress\", function(e) {\n            var key = e.key || String.fromCharCode(e.keyCode);\n            // Handling backspace and arrows for firefox\n            if (key == \"Backspace\" || key == \"ArrowLeft\" || key == \"ArrowRight\"){\n                return;\n            }\n\n            // Escape (For IE11)\n            if (e.keyCode == av.KeyCode.ESCAPE) {\n                self.setVisible(false);\n                self.calibrationTool.clearSize();\n                self.calibrationTool.showAddCalibrationLabel();\n                return;\n            }\n\n            var requestedSize = self.requestedSizeTextbox.value;\n            var cursorIndex = self.requestedSizeTextbox.selectionStart;\n            requestedSize = [requestedSize.slice(0, cursorIndex), key, requestedSize.slice(cursorIndex)].join('');\n            \n            if (requestedSize == \".\") {\n                return;\n            }\n\n            var isSimple = self.units[self.unitList.selectedIndex].simpleInput;\n        \n            if (!isPositiveNumber(requestedSize) || (isSimple && (!isSimpleDecimal(requestedSize) || Autodesk.Viewing.Private.calculatePrecision(requestedSize) > self.calibrationTool.getMaxPrecision()))) {\n                    e.preventDefault();\n            }\n        });\n\n        var caption = \"Define Size\";\n        var cell = this.row.insertCell(0);\n        this.caption = document.createElement(\"div\");\n        this.caption.setAttribute(\"data-i18n\", caption);\n        this.caption.textContent = av.i18n.translate(caption);\n        cell.appendChild(this.caption);\n\n        cell = this.row.insertCell(1);\n        cell.appendChild(this.requestedSizeTextbox);\n\n        // Unit Type Row\n        this.units = [\n            { name: 'Feet and fractional inches', units: 'ft-and-fractional-in', matches: ['ft-and-fractional-in'], simpleInput: false },\n            { name: 'Feet and decimal inches', units: 'ft-and-decimal-in', matches: ['ft-and-decimal-in'], simpleInput: false },\n            { name: 'Meters', units: 'm', matches: ['m'], simpleInput: true },\n            { name: 'Centimeters', units: 'cm', matches: ['cm'], simpleInput: true },\n            { name: 'Millimeters', units: 'mm', matches: ['mm'], simpleInput: true }\n        ];\n\n        var unitNames = [];\n        for (var i = 0; i < this.units.length; ++i) {\n            unitNames.push(this.units[i].name);\n        }\n        this.unitList = new avp.OptionDropDown(\"Unit type\", this.tbody, unitNames, 0, null, { paddingLeft: 0, paddingRight: 15 });\n        this.addEventListener(this.unitList, \"change\", function(e) {\n            self.updateLabel();\n        });\n\n        // Set Calibration button\n        var setCalibration = document.createElement('div');\n        setCalibration.classList.add('docking-panel-primary-button');\n        setCalibration.classList.add('calibration-button');\n\n        setCalibration.setAttribute(\"data-i18n\", \"Set Calibration\");\n        setCalibration.textContent = av.i18n.translate(\"Set Calibration\");\n\n        setCalibration.addEventListener('click', function () {\n            var index = self.unitList.selectedIndex;\n            var requestedUnits = self.units[index].units;\n            self.calibrationTool.calibrate(requestedUnits, self.requestedSizeTextbox.value);\n        }, false);\n\n        this.calibrationMenu.appendChild(setCalibration);\n        \n\n    }; // end constructor\n\n    var isPositiveNumber = function (n) {\n        // The first character of the string has to be a digit.\n        return n.match(/^(\\d+)/);\n    };\n\n    var isSimpleDecimal = function (n) {\n        // Add \"0\" to the end of the string, to check if there are trailing spaces.\n        n += '0';\n        return !isNaN(parseFloat(n)) && !isNaN(+n) && parseFloat(n) >= 0;\n    };\n\n    CalibrationPanel.prototype = Object.create(DockingPanel.prototype);\n    ViewerPanelMixin.call(CalibrationPanel.prototype);\n\n\n    CalibrationPanel.prototype.uninitialize = function uninitialize() {\n        this.viewer = null;\n        DockingPanel.prototype.uninitialize.call(this);\n    };\n\n    CalibrationPanel.prototype.findUnits = function findUnits() {\n        var i,\n            j,\n            selectedUnits = this.calibrationTool.getCurrentUnits();\n        for (i = 0; i < this.units.length; ++i) {\n            var matches = this.units[i].matches;\n            if (matches) {\n                for (j = 0; j < matches.length; ++j) {\n                    if (matches[j] === selectedUnits) {\n                        return i;\n                    }\n                }\n            }\n        }\n        return 0;\n    };\n\n    CalibrationPanel.prototype.setPanelValue = function(size) {\n        this.unitList.setSelectedIndex(this.findUnits());\n        this.requestedSizeTextbox.value = size;\n    };\n\n    CalibrationPanel.prototype.updateLabel = function() {\n        var index = this.unitList.selectedIndex;\n        var requestedUnits = this.units[index].units;\n        var size = this.requestedSizeTextbox.value;\n        var parsedNumber = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(size, requestedUnits);\n        var text = Autodesk.Viewing.Private.formatValueWithUnits(parsedNumber, requestedUnits, 3, Autodesk.Viewing.Private.calculatePrecision(size));\n\n        if (size === \"\") {\n            this.calibrationTool.updateLabelValue(null);\n        } else if (!isNaN(parsedNumber)) {\n            this.calibrationTool.updateLabelValue(text);\n        }\n    };\n\n    CalibrationPanel.prototype.updatePanelPosition = function (labelPosition, p1, p2, labelOffset) {\n\n        var width = parseInt(this.container.getBoundingClientRect().width);\n        var height = parseInt(this.container.getBoundingClientRect().height);\n\n        var cornerX;\n        var cornerY;\n\n        if (!labelPosition || !p1 || !p2) {\n            cornerX = Math.floor((this.viewer.canvas.clientWidth - width) / 2);\n            cornerY = Math.floor((this.viewer.canvas.clientHeight - height) / 2);\n        }\n        else {\n            p1 = MeasureCommon.project(p1, this.viewer);\n            p2 = MeasureCommon.project(p2, this.viewer);\n            var rubberbandDirection = new THREE.Vector2().copy(p1).sub(p2).normalize();\n\n            var normal;\n            if (p1.x < p2.x) {\n                normal = new THREE.Vector2(rubberbandDirection.y, -rubberbandDirection.x);\n            } else {\n                normal = new THREE.Vector2(-rubberbandDirection.y, rubberbandDirection.x);\n            }\n\n            var offset = labelOffset + Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2)) / 2;\n\n            normal = normal.multiplyScalar(offset);\n            var pos =  labelPosition.sub(normal);\n\n            cornerX = pos.x - Math.floor(width / 2);\n            cornerY = pos.y - Math.floor(height / 2);\n\n            // if panel exceeds screen bounds, just put the panel in the center of the screen.\n            if ((cornerX < 0) || (cornerX + width > this.viewer.canvas.clientWidth) || (cornerY < 0) || (cornerY + height > this.viewer.canvas.clientHeight)) {\n                cornerX = Math.floor((this.viewer.canvas.clientWidth - width) / 2);\n                cornerY = Math.floor((this.viewer.canvas.clientHeight - height) / 2);\n            }\n        }\n\n        this.container.style.left = cornerX + 'px';\n        this.container.style.top  = cornerY + 'px';\n    };\n\n    //\n    // /** @constructor */\n    //\n    //\n    export var CalibrationRequiredDialog = function(measureExt, viewer, id, title, options)\n    {\n        var self = this;\n\n        options = options || {};\n        options.addFooter = false;\n\n        DockingPanel.call(this, viewer.container, id, title, options);\n\n        this.viewer = viewer;\n        this.measureExt = measureExt;\n        this.parentContainer = viewer.container;\n        this.container.classList.add('calibration-panel');\n        this.container.style.width = \"380px\";\n        this.container.style.height = \"190px\";\n        \n        if (!options.heightAdjustment)\n            options.heightAdjustment = 70;\n        if (!options.marginTop)\n            options.marginTop = 0;\n        options.left = false;\n\n        this.createScrollContainer(options);\n        this.dialogBox = document.createElement(\"div\");\n        this.scrollContainer.appendChild( this.dialogBox );\n\n        // text\n        var calibrateNow = document.createElement('div');\n        calibrateNow.className = 'calibration-text';\n        var text = \"Calibration Message\";\n        calibrateNow.setAttribute(\"data-i18n\", text);\n        calibrateNow.textContent = av.i18n.translate(text);\n        this.dialogBox.appendChild(calibrateNow);\n\n        var buttonsWrapper = document.createElement('div');\n        buttonsWrapper.className = 'calibration-buttons-wrapper';\n        this.dialogBox.appendChild(buttonsWrapper);\n        \n        // Cancel button\n        var cancel = document.createElement('div');\n        cancel.classList.add('docking-panel-secondary-button');\n        cancel.classList.add('calibration-button-left');\n        cancel.setAttribute(\"data-i18n\", \"Cancel\");\n        cancel.textContent = av.i18n.translate(\"Cancel\");\n        cancel.addEventListener('click', function () {\n            self.setVisible(false);\n        }, false);\n        buttonsWrapper.appendChild(cancel);\n\n        // Calibrate-Now button\n        var calibrateNowButton = document.createElement('div');\n        calibrateNowButton.classList.add('docking-panel-primary-button');\n        calibrateNowButton.classList.add('calibration-button-right');\n        calibrateNowButton.setAttribute(\"data-i18n\", \"Calibrate Now\");\n        calibrateNowButton.textContent = av.i18n.translate(\"Calibrate Now\");\n        calibrateNowButton.addEventListener('click', function () {\n            self.measureExt.enableCalibrationTool(true);\n            self.setVisible(false);\n        }, false);\n        buttonsWrapper.appendChild(calibrateNowButton);\n        \n\n    }; // end constructor\n\n    CalibrationRequiredDialog.prototype = Object.create(DockingPanel.prototype);\n    ViewerPanelMixin.call(CalibrationRequiredDialog.prototype);\n\n\n    CalibrationRequiredDialog.prototype.uninitialize = function uninitialize() {\n        this.viewer = null;\n        DockingPanel.prototype.uninitialize.call(this);\n    };\n","import { CalibrationToolIndicator } from './CalibrationToolIndicator'\nimport { CalibrationPanel } from './CalibrationPanels'\n\n//\n// /** @constructor */\n//\n//\nexport var CalibrationTool = function( viewer, options, sharedMeasureConfig, snapper)\n{   \n    var av = Autodesk.Viewing;\n    var avem = Autodesk.Viewing.Extensions.Measure;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    var _names  = [\"calibration\"];\n    var _priority = 50;\n    var _viewer  = viewer;\n    var _measurement = new MeasureCommon.Measurement(MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE);\n    var _options = options || {};\n\n    // Shared State with MeasureTool and Indicator\n    var _sharedMeasureConfig = sharedMeasureConfig;\n\n    var _maxPrecision = options.maxPrecision || 5;\n    var _isCalibrated = (sharedMeasureConfig.calibrationFactor != null); // True when the user set the calibration, or used a Previous calibration factor.\n    \n    var _snapper = snapper;\n\n    var _active = false;\n    var _isDragging = false;\n    var _isPressing = false;\n\n    var _distance = null; // The length of the current measurement.\n    var _calibrationTaken = false; // True when the user selected two valid points and set the calibration.\n    var _selectedSize = null;\n    var _selectedUnits = null;\n    var _selectedP1 = null;\n    var _selectedP2 = null;\n    var _waitingForInput = false; // True when the user selected two valid points.\n    var _picksBackup = [];\n    var _cursorPosition = null;\n\n    var _activePoint = 0;\n    \n    var _endpointMoved = false;\n\n    var _consumeSingleClick = false;\n    var _singleClickHandled = false;\n    var _downX = null;\n    var _downY = null;\n\n    // GUI.\n    var _calibrationPanel = null;\n    var _cursor = \"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAYCAYAAAD+vg1LAAAAAXNSR0IArs4c6QAAAwZJREFUSA2tVEtLW0EUvjGJefoqSY0x0WBSiY+oNWiUINkU6ioLaaAlG1eudNVFoT+grgopiCkEIbUK1o0lusmurRSEWmmKG6MNtNhNosWqyU2CZPpN8cr15nFD7YHDzHnON2fOGYZhmHkw4XEW+wD4xkT4lMvl6CE0+Y2ohh+dz+cZn89HVS/5+n/d/wVMkXq9Xor2v5SBgsmymQwZHx+vOqlKpXKDXWI3eU6Tg+kqSjSh3W4/s9lsvzUajaNcAK3xY7Dyci3nd6WXSCS60dHRvMfjSRcKBfWV4SYbrVarB8p0PB5nY7HYmdVq/aDX67WlckpKKcvpOjs7X09OTvoPDw8z2Wy2Bu+imJqa+npycnJXGHOt3YRGoSyVSvvMZrNkYWFBs7GxkaoBAXFJcDJhcCW5rq5ur62trQ/EOhyOBhDT2Nj4qVKMqA31ve1yub7Rfufo/PycDA4OxpuamhqECaouhVqtfuD3+1tqa2uZQCCQDoVCWTwknVQDDvIKE1clI1ja09Ozg0cjx8fHpL+/P+50OhMU8f7+Punt7f2I5NdqXRXi9fV1z9jYWCuIWV5eziSTyWAqlXq1urqaw6AwOMiCG4lOYtEturu732xubhK0FQHSvfr6+lsog4HWPIPvIBqNErRiqCiwkkKpVFowZd8xZSQYDLImk+kJ52+xWJ4tLS3hU8yTkZGRBD2Ms4mu6Nun4XA4f3p6SoaGhuJ0+rgg/Bsmt9udYFmWzM3NZdDT05ztWsE5JV0R1AqUCfTt0fb2tjESiRRmZmaOUOcI3w9DY5mdnb03PDzMoDQ/MZFRzM20lO/E38vl8vt46UdAq0WNJWixlEwmu8B1bXioOxwjpgXJ0hMTE1og1qysrDghf+HnKtoD7c7u7i5ZXFzMGY3GF7iFuRR3dHTMr62tXWxtbZH29vZ3RYmECozu54ODAzpdP2hphHZOVigUVjChvgMDA+85fdm1q6vrrU6n+4WR9Zd1ujQ0Nzc/NBgMScSExXwZ2j5oL5Wo46UD/ZvxUemo+AdW1zJzUYr16wAAAABJRU5ErkJggg==), auto\";\n    var _hasUI = Autodesk.Viewing.GuiViewer3D && viewer instanceof Autodesk.Viewing.GuiViewer3D;\n\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    function getActivePick()\n    {\n        switch (_activePoint) {\n            case 0:\n                return null;\n            case 1:\n            case 2:\n                return _measurement.getPick(_activePoint);\n            case 3:\n                return _measurement.getPick(_measurement.countPicks());\n        }\n    }\n\n    function getPreviousPick()\n    {\n        switch (_activePoint) {\n            case 0:\n                return null;\n            case 1:\n                return _measurement.getPick(_measurement.countPicks());\n            case 2:\n            case 3:\n                return _measurement.getPick(1);\n        }\n    }\n\n    function hasPreviousPick()\n    {\n        switch (_activePoint) {\n            case 0:\n                return false;\n            case 1:\n                return _measurement.hasPick(_measurement.countPicks());\n            case 2:\n            case 3:\n                return _measurement.hasPick(1);\n        }\n    }\n\n    function noPicksSet() {\n        _activePoint = 0;\n    }\n\n    function allPicksSet() {\n        _activePoint = 3;\n        _measurement.indicator.changeAllEndpointsEditableStyle(true);\n    }\n\n    function isNoPicksSet() {\n        return _activePoint === 0;\n    }\n\n    function areAllPicksSet() {\n        return _activePoint === 3;   \n    }\n\n    this.register = function()\n    {\n        if (_hasUI && !_calibrationPanel) {\n            _calibrationPanel = new CalibrationPanel( this, _viewer, \"calibration-panel\", \"Calibration\", _options );\n            _viewer.addPanel(_calibrationPanel);\n        }\n\n        this.onCameraChangeBinded = this.onCameraChange.bind(this);\n        this.screenSizeChangedBinded = this.screenSizeChanged.bind(this);\n    };\n\n    this.deregister = function()\n    {   \n        this.deactivate();\n        \n        if (_calibrationPanel) {\n            _viewer.removePanel( _calibrationPanel );\n            _calibrationPanel.uninitialize();\n            _calibrationPanel = null;\n        }\n    };\n\n    this.isActive = function()\n    {\n        return _active;\n    };\n\n    this.getNames = function()\n    {\n        return _names;\n    };\n\n    this.getName = function()\n    {\n        return _names[0];\n    };\n\n    this.getPriority = function()\n    {\n        return _priority;\n    };\n\n    this.getCursor = function() {\n        return _isDragging ? null : _cursor;\n    };\n\n    this.activate = function()\n    {\n        _active = true;\n        _isDragging = false;\n        this.isEditingEndpoint = false;\n        this.editByDrag = false;\n        noPicksSet();\n\n        _viewer.toolController.activateTool(_snapper.getName());\n        _viewer.toolController.activateTool(\"magnifyingGlass\");\n\n\n        if (!_measurement.indicator) {\n            _measurement.attachIndicator(_viewer, this, CalibrationToolIndicator);\n        }\n\n        _measurement.indicator.clear();\n\n        if (_calibrationTaken && _selectedP1 && _selectedP2) {\n            _measurement.setPick(1, _selectedP1.clone());\n            _measurement.setPick(2, _selectedP2.clone());\n\n            allPicksSet();\n\n            var parsedRequestedSize = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(_selectedSize, _selectedUnits);\n            _measurement.indicator.updateLabelValue(Autodesk.Viewing.Private.formatValueWithUnits(parsedRequestedSize, _selectedUnits, 3, _sharedMeasureConfig.precision));\n            _distance = _measurement.distanceXYZ;\n            _measurement.indicator.changeLabelClickableMode(false);\n            _waitingForInput = true;\n            var valid = this.render();\n            _measurement.indicator.changeAllEndpointsEditableStyle(true);\n\n            if (valid) {\n                if (_calibrationPanel) {\n                    _calibrationPanel.setPanelValue(_selectedSize);\n                }\n                \n                this.showPanel();\n            }\n        }\n\n        _viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n        _viewer.addEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT, this.screenSizeChangedBinded);\n    };\n\n    this.deactivate = function()\n    {   \n        if (!_active)\n            return;\n\n        _active = false;\n\n        this.hidePanel();\n        this.updateViewportId(true);\n        _waitingForInput = false;\n        _measurement.clearAllPicks();\n\n        if(_snapper && _snapper.isActive()) {\n            _viewer.toolController.deactivateTool(_snapper.getName());\n        }\n\n        _viewer.toolController.deactivateTool(\"magnifyingGlass\");\n\n        if (_measurement.indicator) {\n            _measurement.indicator.clear();\n            _measurement.indicator.destroy();\n            _measurement.indicator = null;\n        }\n\n        _viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n        _viewer.removeEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT, this.screenSizeChangedBinded);\n    };\n\n    this.getActivePointIndex = function() {\n        return _activePoint;\n    };\n\n    this.setCalibrationFactor = function ( calibrationFactor ) {\n        _sharedMeasureConfig.calibrationFactor = calibrationFactor;\n    };\n\n    this.getCalibrationFactor = function () {\n        return _sharedMeasureConfig.calibrationFactor;\n    };\n\n    this.updateLabelValue = function (value) {\n        _measurement.indicator.updateLabelValue(value);\n    };\n\n    this.isCalibrationValid = function(requestedUnits, requestedSize) { \n        var parsedRequestedSize = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(requestedSize, requestedUnits); \n        return !isNaN(parsedRequestedSize); \n    };\n\n    this.calibrate = function(requestedUnits, requestedSize)\n    {\n\n        var calibrationFactor = null;\n        \n        var parsedRequestedSize = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(requestedSize, requestedUnits);\n\n        if (!isNaN(parsedRequestedSize)) {\n            var currentSize = Autodesk.Viewing.Private.convertUnits(_viewer.model.getUnitString(), requestedUnits, 1, _distance);\n            if (currentSize !== 0 && !isNaN(currentSize)) {\n                calibrationFactor = parsedRequestedSize / currentSize;\n                _sharedMeasureConfig.calibrationFactor = calibrationFactor;\n                _sharedMeasureConfig.units = requestedUnits;\n                var defualtPrecision = _viewer.model.is2d() ? 3 : 1;\n                var requestedPrecision = Autodesk.Viewing.Private.calculatePrecision(requestedSize);\n                _sharedMeasureConfig.precision = Math.max((_sharedMeasureConfig.precision ? _sharedMeasureConfig.precision : defualtPrecision), requestedPrecision);\n                _selectedSize = requestedSize;\n                _selectedUnits = requestedUnits;\n                _isCalibrated = true;\n                _calibrationTaken = true;\n                _selectedP1 = _measurement.getPick(1).clone();\n                _selectedP2 = _measurement.getPick(2).clone();\n            }\n        }\n        \n        if (calibrationFactor) {\n            _viewer.getExtension('Autodesk.Measure').enableCalibrationTool(false);\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.FINISHED_CALIBRATION , units: requestedUnits , scaleFactor: calibrationFactor});\n        }\n    };\n\n    this.calibrateByScale = function(requestedUnits, requestedScale) {\n        _sharedMeasureConfig.calibrationFactor = requestedScale;\n        \n        if (_sharedMeasureConfig.units !== requestedUnits ) {\n            _sharedMeasureConfig.units = requestedUnits;\n            _selectedUnits = requestedUnits;\n        }\n\n        _isCalibrated = true;\n    };\n\n    this.getCurrentUnits = function () {\n        return _sharedMeasureConfig.units;\n    };\n\n    this.hidePanel = function() {\n        if (_calibrationPanel) {\n            _calibrationPanel.setVisible(false);\n        }\n        else {\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.CLOSE_CALIBRATION_PANEL_EVENT });\n        }\n    };\n\n    this.showPanel = function() {\n\n        var self = this;\n\n        if (_calibrationPanel) {\n            window.setTimeout(function () { _calibrationPanel.requestedSizeTextbox.focus();}, 0);\n            _calibrationPanel.setVisible(true);\n            _calibrationPanel.updatePanelPosition(_measurement.indicator.labelPosition, _measurement.indicator.p1, _measurement.indicator.p2, _measurement.indicator.calibrationLabel.clientHeight);\n            window.addEventListener(\"keyup\", function onKeyUp(e){\n                var key = e.key || String.fromCharCode(e.keyCode);\n                if (key == \"Escape\" && self.isActive()) {\n                    self.hidePanel();\n                    self.clearSize();\n                    self.showAddCalibrationLabel();\n                    \n                    window.removeEventListener(\"keyup\", onKeyUp);\n                }\n            });\n        }\n        else {\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.OPEN_CALIBRATION_PANEL_EVENT, data: {size: _selectedSize, units: _selectedUnits } });\n        }\n    };\n\n    this.showAddCalibrationLabel = function() {\n        _measurement.indicator.showAddCalibrationLabel();\n    };\n\n    this.isCalibrated = function() {\n        return _isCalibrated;\n    };\n\n    this.clearSize = function () {\n        _measurement.indicator.updateLabelValue(null);\n\n        if (_calibrationPanel) {\n            _calibrationPanel.requestedSizeTextbox.value = \"\";   \n        }\n        else {\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.CLEAR_CALIBRATION_SIZE_EVENT });\n        }\n    };\n\n    this.getMaxPrecision = function() {\n        return _maxPrecision;\n    };\n    \n    this.clearMeasurement = function() {\n\n        noPicksSet();\n\n        this.clearPick(1);\n        this.clearPick(2);\n\n        _measurement.indicator.clear();\n        \n        this.updateViewportId(true);\n        this.hidePanel();\n\n        _waitingForInput = false;\n    };\n\n    this.clearPick = function(pickNumber) {\n        if (_measurement.hasPick(pickNumber)) {\n            _measurement.clearPick(pickNumber);\n            _measurement.indicator.hideClick(pickNumber);\n        }\n    };\n\n    this.repickEndpoint = function(pickNumber) {\n        this.clearPick(pickNumber);\n        this.editEndpoint(null, pickNumber);\n    };\n\n    this.getSnapper = function() {\n        return _snapper;\n    };\n\n    this._handleMouseEvent = function (event) {\n\n        var valid = false;\n\n        if (_snapper.isSnapped()) {\n\n            // User picked a new point after two points where already set (or none) - Start a new measurement.\n            if (areAllPicksSet() || isNoPicksSet()) {\n                this.clearMeasurement();\n                _activePoint = 1;\n            }\n            \n            _snapper.copyResults(getActivePick());\n\n            valid = true;\n\n        } \n        else { \n            // In order to draw rubber-band, set the cursor position, so the indicator will use it as active point.\n            if (event && _viewer.model.is2d()) {\n                var viewport = _viewer.container.getBoundingClientRect();\n                var x = event.canvasX || event.clientX - viewport.left;\n                var y = event.canvasY || event.clientY - viewport.top;\n\n                if (x && y) {\n                    _cursorPosition = MeasureCommon.inverseProject({ x:x, y:y }, _viewer);\n                }\n            }\n\n            // In case a measurement is set, and the user clicks on a blank spot - don't do nothing.\n            if (_consumeSingleClick && _measurement && !this.isEditingEndpoint) {\n                if (_activePoint === _measurement.getMaxNumberOfPicks() + 1) {\n                    return true;\n                }\n            }\n\n            var lastPick = getActivePick();\n            if (lastPick) {\n                lastPick.clear();\n            }\n        }\n\n        this.correctPickPosition();\n\n        if (_consumeSingleClick) {\n            this._doConsumeSingleClick(valid);\n        }\n        \n        if (!isNoPicksSet()) {\n            var renderSucceeded = this.render();\n\n            // If it's the first pick, we don't expect the render of the rubberband to be succeeded.\n            // So enter here only if it's not the first pick.\n            if (_measurement.hasPick(2)) {\n                valid &= renderSucceeded;\n            }\n        }\n\n        if (_consumeSingleClick) {\n            if (_measurement.isComplete() && valid) {\n                _distance = _measurement.distanceXYZ;\n                this.clearSize();\n                this.showPanel();\n                _waitingForInput = true;\n            }\n            else {\n                this.hidePanel();\n                _measurement.indicator.updateLabelValue(null);\n                _waitingForInput = false;\n            }\n        }\n\n        // If valid is false, the last pick is not revelant, and will clear it in case of a click.\n        return valid;\n    };\n\n    this.updateViewportId = function(clear) {\n        if (_viewer.model && _viewer.model.is2d()) {\n            if (clear || isNoPicksSet()) {\n                viewer.impl.updateViewportId(0);\n                _snapper.setViewportId(null);\n            }\n            else if (!_isPressing) {\n                var viewport = getPreviousPick().viewportIndex2d || getActivePick().viewportIndex2d;\n                \n                // Pass viewport Id to LineShader to make all other geometries with different viewport transparent\n                viewer.impl.updateViewportId(viewport);\n                if (_snapper)\n                    _snapper.setViewportId(viewport);  \n            \n            }\n        }\n    };\n\n    this._doConsumeSingleClick = function(valid) {\n\n        this.updateViewportId(_measurement.isComplete());\n\n        _measurement.indicator.clear();\n    };\n\n\n    this.handleButtonDown = function (event, button) {\n        if (av.isMobileDevice()) \n            return false;\n\n        _isDragging = true;\n        if (button === 0 && !event.ctrlKey && !event.metaKey && !event.shiftKey && !event.altKey) {\n            _consumeSingleClick = true;\n            _downX = event.canvasX;\n            _downY = event.canvasY;\n        }\n        return false;\n    };\n\n    this.handleMouseMove = function (event) {\n        if (av.isMobileDevice())\n            return false;\n\n        if (event.canvasX !== _downX || event.canvasY !== _downY) {\n            _consumeSingleClick = false;    \n        }\n\n        _endpointMoved = this.isEditingEndpoint;    \n\n        if (!isNoPicksSet() && !areAllPicksSet()) {\n            this.clearPick(_activePoint);\n            this._handleMouseEvent(event);\n        }\n\n        _snapper.indicator.render();\n        \n        return false;\n    };\n\n    this.restoreMouseListeners = function () {\n\n        // When a press event has happend, the default behavior of firefly.js is to disable other mouse events,\n        // So they won't be triggered as well.\n        // The solution is to enable them after the end of the pressing.\n\n        _viewer.toolController.getTool(\"gestures\").controller.enableMouseButtons(true);\n    };\n\n    this.handlePressHold = function (event) {\n        _consumeSingleClick = false;\n\n        if (av.isTouchDevice()) {\n            switch( event.type )\n            {\n                case \"press\":\n                    _isPressing = true;\n                    if (areAllPicksSet()) {\n                        this.clearMeasurement();\n                    } else {\n                        this.clearPick(_activePoint);\n                    }\n                    this._handleMouseEvent(event);\n                    _snapper.indicator.render();\n\n                    return true;\n\n                case \"pressup\":\n                    _consumeSingleClick = true;\n                    this.restoreMouseListeners();\n                    _singleClickHandled = !_singleClickHandled;\n                    this.handleSingleClick(event);\n                    _isPressing = false;\n                    return true;\n            }\n        }\n        return false;\n\n    };\n\n    this.correctPickPosition = function() {\n        \n        var active = getActivePick();\n            \n        if (active && !active.getGeometry() && _cursorPosition) {\n            active.geomType = MeasureCommon.SnapType.SNAP_VERTEX;\n            active.geomVertex = _cursorPosition;\n            active.intersectPoint = _cursorPosition;\n        }\n\n        if (hasPreviousPick()) {\n            var passive = getPreviousPick();\n            MeasureCommon.correctPerpendicularPicks(passive, active, viewer, _snapper);\n        }\n    };\n\n    this.render = function() {\n\n        var hasResult = _measurement.computeResult(_measurement.picks, _viewer, _snapper);\n        _measurement.indicator.render(_measurement.picks, _consumeSingleClick || _waitingForInput);\n\n        return hasResult;\n    };\n\n    this.editEndpoint = function(event, endpointNumber) {\n        if (_activePoint === endpointNumber) {\n            _measurement.indicator.changeEndpointOnEditStyle(endpointNumber, false);\n            this.undoEditEndpoint();\n            return;\n        }\n\n        _activePoint = endpointNumber;\n        this.isEditingEndpoint = true;\n\n        _measurement.indicator.changeEndpointOnEditStyle(endpointNumber, true);\n        _measurement.indicator.changeAllEndpointsEditableStyle(false);\n\n        for (var key in _measurement.picks) {\n            if (_measurement.picks.hasOwnProperty(key)) {\n                _picksBackup[key] = _measurement.getPick(key).clone();\n            }\n        }\n\n        this.updateViewportId();\n\n        this.hidePanel();\n        _measurement.indicator.updateLabelValue(null);\n        _waitingForInput = false;\n\n        if(!av.isMobileDevice()) {\n            this._handleMouseEvent(event);\n        }\n    };\n\n    this.undoEditEndpoint = function() {\n        _measurement.indicator.clear();\n\n        for (var key in _measurement.picks) {\n            if (_measurement.picks.hasOwnProperty(key)) {\n                _measurement.setPick(key, _picksBackup[key].clone());\n            }\n        }\n        \n        this.updateViewportId(true);\n        this.isEditingEndpoint = false;\n        _waitingForInput = true;\n\n        allPicksSet();\n        var valid = this.render();\n        \n        if (valid) {\n            this.showPanel();\n        }\n    };\n\n    this.handleGesture = function(event)\n    {   \n        if (av.isTouchDevice()){\n            \n            _consumeSingleClick = false;\n        \n            if (_isPressing) {\n                \n                this.clearPick(_activePoint);\n\n                switch( event.type )\n                {\n                    case \"dragstart\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        return true;\n\n                    case \"dragmove\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        return true;\n\n                    case \"dragend\":\n                        _isPressing = false;\n                        _consumeSingleClick = true;\n\n                        if (!this.editByDrag) {\n                            _singleClickHandled = !_singleClickHandled;\n                            this.handleSingleClick(event);    \n                        }\n\n                        this.editByDrag = false;\n                        this.restoreMouseListeners();\n                        return true;\n\n                    case \"pinchend\":\n                        _consumeSingleClick = true;\n                        _singleClickHandled = !_singleClickHandled;\n                        this.handleSingleClick(event);\n                        this.restoreMouseListeners();\n                        return true;\n                }\n            }\n        }\n\n        return false;\n    };\n\n    this.handleButtonUp = function (event) {\n        _isDragging = false;\n        _downX = null;\n        _downY = null;\n        \n        if (_endpointMoved) {\n            _consumeSingleClick = true;\n            _singleClickHandled = !_singleClickHandled;\n            this.handleSingleClick(event);\n            _endpointMoved = false;\n        }\n\n        return false;\n    };\n\n    this.handleSingleClick = function (event) {\n        if (_consumeSingleClick) {\n            \n            _snapper.indicator.clearOverlays();\n\n            _measurement.indicator.changeEndpointOnEditStyle(_activePoint, false);\n\n            if (this._handleMouseEvent(event)) {\n                _measurement.indicator.showEndpoints();\n                _measurement.indicator.updateLabelsPosition();\n                _activePoint++;\n            }\n            else {\n                if (this.isEditingEndpoint) {\n                    this.undoEditEndpoint();\n                }\n                else {\n                    this.clearMeasurement();\n                }\n            }\n\n            if (_measurement.isComplete()) {\n                allPicksSet();\n            }\n\n            _consumeSingleClick = false;\n            _singleClickHandled = !_singleClickHandled;\n            this.isEditingEndpoint = false;\n\n            _snapper.clearSnapped();\n        }\n        return true;\n    };\n\n    this.handleDoubleClick = function() {\n        return true;\n    };\n\n    this.handleSingleTap = function (event) {\n        if (!_singleClickHandled) {\n            _consumeSingleClick = true;\n            _snapper.onMouseDown({x: event.canvasX, y:event.canvasY});\n            this.handleSingleClick(event);\n        }\n        _singleClickHandled = !_singleClickHandled;\n\n        return true;\n    };\n\n    this.handleDoubleTap = function() {\n        return true;\n    };\n\n    this.handleResize = function() {\n        if (_measurement.indicator) {\n            _measurement.indicator.handleResize();\n        }\n    };\n\n    this.onCameraChange = function() {\n        if (_snapper.indicator) {\n            _snapper.indicator.onCameraChange();\n        }\n    };\n\n    this.screenSizeChanged = function(event) {\n        this.onCameraChange();\n    };\n};\n","\n    var av = Autodesk.Viewing;\n    var avu = Autodesk.Viewing.UI;\n    var avp = Autodesk.Viewing.Private;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    // /** @constructor */\n    export function MeasureToolbar(measureExtension)\n    {\n        this.measureExtension = measureExtension;\n        this.measureTool = this.measureExtension.measureTool;\n        this.viewer = this.measureExtension.viewer;\n        this.visible = false;\n        this.buttonsList = [];\n    }\n\n    var proto = MeasureToolbar.prototype;\n\n    proto.init = function() {\n        var self = this;\n\n        // Add Measure tool toolbar to main toolbar\n        var toolbar = this.viewer.getToolbar();\n        var navigationBar = toolbar.getControl(Autodesk.Viewing.TOOLBAR.NAVTOOLSID);\n        var toolbarOptions = {};\n        toolbarOptions.index = toolbar.indexOf(navigationBar) + 1;\n        this.measureToolbar = new avu.ControlGroup(Autodesk.Viewing.TOOLBAR.MEASURETOOLSID);\n        toolbar.addControl(this.measureToolbar, toolbarOptions);\n    \n\n        // Create a button for the measure simple distance.\n        this.measureSimpleDistanceBtn = new avu.Button(\"toolbar-measureTool-simple-distance\");\n        this.measureSimpleDistanceBtn.setToolTip(\"Distance\");\n        this.measureSimpleDistanceBtn.setIcon(\"adsk-icon-measure-distance-new\");\n        this.measureSimpleDistanceBtn.onClick = function() {\n            var enable = self.measureSimpleDistanceBtn.getState() !== avu.Button.State.ACTIVE;\n            if (enable) {\n                self.measureExtension.activate('distance');\n            } else {\n                self.measureTool.deselectAllMeasurements();\n            }\n        };\n\n        this.measureToolbar.addControl(this.measureSimpleDistanceBtn);\n        this.buttonsList[MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE] = this.measureSimpleDistanceBtn;\n\n\n        // Create a button for the measure Angle.\n        this.measureAngleBtn = new avu.Button(\"toolbar-measureTool-angle\");\n        this.measureAngleBtn.setToolTip(\"Angle\");\n        this.measureAngleBtn.setIcon(\"adsk-icon-measure-angle-new\");\n        this.measureAngleBtn.onClick = function () {\n            var enable = self.measureAngleBtn.getState() !== avu.Button.State.ACTIVE;\n            if (enable) {\n                self.measureExtension.activate('angle');\n            } else {\n                self.measureTool.deselectAllMeasurements();\n            }\n        };\n        this.measureToolbar.addControl(this.measureAngleBtn);\n        this.buttonsList[MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE] = this.measureAngleBtn;\n\n        if (this.viewer.model && this.viewer.model.is2d()) {\n            // Create a button for the measure distance.\n            this.measureAreaBtn = new avu.Button(\"toolbar-measureTool-area\");\n            this.measureAreaBtn.setToolTip(\"Area\");\n            this.measureAreaBtn.setIcon(\"adsk-icon-measure-area-new\");\n            this.measureAreaBtn.onClick = function() {\n                var enable = self.measureAreaBtn.getState() !== avu.Button.State.ACTIVE;\n                if (enable) {\n                    self.measureExtension.activate('area');\n                } else {\n                    self.measureTool.deselectAllMeasurements();\n                }\n            };\n\n            this.measureToolbar.addControl(this.measureAreaBtn);\n            this.buttonsList[MeasureCommon.MeasurementTypes.MEASUREMENT_AREA] = this.measureAreaBtn;\n        }\n\n        // Create a button for the Calibration tool.\n        this.calibrationToolBtn = new avu.Button( \"toolbar-calibrationTool\");\n        this.calibrationToolBtn.setToolTip(\"Calibrate\");\n        this.calibrationToolBtn.setIcon(\"adsk-icon-measure-calibration\");\n        this.calibrationToolBtn.onClick = function(e) {\n            var enable = self.calibrationToolBtn.getState() !== avu.Button.State.ACTIVE;\n            if(enable) {\n                self.measureExtension.activate('calibrate');\n            } else  {\n                self.measureExtension.enableCalibrationTool(false);\n            }\n        };\n\n        this.measureToolbar.addControl(this.calibrationToolBtn);\n        this.buttonsList[MeasureCommon.MeasurementTypes.CALIBRATION] = this.calibrationToolBtn;\n\n        var separator = document.createElement('div');\n        separator.className = 'measure-toolbar-seperator';\n\n        this.measureToolbar.container.appendChild(separator);\n        \n\n        // Create a button for the Trash.\n        this.deleteBtn = new avu.Button( \"toolbar-delete\");\n        this.deleteBtn.setToolTip(\"Delete measurement\");\n        this.deleteBtn.setIcon(\"adsk-icon-measure-trash\");\n        this.deleteBtn.onClick = function() {\n            self.measureExtension.deleteCurrentMeasurement();\n        };\n\n        this.measureToolbar.addControl(this.deleteBtn);\n\n        // Create a button for the Settings panel.\n        this.settingsBtn = new avu.Button( \"toolbar-settings\");\n        this.settingsBtn.setToolTip(\"Measure settings\");\n        this.settingsBtn.setIcon(\"adsk-icon-measure-settings\");\n\n        this.settingsControlPanel = document.createElement('div');\n        this.settingsControlPanel.classList.add('docking-panel');\n        this.settingsControlPanel.classList.add('docking-panel-container-solid-color-b');\n        this.settingsControlPanel.classList.add('measure-settings-popup');\n        this.settingsControlPanel.classList.add('hide');\n\n        this.settingsBtn.onClick = function (event) {\n            if (this.settingsControlPanel.classList.contains('hide')) {\n                this.settingsControlPanel.classList.remove('hide');\n                this.setButtonActive(this.settingsBtn);\n            }\n            else {\n                this.settingsControlPanel.classList.add('hide');\n                this.setButtonInactive(this.settingsBtn);\n            }\n        }.bind(this);\n\n        this.measureToolbar.container.appendChild(this.settingsControlPanel);\n        this.settingsControlPanel.root = this.settingsBtn;\n        this.measureToolbar.addControl(this.settingsBtn);\n\n\n        // Settings Panel\n        this.table = document.createElement(\"table\");\n        this.table.classList.add(\"adsk-lmv-tftable\");\n        this.table.classList.add(\"calibration-table\");\n\n        this.tbody = document.createElement(\"tbody\");\n        this.table.appendChild(this.tbody);\n        this.settingsControlPanel.appendChild(this.table);\n\n        this.units = [\n            { name: 'Unknown', units: '', matches: [''] },                                      // localized in OptionDropDown() call below\n            { name: 'Decimal feet', units: 'decimal-ft', matches: ['ft', 'decimal-ft'] },             // localized in OptionDropDown() call below\n            { name: 'Feet and fractional inches', units: 'ft-and-fractional-in', matches: ['ft-and-fractional-in'] },         // localized in OptionDropDown() call below\n            { name: 'Feet and decimal inches', units: 'ft-and-decimal-in', matches: ['ft-and-decimal-in'] }, // localized in OptionDropDown() call below\n            { name: 'Decimal inches', units: 'decimal-in', matches: ['in', 'decimal-in'] },           // localized in OptionDropDown() call below\n            { name: 'Fractional inches', units: 'fractional-in', matches: ['fractional-in'] },  // localized in OptionDropDown() call below\n            { name: 'Meters', units: 'm', matches: ['m'] },                                     // localized in OptionDropDown() call below\n            { name: 'Centimeters', units: 'cm', matches: ['cm'] },                              // localized in OptionDropDown() call below\n            { name: 'Millimeters', units: 'mm', matches: ['mm'] },                              // localized in OptionDropDown() call below\n            { name: 'Meters and centimeters', units: 'm-and-cm', matches: ['m-and-cm'] },        // localized in OptionDropDown() call below\n            { name: 'Points', units: 'pt', matches: ['pt'] }                                    // localized in OptionDropDown() call below\n        ];\n\n        var initialIndex = this.findUnits(),\n            unitNames = [];\n        \n        // It is not possible to hide elements in Safari.\n        if (av.isSafari() && this.viewer.model.getDisplayUnit()){\n            // We will remove the 'Unknown' unit from the units array.\n            this.units.shift();\n        }\n        \n        for (var i = 0; i < this.units.length; ++i) {\n            unitNames.push(this.units[i].name);\n        }\n\n        this.unitList = new avp.OptionDropDown(\"Unit type\", this.tbody, unitNames, initialIndex, null, { paddingLeft: 0, paddingRight: 15 });\n        this.unitList.addEventListener(\"change\", function(e) {\n            var index = self.unitList.selectedIndex;\n            var toUnits = self.units[index].units;\n            self.measureTool.setUnits(toUnits);\n            self.setupPrecision();\n            avp.logger.track({ category: 'pref_changed', name: 'measure/units', value: toUnits });\n        });\n\n        this.precisionList = new avp.OptionDropDown(\"Precision\", this.tbody, [], -1, null, { paddingLeft: 0, paddingRight: 15 });\n        this.precisionList.addEventListener(\"change\", function(e) {\n            var index = self.precisionList.selectedIndex;\n            self.measureTool.setPrecision(index);\n            avp.logger.track({ category: 'pref_changed', name: 'measure/precision', value: index });\n        });\n\n        this.isolate = new avp.OptionCheckbox(\"Isolate measurement\", this.tbody, false);\n        this.isolate.addEventListener(\"change\", function(e) {\n            var enable = self.isolate.checked;\n            self.measureTool.setIsolateMeasure(enable);\n            if (enable) {\n                self.measureTool.isolateMeasurement();\n            }\n            else {\n                self.measureTool.clearIsolate();\n            }\n            avp.logger.track({ category: 'pref_changed', name: 'measure/isolate', value: enable });\n        });\n\n        this.setupPrecision();\n\n        this.updateSettingsPanel();\n\n        if (this.viewer.model && this.viewer.model.is2d()) {\n            this.isolate.setVisibility(false);\n        }\n\n        if (!this.measureExtension.sharedMeasureConfig.units) {\n            this.disableUnitOption();\n        }\n        // Only disable option if the browser is not Safari\n        else if (!Autodesk.Viewing.isSafari()){\n            this.disableUnitOption(0);  // disable \"Unknown\" option when the model has units\n        }\n\n\n        // Create a button for 'Done'.\n        this.measureDoneBtn = new avu.Button(\"toolbar-measureTool-done\");\n        var doneText = Autodesk.Viewing.i18n.translate('Done');\n        this.measureDoneBtn.setToolTip(doneText);\n        var cancelLabel = document.createElement('label');\n        cancelLabel.textContent = doneText;\n        var btnContainer = this.measureDoneBtn.container;\n        btnContainer.appendChild(cancelLabel);\n        btnContainer.classList.add('adsk-label-button');\n        var iconEle = btnContainer.getElementsByClassName('adsk-button-icon');\n        iconEle && iconEle[0] && (iconEle[0].style.display = 'none');\n\n        this.measureDoneBtn.onClick = function() {\n            this.measureExtension.exitMeasurementMode();\n        }.bind(this);\n        this.measureToolbar.addControl(this.measureDoneBtn);\n\n        // this.settingsControlPanel.style.width = this.measureToolbar.container.getBoundingClientRect().width + 'px';\n        this.measureToolbar.setVisible(false);\n\n    };\n\n    proto.destroy = function() {\n\n        // If toolbar was open, close it first. Otherwise, we leave ModelTools toolbar in a broken state.\n        if (this.visible) {\n            this.closeToolbar();\n        }\n\n        if (this.measureToolbar) {\n            this.measureToolbar.removeFromParent();\n            this.measureToolbar = null;\n        }\n    };\n\n    proto.closeToolbar = function() {\n\n        this.measureExtension.enableMeasureTool(false);\n        this.measureExtension.enableCalibrationTool(false);\n        this.toggleVisible();\n\n        var toolbar = this.viewer.getToolbar();\n        var viewerToolbarContainer = toolbar.container;\n        var viewerContainerChildrenCount = viewerToolbarContainer.children.length;\n        \n        for(var i = 0; i < viewerContainerChildrenCount; ++i) {\n            viewerToolbarContainer.children[i].style.display = \"\";\n        }\n\n        var modelTools = toolbar.getControl(av.TOOLBAR.MODELTOOLSID);\n        modelTools.addControl(this.measureExtension.measurementToolbarButton, {index: this.measureExtension.measurementToolbarButton.index });\n    };\n\n    proto.toggleVisible = function() {\n        this.visible = !this.visible;\n        this.measureToolbar.setVisible(this.visible);\n        if (!this.visible) {\n            this.settingsControlPanel.classList.add('hide');\n            this.setButtonInactive(this.settingsBtn);\n        }\n    };\n\n    proto.setButtonActive = function(button) {\n        button.setState(avu.Button.State.ACTIVE);\n    };\n\n    proto.setButtonInactive = function(button) {\n        button.setState(avu.Button.State.INACTIVE);\n    };\n\n    proto.deactivateAllButtons = function() {\n        for (var key in this.buttonsList) {\n            if (this.buttonsList.hasOwnProperty(key)) {\n                var button = this.buttonsList[key];\n                this.setButtonInactive(button);   \n            }\n        }\n    };\n\n    proto.activateButtonByType = function(measurementType) {\n        this.setButtonActive(this.buttonsList[measurementType]);\n    };            \n\n    proto.setupPrecision = function() {\n        while (this.precisionList.dropdownElement.lastChild) {\n            this.precisionList.dropdownElement.removeChild(this.precisionList.dropdownElement.lastChild);\n        }\n\n        var selectedUnits = this.measureTool.getUnits(),\n            precisions;\n\n        if (selectedUnits === 'ft-and-fractional-in' || selectedUnits === 'fractional-in') {\n            precisions = ['1', '1/2', '1/4', '1/8', '1/16', '1/32', '1/64'];\n        } else {\n            precisions = ['0', '0.1', '0.01', '0.001', '0.0001', '0.00001'];\n        }\n\n        for (var i = 0; i < precisions.length; ++i) {\n            var elem = document.createElement('option');\n            elem.value = i;\n            elem.textContent = precisions[i];\n            this.precisionList.dropdownElement.appendChild(elem);\n        }\n\n        var selectedIndex = this.measureTool.getPrecision();\n        if (precisions.length <= selectedIndex) {\n            selectedIndex = precisions.length - 1;\n            this.measureTool.setPrecision(selectedIndex);\n        }\n        this.precisionList.dropdownElement.selectedIndex = selectedIndex;\n    };\n\n    proto.findUnits = function() {\n        var i,\n            j,\n            selectedUnits = this.measureTool.getUnits();\n        for (i = 0; i < this.units.length; ++i) {\n            var matches = this.units[i].matches;\n            if (matches) {\n                for (j = 0; j < matches.length; ++j) {\n                    if (matches[j] === selectedUnits) {\n                        return i;\n                    }\n                }\n            }\n        }\n        return 0;\n    };\n\n    proto.disableUnitOption = function( index ) {\n        if (index != null) {\n            this.unitList.dropdownElement.children[index].style.display = \"none\";\n            if (av.isIE11) {\n                // IE11 can't hide <option> elements...\n                this.unitList.dropdownElement.children[index].disabled = true;\n                this.unitList.dropdownElement.children[index].style.visibility = \"hidden\";\n            }\n        } else {  // disable all options\n            this.unitList.dropdownElement.disabled = true;\n        }\n    };\n\n    proto.updateSettingsPanel = function() {\n        this.unitList.dropdownElement.selectedIndex = this.findUnits();\n        this.precisionList.dropdownElement.selectedIndex = this.measureTool.getPrecision();\n        this.setupPrecision();\n    };\n\n\n","import { MeasureTool } from './MeasureTool'\nimport { CalibrationTool } from './CalibrationTool'\nimport { MagnifyingGlass } from './MagnifyingGlass'\nimport { CalibrationRequiredDialog } from './CalibrationPanels'\nimport { MeasureToolbar } from './MeasureToolbar'\n\n\nimport CSS_1 from './Measure.css'       // IMPORTANT!!\nimport CSS_2 from './Calibration.css'   // IMPORTANT!!\n\n'use strict';\n\nvar avem = AutodeskNamespace('Autodesk.Viewing.Extensions.Measure'),\n    av = Autodesk.Viewing,\n    avp = Autodesk.Viewing.Private,\n    avu = av.UI;\nvar MeasureCommon = Autodesk.Viewing.MeasureCommon; // Comes form main viewer bundle.\n\nvar NONE = 0;\nvar MEASURE_TOOL = 1;\nvar CALIBRATION_TOOL = 2;\n\nvar DEFAULT_MEASUREMENT_TYPE = MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE;\n\n/**\n * Provides UI controls to perform distance and angle measurements for 2D and 3D models.\n * \n * The extension id is: `Autodesk.Measure`\n * \n * @example\n *   viewer.loadExtension('Autodesk.Measure')\n *  \n * @memberof Autodesk.Viewing.Extensions\n * @alias Autodesk.Viewing.Extensions.MeasureExtension\n * @see {@link Autodesk.Viewing.Extension} for common inherited methods.\n * @constructor\n*/\nexport var MeasureExtension = function(viewer, options) {\n    Autodesk.Viewing.Extension.call(this, viewer, options);\n    this.modes = ['distance','angle','area','calibrate'];\n    this.name = 'measure';\n    this._onModelLoaded = this._onModelLoaded.bind(this);\n};\n\nMeasureExtension.prototype = Object.create(Autodesk.Viewing.Extension.prototype);\nMeasureExtension.prototype.constructor = MeasureExtension;\n\n\n/**\n * Load the measure extension.\n * @returns {boolean} True if measure extension is loaded successfully.\n * \n * @alias Autodesk.Viewing.Extensions.MeasureExtension#load\n*/\nMeasureExtension.prototype.load = function() {\n\n    var self   = this;\n    var viewer = this.viewer;\n    this.hasUI = Autodesk.Viewing.GuiViewer3D && viewer instanceof Autodesk.Viewing.GuiViewer3D;\n\n    this.escapeHotkeyId = 'Autodesk.Measure.Hotkeys.Escape';\n\n    // Register the Measure tool\n    if (!viewer.toolController){\n        return false;\n    }\n\n    this.options = this.options || {};\n    var measureToolOptions = {};\n\n    measureToolOptions.onCloseCallback = function() {\n        self.enableMeasureTool(false);\n    };\n\n    // Shared State with measureTool & calibrationTool.\n    // Gets populated when a model is received.\n    this.sharedMeasureConfig = { \n        units: null,\n        precision: null,\n        calibrationFactor: null\n    };\n\n\tmeasureToolOptions.snapperOptions = this.options.snapperOptions;\n\n    this.forceCalibrate = this.options.forceCalibrate;\n\n    this.snapper = new MeasureCommon.Snapper(viewer, {\n        renderSnappedTopology: true\n    });\n    viewer.toolController.registerTool(this.snapper);\n\n    this.measureTool = new MeasureTool(viewer, measureToolOptions, this.sharedMeasureConfig, this.snapper);\n    viewer.toolController.registerTool(this.measureTool);\n\n    this.calibrationTool = new CalibrationTool(viewer, this.options, this.sharedMeasureConfig, this.snapper);\n    viewer.toolController.registerTool(this.calibrationTool);\n\n    this.magnifyingGlass = new MagnifyingGlass(viewer);\n    viewer.toolController.registerTool(this.magnifyingGlass);\n\n    this.onFinishedCalibration = function() {\n        if (self.measureToolbar) {\n            self.measureToolbar.updateSettingsPanel();\n        }\n\n        self.activateInitiator && self.activateInitiator();\n    };\n\n    viewer.addEventListener('finished-calibration', this.onFinishedCalibration);\n\n    this.onMeasurementChanged = function(event) {\n        var type = event.data.type;\n        self.changeMeasurementType(type);\n    };\n\n    viewer.addEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChanged);\n\n    if (viewer.model) {\n        this._onModelLoaded({ model: viewer.model });\n    } else {\n        viewer.addEventListener(av.MODEL_ROOT_LOADED_EVENT, this._onModelLoaded, { once: true });\n    }\n\n    // If there is no model anymore, interrupt any ongoing interaction.\n    // We need at least one model to derive things like is2d() and model units.\n    this.onModelRemoved = function() {\n        // If UI was not created yet or destroyed, we don't have to disable anything\n        if (!self.measurementToolbarButton) {\n            return;\n        }\n                \n        if (!self.viewer.model) {\n            self.measurementToolbarButton.setState(Autodesk.Viewing.UI.Button.State.DISABLED);\n            self.exitMeasurementMode();\n        }\n    };\n    this.onModelAdded = function() {\n\n        // If UI was not created yet or destroyed, the button will be enabled in next createUI() call\n        if (!self.measurementToolbarButton) {\n            return;\n        }\n\n        // On first model-add, re-enable measure toolbar again\n        var modelCount = self.viewer.getVisibleModels().length;\n        if (modelCount === 1 && self.measurementToolbarButton) {\n            self.measurementToolbarButton.setState(Autodesk.Viewing.UI.Button.State.INACTIVE);\n        }\n    };\n    viewer.addEventListener(av.MODEL_ADDED_EVENT, this.onModelAdded);\n    viewer.addEventListener(av.MODEL_REMOVED_EVENT, this.onModelRemoved);\n\n    //Load the required dependency (and return the pending load as the load completion Promise)\n    return this.viewer.loadExtension('Autodesk.CompGeom');\n};\n\nMeasureExtension.prototype._onModelLoaded = function(event) {\n    var model = event.model;\n    this.sharedMeasureConfig.units = this.options.calibrationUnits || model.getDisplayUnit();\n    this.sharedMeasureConfig.precision = model.is2d() ? 3 : 1;\n\n    if (this.options.calibrationUnits && !isNaN(this.options.calibrationFactor)) {\n        this.calibrationTool.calibrateByScale(this.options.calibrationUnits, this.options.calibrationFactor);\n    }\n}\n\n/**\n * Unload the measure extension.\n * @returns {boolean} True if measure extension is unloaded successfully.\n * \n * @alias Autodesk.Viewing.Extensions.MeasureExtension#unload\n*/\nMeasureExtension.prototype.unload = function () {\n    var viewer = this.viewer;\n\n    // Remove the ui from the viewer.\n    this.destroyUI();\n\n    viewer.removeEventListener('finished-calibration', this.onFinishedCalibration);\n    viewer.removeEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChanged);\n    viewer.removeEventListener(av.MODEL_ADDED_EVENT, this.onModelAdded);\n    viewer.removeEventListener(av.MODEL_REMOVED_EVENT, this.onModelRemoved);\n    viewer.removeEventListener(av.MODEL_ROOT_LOADED_EVENT, this._onModelLoaded);\n\n    viewer.toolController.deregisterTool(this.snapper);\n    this.snapper = null;\n\n    viewer.toolController.deregisterTool(this.measureTool);\n    this.measureTool = null;\n\n    viewer.toolController.deregisterTool(this.calibrationTool);\n    this.calibrationTool = null;\n\n    viewer.toolController.deregisterTool(this.magnifyingGlass);\n    this.magnifyingGlass = null;\n\n    this.unloaded = true;\n    return true;\n};\n\n/**\n * Enable/disable the measure tool.\n * It does not update the toolbar UI.\n * \n * @param {boolean} active - True to activate, false to deactivate.\n * @returns {boolean} True if a change in activeness occurred.\n */\nMeasureExtension.prototype.setActive = function(active) {\n    return this.enableMeasureTool(active);\n};\n\n/**\n * Toggles activeness of the measure tool.\n * It does not update the toolbar UI.\n * \n * @return {boolean} Whether the tool is active.\n */\nMeasureExtension.prototype.toggle = function() {\n    if (this.isActive()) {\n        this.enableMeasureTool(false);\n    } else {\n        this.enableMeasureTool(true);\n    }\n    return this.isActive();\n};\n\n/**\n * Get the current measurement in the measure tool.\n * @param {string} [unitType] - Either: \"decimal-ft\", \"ft\", \"ft-and-decimal-in\", \"decimal-in\", \"fractional-in\", \"m\", \"cm\", \"mm\" or \"m-and-cm\".\n * @param {number} [precision] - precision index (0: 0, 1: 0.1, 2: 0.01, 3: 0.001, 4: 0.0001, 5: 0.00001).\n * When units type is \"ft\", \"in\" or \"fractional-in\", then the precisions are 0: 1, 1: 1/2, 2: 1/4, 3: 1/8, 4: 1/16, 5: 1/32, 6: 1/64.\n * @returns {object|null} Object with properties of the current measurement, or null.\n */\nMeasureExtension.prototype.getMeasurement = function(unitType, precision) {\n    var measurement = null;\n    if (this.measureTool.isActive()) {\n        measurement = this.measureTool.getMeasurement(unitType, precision);\n    }\n    return measurement;\n};\n\n/**\n * Get all available units in measure tool.\n * @returns {object[]} Array of all available units.\n*/\nMeasureExtension.prototype.getUnitOptions = function() {\n    var units = [\n        { name: 'Unknown', type: '' },\n        { name: 'Decimal feet', type: 'decimal-ft' },\n        { name: 'Feet and fractional inches', type: 'ft' },\n        { name: 'Feet and decimal inches', type: 'ft-and-decimal-in' },\n        { name: 'Decimal inches', type: 'decimal-in' },\n        { name: 'Fractional inches', type: 'fractional-in' },\n        { name: 'Meters', type: 'm' },\n        { name: 'Centimeters', type: 'cm' },\n        { name: 'Millimeters', type: 'mm' },\n        { name: 'Meters and centimeters', type: 'm-and-cm' },\n        { name: 'Points', type: 'pt' }\n    ];\n\n    return units;\n};\n\n/**\n * Get all available precisions in measure tool.\n * @param {boolean} isFractional - Set true to get fractional precisions.\n * @return {string[]} List of all available precisions.\n*/\nMeasureExtension.prototype.getPrecisionOptions = function(isFractional) {\n\n    var precisions;\n\n    if (isFractional)\n        precisions = ['1', '1/2', '1/4', '1/8', '1/16', '1/32', '1/64'];\n    else\n        precisions = ['0', '0.1', '0.01', '0.001', '0.0001', '0.00001'];\n\n    return precisions;\n};\n\n/**\n * Get the default measure unit in measure tool.\n * @returns {string} The default measure unit.\n*/\nMeasureExtension.prototype.getDefaultUnit = function() {\n    var unit = this.viewer.model.getDisplayUnit();\n\n    return unit;\n};\n\nMeasureExtension.prototype.openCalibrationRequiredDialog = function (initiator) {\n    if (this.hasUI) {\n        if (!this.CalibrationRequiredDialog) {\n            this.CalibrationRequiredDialog = new CalibrationRequiredDialog(this, this.viewer, \"calibration-required\", \"Calibration Required\", this.options );\n        }\n\n        this.CalibrationRequiredDialog.setVisible(true);\n    }\n    else {\n        this.viewer.dispatchEvent({ type: MeasureCommon.Events.CALIBRATION_REQUIRED_EVENT });\n    }\n\n    if (initiator === 'measure') {\n        this.activateInitiator = function() {\n            this.enableMeasureTool(true, DEFAULT_MEASUREMENT_TYPE);\n            this.activateInitiator = null;\n        };\n    } else if (initiator === 'dimension') {\n        this.activateInitiator = function() {\n            this.viewer.dispatchEvent({ type: MeasureCommon.Events.FINISHED_CALIBRATION_FOR_DIMENSION_EVENT });\n            this.activateInitiator = null;\n        };\n    }\n};\n/**\n * @param mode Measurement Mode\n * @returns {boolean}\n */\n\n /**\n  * Activates the tool and UI to start measuring.\n  * \n  * @param {string} [mode] - Either 'distance', 'angle', 'area' (2D only) or 'calibrate'. Default is 'distance'.\n * \n * @alias Autodesk.Viewing.Extensions.MeasureExtension#activate\n  */\nMeasureExtension.prototype.activate = function (mode) {\n    if (this.activeStatus && this.mode === mode) {\n        return true;\n    }\n    this.enterMeasurementMode();\n\n    var success;\n\n    switch (mode) {\n        default:\n            mode = 'distance';\n        case 'distance':\n            success = this.enableMeasureTool(true, MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE);\n            break;\n        case 'angle':\n            success = this.enableMeasureTool(true, MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE);\n            break;\n        case 'area':\n            if(!this.viewer.model.is2d()) {\n                console.warn('Area mode is applicable on 2D models only');\n            } else {\n                success = this.enableMeasureTool(true, MeasureCommon.MeasurementTypes.MEASUREMENT_AREA);\n            }\n            break;\n        case 'calibrate':\n            success = this.enableCalibrationTool(true);\n            break;\n    }\n\n    this.mode = success ? mode : '';\n    this.activeStatus = true;\n    return true;\n};\n\n/**\n * Deactivates measuring tool and UI.\n * \n * @returns {boolean}\n * \n * @alias Autodesk.Viewing.Extensions.MeasureExtension#deactivate\n */\nMeasureExtension.prototype.deactivate = function () {\n    if(this.activeStatus) {\n        this.exitMeasurementMode();\n        this.enableMeasureTool(false);\n        this.activeStatus = false;\n    }\n    return true;\n};\n\n/**\n * Enable/disable the measure tool.\n * @param {boolean} enable - True to enable, false to disable.\n * @returns {boolean} True if the tool state was changed.\n * @private\n */\nMeasureExtension.prototype.enableMeasureTool = function(enable, measurementType) {\n    if (measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && this.viewer.model && !this.viewer.model.is2d()) {\n        return false;\n    }\n\n    var toolController = this.viewer.toolController,\n        isActive = (this.selectedTool === MEASURE_TOOL);\n\n    if (!this.viewer.model || (!enable && isActive)) {\n        if (this.measureTool.isActive()) {\n            toolController.deactivateTool(\"measure\");\n\n            if (this.measureToolbar) {\n                this.measureToolbar.deactivateAllButtons();\n            }\n\n            // No tool is active anymore. Only do this if measureTool was really the active one before.\n            // If not, changing selectedTool would produce an inconsistent state, e.g., CalibrationTool \n            // may still be active, but enableCalibrationTool(false) would not properly close it.\n            this.selectedTool = NONE;\n        }\n\n        return true;\n    }\n\n    this.forceCalibrate |= this.viewer.model.getData().isLeaflet;\n\n    if (!measurementType) {\n        measurementType = DEFAULT_MEASUREMENT_TYPE;\n    }\n\n    if (enable && !isActive) {\n        // Fetch topology when opening Measure tool for the first time.\n        this.checkAndFetchTopology(toolController.getTool('measure'));\n\n        if (!this.forceCalibrate || (this.forceCalibrate && this.calibrationTool.isCalibrated()) || measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE) {\n            if (this.calibrationTool.isActive()) {\n                toolController.deactivateTool(\"calibration\");\n            }\n            \n            if (this.measureToolbar) {\n                this.measureToolbar.updateSettingsPanel();\n            }\n\n            toolController.activateTool(\"measure\");\n\n            this.selectedTool = MEASURE_TOOL;\n\n            \n\n            this.changeMeasurementType(measurementType);\n            return true;\n        }\n        else {\n            this.viewer.addEventListener(avem.OPEN_TOOL_AFTER_CALIBRAION, function(){\n                this.enableMeasureTool(true);                \n            }.bind(this), {once: true});\n            \n            this.openCalibrationRequiredDialog('measure');\n            return false;\n        }\n\n    } else if (enable && isActive) {\n        if (!this.forceCalibrate || (this.forceCalibrate && this.calibrationTool.isCalibrated()) || measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE) {\n            this.changeMeasurementType(measurementType);\n            return true;\n        }\n        else {\n            this.openCalibrationRequiredDialog('measure');\n            return false;\n        }\n    }\n\n    return false;\n};\n\nMeasureExtension.prototype.changeMeasurementType = function(measurementType) {\n    this.measureTool.changeMeasurementType(measurementType);\n    if (this.measureToolbar) {\n        this.measureToolbar.deactivateAllButtons();\n        this.measureToolbar.activateButtonByType(measurementType);\n    }\n};\n\n/**\n * Enable/disable the measure tool.\n * @param {boolean} enable - True to enable, false to disable.\n * @returns {boolean} True if the tool state was changed.\n * @private\n */\nMeasureExtension.prototype.enableCalibrationTool = function(enable) {\n    var toolController = this.viewer.toolController,\n        isActive = (this.selectedTool == CALIBRATION_TOOL);\n\n    if (enable && !isActive) {\n        if (this.measureTool.isActive()) {\n            toolController.deactivateTool(\"measure\");\n        }\n        \n        toolController.activateTool(\"calibration\");\n        this.viewer.dispatchEvent({ type: MeasureCommon.Events.UNITS_CALIBRATION_STARTS_EVENT });\n        \n        if (this.measureToolbar) {\n            this.measureToolbar.deactivateAllButtons();\n            this.measureToolbar.activateButtonByType(MeasureCommon.MeasurementTypes.CALIBRATION);\n        }\n\n        this.selectedTool = CALIBRATION_TOOL;\n        return true;\n\n    } else if (!enable && isActive) {\n        if (this.calibrationTool.isActive()) {\n            this.mode = '';\n            toolController.deactivateTool(\"calibration\");\n            if (this.measureToolbar) {\n                this.measureToolbar.deactivateAllButtons();\n            }\n        }\n\n        this.selectedTool = NONE;\n        return true;\n    }\n    return false;\n};\n\n/**\n * @private\n */\nMeasureExtension.prototype.enterMeasurementMode = function() {\n\n    if (this._measurementMode) return;\n    this._measurementMode = true;\n\n    if (!this.viewer.getToolbar) {\n        return; // Adds support for Viewer3D instance\n    }\n\n    var toolbar = this.viewer.getToolbar();    \n    var viewerToolbarContainer = toolbar.container;\n    var viewerContainerChildrenCount = viewerToolbarContainer.children.length;\n    for(var i = 0; i < viewerContainerChildrenCount; ++i) {\n        viewerToolbarContainer.children[i].style.display = \"none\";\n    }\n\n    this.navigationControls = toolbar.getControl(Autodesk.Viewing.TOOLBAR.NAVTOOLSID);\n    this.navigationControls.setVisible(true);\n    this.navigationControls.container.style.display = '';\n\n    this.measureControls = toolbar.getControl(Autodesk.Viewing.TOOLBAR.MEASURETOOLSID);\n    this.measureControls.setVisible(true);\n    this.measureControls.container.style.display = '';\n    \n    var measureButtonId = this.measurementToolbarButton.getId();\n    this.measurementToolbarButton.index = this.measurementToolbarButton.parent.indexOf(measureButtonId);\n    this.measurementToolbarButton.parent.removeControl(measureButtonId);\n\n    this.measureToolbar.toggleVisible();\n\n    if (this.viewer.centerToolBar) {\n        this.viewer.centerToolBar();\n    }\n\n    this.enableMeasureTool(true, DEFAULT_MEASUREMENT_TYPE);\n};\n\n/**\n * @private\n */\nMeasureExtension.prototype.exitMeasurementMode = function() {\n    if (!this._measurementMode) return;\n    this.measureToolbar && this.measureToolbar.closeToolbar();\n    if (this.CalibrationRequiredDialog && this.CalibrationRequiredDialog.isVisible()) {\n        this.CalibrationRequiredDialog.setVisible(false);\n    }\n    this._measurementMode = false;\n};\n\n/**\n * Create measure button in toolbar.\n * @private\n*/\nMeasureExtension.prototype.onToolbarCreated = function(toolbar)\n{\n    if (this.measureToolbar) {\n        return;\n    }\n\n    var self   = this;\n    var viewer = this.viewer;\n\n    // Add Measure button to toolbar\n    var modelTools = toolbar.getControl(av.TOOLBAR.MODELTOOLSID);\n    this.measurementToolbarButton = new avu.Button('toolbar-measurementSubmenuTool');\n    this.measurementToolbarButton.setToolTip('Measure');\n    this.measurementToolbarButton.setIcon(\"adsk-icon-measure\");\n    modelTools.measurementToolbarButton = this.measurementToolbarButton;\n    modelTools.addControl(this.measurementToolbarButton, {index:0});\n\n    // Set button enabled if and only if there is >=1 visible model. Otherwise, it will remain disabled until next model-add event.\n    var state = this.viewer.model ? Autodesk.Viewing.UI.Button.State.INACTIVE : Autodesk.Viewing.UI.Button.State.DISABLED;\n    this.measurementToolbarButton.setState(state);\n\n    this.measureToolbar = new MeasureToolbar(this);\n    this.measureToolbar.init();\n\n    this.measurementToolbarButton.onClick = this.activate.bind(this);\n\n    // Escape hotkey to exit tool.\n    //\n    var hotkeys = [{\n        keycodes: [\n            Autodesk.Viewing.KeyCode.ESCAPE\n        ],\n        onRelease: function () {\n            if (self._measurementMode) {\n                self.exitMeasurementMode();\n                return true;\n            }\n        }\n    }];\n    viewer.getHotkeyManager().pushHotkeys(this.escapeHotkeyId, hotkeys);\n};\n\n\n/**\n * @private\n */\nMeasureExtension.prototype.checkAndFetchTopology = function(tool) {\n\n    if (this._checkedTopology) {\n        return;\n    }\n\n    this._checkedTopology = true;\n    if (!this.viewer.model.is3d()) {\n        tool && tool.setNoTopology();\n        return;\n    }\n\n    if (this.viewer.modelHasTopology()){\n        tool && tool.setTopologyAvailable();\n        return;\n    }\n\n    // Fetch topology from backend.\n    tool && tool.setFetchingTopology();\n    this.viewer.model.fetchTopology()\n    .then(function(topoData){\n        tool && tool.setTopologyAvailable();\n    })\n    .catch(function(err){\n        avp.logger.log(err); // No topology\n        tool && tool.setNoTopology();\n    });\n};\n\n/**\n * Destroy measure button in toolbar.\n * @private\n*/\nMeasureExtension.prototype.destroyUI = function()\n{\n    var viewer = this.viewer;\n\n    if (this.measureToolbar) {\n         this.measureToolbar.destroy();\n         this.measureToolbar = null;\n    }\n\n    if (this.measurementToolbarButton) {\n        this.measurementToolbarButton.removeFromParent();\n        this.measurementToolbarButton = null;\n    }\n\n    viewer.getHotkeyManager().popHotkeys(this.escapeHotkeyId);\n};\n\nMeasureExtension.prototype.setUnits = function(units) {\n    this.measureTool.setUnits(units);\n};\n\nMeasureExtension.prototype.getUnits = function() {\n    return this.measureTool.getUnits();\n};\n\nMeasureExtension.prototype.setPrecision = function(precision) {\n    this.measureTool.setPrecision(precision);\n};\n\nMeasureExtension.prototype.getPrecision = function() {\n    return this.measureTool.getPrecision();\n};\n\nMeasureExtension.prototype.calibrate = function(requestedUnits, requestedSize) {\n    this.calibrationTool.calibrate(requestedUnits, requestedSize);\n};\n\nMeasureExtension.prototype.calibrateByScale = function(requestedUnits, requestedScale) {\n    this.calibrationTool.calibrateByScale(requestedUnits, requestedScale);\n};\n\nMeasureExtension.prototype.isCalibrationValid = function(requestedUnits, requestedSize) { \n    return this.calibrationTool.isCalibrationValid(requestedUnits, requestedSize); \n};\n\nMeasureExtension.prototype.getCalibrationFactor = function() {\n    return this.calibrationTool.getCalibrationFactor();\n};\n\nMeasureExtension.prototype.showAddCalibrationLabel = function() {\n    this.calibrationTool.showAddCalibrationLabel();\n};\n\n/**\n * Deletes the selected measurement.\n * \n * @alias Autodesk.Viewing.Extensions.MeasureExtension#deleteCurrentMeasurement\n */\nMeasureExtension.prototype.deleteCurrentMeasurement = function() {\n    this.measureTool.deleteCurrentMeasurement();\n};\n\nMeasureExtension.prototype.selectMeasurementById = function(id) {\n    this.measureTool.selectMeasurementById(id);\n};\n\nav.theExtensionManager.registerExtension('Autodesk.Measure', MeasureExtension);\n\n\n","\nexport var MagnifyingGlass = function(viewer) {\n\n    var _viewer = viewer;\n    var _active = false;\n    var _names = [\"magnifyingGlass\"];\n    var _priority = 70;\n    var _isPressing = false;\n    var _radius = 60;\n    var _zoom = 2;\n    var _offset = 15;\n    var _magnifyingGlassCanvas = null;\n    var _imageData = null;\n    var _imageBuffer = null;\n    var _clientX = null;\n    var _clientY = null;\n    var _needsClear = false;\n    var av = Autodesk.Viewing;\n    \n\n    this.isActive = function() {\n\n        return _active;\n    };\n\n    this.activate = function() {\n\n        _active = true;\n        this.updateMagnifyingGlassBinded = this.updateMagnifyingGlass.bind(this);\n    };\n\n    this.updateMagnifyingGlass = function() {\n        if (_needsClear) {\n            _magnifyingGlassCanvas && _magnifyingGlassCanvas.classList.remove('visible');\n            _needsClear = false;\n        }\n        else {\n            var pixelRatio = window.devicePixelRatio;\n            var diameter = 2 * _radius;\n            var normlizedDiameter = diameter * pixelRatio;\n            var x = pixelRatio * (_clientX - (_radius  / _zoom));\n            var y = pixelRatio * (_clientY - (_radius  / _zoom));\n            \n            if (!_magnifyingGlassCanvas) {\n                _magnifyingGlassCanvas = document.createElement(\"canvas\");\n                _magnifyingGlassCanvas.className = 'magnifying-glass';\n                _magnifyingGlassCanvas.width = normlizedDiameter;\n                _magnifyingGlassCanvas.height = normlizedDiameter;\n                _magnifyingGlassCanvas.style.width = diameter + 'px';\n                _magnifyingGlassCanvas.style.height = diameter + 'px';\n\n                // Swap canvas\n                _magnifyingGlassCanvas.getContext(\"2d\").translate(0, normlizedDiameter);\n                _magnifyingGlassCanvas.getContext(\"2d\").scale(1,-1);\n\n                _viewer.container.appendChild(_magnifyingGlassCanvas);\n                _imageData = _magnifyingGlassCanvas.getContext(\"2d\").createImageData(Math.ceil(normlizedDiameter / _zoom), Math.ceil(normlizedDiameter / _zoom));\n                _imageBuffer = new Uint8Array(_imageData.data.buffer);\n            }\n\n            var ctx = _magnifyingGlassCanvas.getContext(\"2d\");\n            \n            // Read the pixels from the frame buffer\n            var gl = _viewer.canvas.getContext(\"webgl\") || _viewer.canvas.getContext(\"experimental-webgl\");         \n            gl.readPixels(x, _viewer.canvas.height - y - _imageData.height, _imageData.width, _imageData.height, gl.RGBA, gl.UNSIGNED_BYTE, _imageBuffer);\n            // Put the pixel into the magnifying context.\n            ctx.putImageData(_imageData, 0, 0);\n            // Scale the image\n            ctx.drawImage(_magnifyingGlassCanvas, 0, 0, _imageData.width, _imageData.height, 0, 0, normlizedDiameter, normlizedDiameter);\n            this.setGlassPosition(_magnifyingGlassCanvas, _clientX, _clientY, diameter, _offset); \n\n            _magnifyingGlassCanvas.classList.toggle('visible', true);\n        }\n    };\n\n    this.deactivate = function() {\n        this.clearMagnifyingGlass();\n        _active = false;\n    };\n\n    this.getNames = function() {\n\n        return _names;\n    };\n\n    this.getName = function() {\n\n        return _names[0];\n    };\n\n    this.getPriority = function() {\n        return _priority;\n    };\n\n    this.setGlassPosition = function(canvas, x, y, diameter, offset) {\n            \n        // check the left border of canvas\n        canvas.style.left = (x - diameter/2) + 'px';\n\n        // check the top border of canvas\n        if (y - diameter - offset > 0) {\n            canvas.style.top  = (y - diameter - offset) + 'px';    \n        }\n        else {\n            canvas.style.top = (y + offset) + 'px';    \n        }\n    };\n\n    this.requestUpdate = function() {\n        if(!_viewer.hasEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.updateMagnifyingGlassBinded)) {\n           _viewer.addEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.updateMagnifyingGlassBinded, { once: true });\n        }\n    };\n\n    this.drawMagnifyingGlass = function(clientX, clientY) {\n        _clientX = clientX;\n        _clientY = clientY;\n        _viewer.impl.invalidate(false, false, true);\n        this.requestUpdate();\n    };\n\n    this.clearMagnifyingGlass = function () {\n        _needsClear = true;\n        this.requestUpdate();\n    };\n\n    this.handlePressHold = function (event) {\n\n        if (av.isTouchDevice()) {\n            switch( event.type )\n            {\n                case \"press\":\n                    _isPressing = true;\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"pressup\":\n                    this.clearMagnifyingGlass();\n                    _isPressing = false;\n                    break;\n            }\n        }\n        return false;\n\n    };\n\n    this.handleGesture = function(event) {\n\n        if (_isPressing && av.isTouchDevice()) {\n            switch( event.type )\n            {\n                case \"dragstart\":\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"dragmove\":\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"dragend\":\n                    this.clearMagnifyingGlass();\n                    _isPressing = false;\n                    break;\n\n                case \"pinchstart\":\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"pinchmove\":\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"pinchend\":\n                    this.clearMagnifyingGlass();\n                    break;\n            }\n        }\n\n        return false;\n    };\n\n    this.handleMouseMove = function (event) {\n        return false;\n    };\n\n    this.handleWheelInput = function (delta) {\n        return false;\n    };\n\n    this.handleButtonUp = function (event, button) {\n        return false;\n    };\n\n};\n","module.exports = function escape(url) {\n    if (typeof url !== 'string') {\n        return url\n    }\n    // If url is already wrapped in quotes, remove them\n    if (/^['\"].*['\"]$/.test(url)) {\n        url = url.slice(1, -1);\n    }\n    // Should url be wrapped?\n    // See https://drafts.csswg.org/css-values-3/#urls\n    if (/[\"'() \\t\\n]/.test(url)) {\n        return '\"' + url.replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n') + '\"'\n    }\n\n    return url\n}\n"],"sourceRoot":""}